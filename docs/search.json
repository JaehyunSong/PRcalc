[
  {
    "objectID": "memo.html",
    "href": "memo.html",
    "title": "PRcalc",
    "section": "",
    "text": "重要度は現時点での重要度\n\nたとえば、ドキュメント、ヘルプの整備が重要でないということではなく、現時点では重要でないとのこと。中身が安定し、公開フェーズへ移行したらデバッグと共に最重要事項となる。\n\n\n\n\n引き続き、バグおよび計算間違いの検証\n新しいサンプルデータ（政党連合のデータ）\n\n\n\n\n\nplot()メソッドを洗練させる\n\n\n\n\n\nコードをメンテナンスしやすく\n各種ドキュメント（ヘルプ、ウェブページ）の整備\n\nReferenceも相当あるので明記する。",
    "crumbs": [
      "Memo"
    ]
  },
  {
    "objectID": "memo.html#memo",
    "href": "memo.html#memo",
    "title": "PRcalc",
    "section": "",
    "text": "重要度は現時点での重要度\n\nたとえば、ドキュメント、ヘルプの整備が重要でないということではなく、現時点では重要でないとのこと。中身が安定し、公開フェーズへ移行したらデバッグと共に最重要事項となる。\n\n\n\n\n引き続き、バグおよび計算間違いの検証\n新しいサンプルデータ（政党連合のデータ）\n\n\n\n\n\nplot()メソッドを洗練させる\n\n\n\n\n\nコードをメンテナンスしやすく\n各種ドキュメント（ヘルプ、ウェブページ）の整備\n\nReferenceも相当あるので明記する。",
    "crumbs": [
      "Memo"
    ]
  },
  {
    "objectID": "tutorials/calculation.html",
    "href": "tutorials/calculation.html",
    "title": "Seat allocation",
    "section": "",
    "text": "library(PRcalc)\nlibrary(tidyverse)"
  },
  {
    "objectID": "tutorials/calculation.html#import-sample-dataset",
    "href": "tutorials/calculation.html#import-sample-dataset",
    "title": "Seat allocation",
    "section": "Import sample dataset",
    "text": "Import sample dataset\nThe first column contains the names of political parties, and the subsequent columns contain the respective number of votes for each party.\n\n# Korean general election in 2016\n# See \"str(kr_lower_2016_en)\", for the full names of parties\n# Number of blocks = 1 (national block)\ndata(\"kr_lower_2016_en\")\nkr_lower_2016_en\n\n  Party    Vote\n1   LKP 7960272\n2   DPK 6069744\n3    PP 6355572\n4    JP 1719891\n5   CLP  626853\n6    MP  209872\n7   GPK  182301\n8   PUP  145624\n9   CDP  129978\n\n# Japanese lower house election in 2019 (in English)\n# See \"str(jp_lower_2021_en)\", for the full names of parties\n# Number of blocks = 11 (regional blocks)\ndata(\"jp_lower_2021_en\")\njp_lower_2021_en\n\n    Party Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1     LDP   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2     NKP   294371  456287    823930      850667  715450   322535  784976\n3     CDP   682913  991505   1391149     1651562 1293281   773076 1485947\n4     JCP   207189  292830    444115      534493  670340   225551  408606\n5     JIP   215344  258690    617531      863897  858577   361476  694630\n6     DPP    73621  195754    298056      384482  306180   133600  382734\n7     SDP    41248  101442     97963      124447   92995    71185   84220\n8   Reiwa   102086  143265    239592      302675  360387   111281  273208\n9     NHK    42916   52664     87702      111298   92353    43529   98238\n10    SSN    46142       0         0           0       0        0       0\n11    JFP        0       0         0           0   33661        0       0\n12 Yamato        0       0         0           0   16970        0       0\n13 Corona        0       0         0           0    6620        0       0\n     Kinki Chugoku Shikoku  Kyushu\n1  2407699 1352723  664805 2250966\n2  1155683  436220  233407 1040756\n3  1090666  573324  291871 1266801\n4   736156  173117  108021  365658\n5  3180219  286302  173826  540338\n6   303480  113899  122082  279509\n7   100980   52638   30249  221221\n8   292483   94446   52941  243284\n9   111539   36758   21285   98506\n10       0       0       0       0\n11       0       0       0       0\n12       0       0       0       0\n13       0       0       0       0"
  },
  {
    "objectID": "tutorials/calculation.html#calculation",
    "href": "tutorials/calculation.html#calculation",
    "title": "Seat allocation",
    "section": "Calculation",
    "text": "Calculation\nTo calculate seat allocation using the prcalc() function, you need to specify the following: data (x), electoral magnitude (m), and allocation method (method). Below is an example of allocating 47 (m = 47) seats using the Hare-Niemeyer method (method = \"hn\") with the kr_lower_2016 dataset. In this case, the length of m is 1 because number of blocks is 1. Furthermore, by adjusting the threshold argument, it is possible to exclude parties with votes below a certain threshold from seat allocation. The follow is an example of threshold is 3% (0.03). Default is threshold = 0.\n\n# Example of national block (D'Hondt/Jefferson method)\nobj1 &lt;- prcalc(kr_lower_2016_en, m = 47, method = \"hn\", threshold = 0.03)\nobj1\n\nRaw:\n  Party    Vote\n1   LKP 7960272\n2   DPK 6069744\n3    PP 6355572\n4    JP 1719891\n5   CLP  626853\n6    MP  209872\n7   GPK  182301\n8   PUP  145624\n9   CDP  129978\n\nResult:\n  Party Vote\n1   LKP   17\n2   DPK   13\n3    PP   13\n4    JP    4\n5   CLP    0\n6    MP    0\n7   GPK    0\n8   PUP    0\n9   CDP    0\n\nParameters:\n  Allocation method: Hare-Niemeyer quota \n  Extra parameter: \n  Threshold: 0.03 \n\nMagnitude: 47\n\n\nIn a block system, you need to specify m for each block separately. Since jp_lower_2021 has 11 blocks, the length of m also needs to be 11.\n\n# Example of regional block (D'Hondt/Jefferson method; 11 blocks)\nobj2 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"dt\")\nobj2\n\nRaw:\n    Party Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1     LDP   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2     NKP   294371  456287    823930      850667  715450   322535  784976\n3     CDP   682913  991505   1391149     1651562 1293281   773076 1485947\n4     JCP   207189  292830    444115      534493  670340   225551  408606\n5     JIP   215344  258690    617531      863897  858577   361476  694630\n6     DPP    73621  195754    298056      384482  306180   133600  382734\n7     SDP    41248  101442     97963      124447   92995    71185   84220\n8   Reiwa   102086  143265    239592      302675  360387   111281  273208\n9     NHK    42916   52664     87702      111298   92353    43529   98238\n10    SSN    46142       0         0           0       0        0       0\n11    JFP        0       0         0           0   33661        0       0\n12 Yamato        0       0         0           0   16970        0       0\n13 Corona        0       0         0           0    6620        0       0\n     Kinki Chugoku Shikoku  Kyushu    Total\n1  2407699 1352723  664805 2250966 19914883\n2  1155683  436220  233407 1040756  7114282\n3  1090666  573324  291871 1266801 11492095\n4   736156  173117  108021  365658  4166076\n5  3180219  286302  173826  540338  8050830\n6   303480  113899  122082  279509  2593397\n7   100980   52638   30249  221221  1018588\n8   292483   94446   52941  243284  2215648\n9   111539   36758   21285   98506   796788\n10       0       0       0       0    46142\n11       0       0       0       0    33661\n12       0       0       0       0    16970\n13       0       0       0       0     6620\n\nResult:\n    Party Hokkaido Tohoku Kitakanto Minamikanto Tokyo Hokuriku Tokai Kinki\n1     LDP        3      6         7           8     6        5     8     8\n2     NKP        1      1         3           3     2        1     3     3\n3     CDP        3      4         5           5     4        3     5     3\n4     JCP        0      1         1           1     2        1     1     2\n5     JIP        1      1         2           3     2        1     2    10\n6     DPP        0      0         1           1     0        0     1     1\n7     SDP        0      0         0           0     0        0     0     0\n8   Reiwa        0      0         0           1     1        0     1     1\n9     NHK        0      0         0           0     0        0     0     0\n10    SSN        0      0         0           0     0        0     0     0\n11    JFP        0      0         0           0     0        0     0     0\n12 Yamato        0      0         0           0     0        0     0     0\n13 Corona        0      0         0           0     0        0     0     0\n   Chugoku Shikoku Kyushu Total\n1        5       3      8    67\n2        2       1      4    24\n3        3       1      4    40\n4        0       0      1    10\n5        1       1      2    26\n6        0       0      1     5\n7        0       0      0     0\n8        0       0      0     4\n9        0       0      0     0\n10       0       0      0     0\n11       0       0      0     0\n12       0       0      0     0\n13       0       0      0     0\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          13          19          22          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          28          11           6          20 \n\n\n{PRcalc} offers various allocation methods. Below is an example similar to the previous one, but with the allocation methods changed to the Hare-Niemeyer (\"hn\") method and the Sainte-Laguë method (\"sl\").\n\n# Hare-Niemeyer method\nobj3 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"hn\")\nobj3\n\nRaw:\n    Party Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1     LDP   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2     NKP   294371  456287    823930      850667  715450   322535  784976\n3     CDP   682913  991505   1391149     1651562 1293281   773076 1485947\n4     JCP   207189  292830    444115      534493  670340   225551  408606\n5     JIP   215344  258690    617531      863897  858577   361476  694630\n6     DPP    73621  195754    298056      384482  306180   133600  382734\n7     SDP    41248  101442     97963      124447   92995    71185   84220\n8   Reiwa   102086  143265    239592      302675  360387   111281  273208\n9     NHK    42916   52664     87702      111298   92353    43529   98238\n10    SSN    46142       0         0           0       0        0       0\n11    JFP        0       0         0           0   33661        0       0\n12 Yamato        0       0         0           0   16970        0       0\n13 Corona        0       0         0           0    6620        0       0\n     Kinki Chugoku Shikoku  Kyushu    Total\n1  2407699 1352723  664805 2250966 19914883\n2  1155683  436220  233407 1040756  7114282\n3  1090666  573324  291871 1266801 11492095\n4   736156  173117  108021  365658  4166076\n5  3180219  286302  173826  540338  8050830\n6   303480  113899  122082  279509  2593397\n7   100980   52638   30249  221221  1018588\n8   292483   94446   52941  243284  2215648\n9   111539   36758   21285   98506   796788\n10       0       0       0       0    46142\n11       0       0       0       0    33661\n12       0       0       0       0    16970\n13       0       0       0       0     6620\n\nResult:\n    Party Hokkaido Tohoku Kitakanto Minamikanto Tokyo Hokuriku Tokai Kinki\n1     LDP        3      5         7           8     5        5     8     7\n2     NKP        1      1         3           2     2        1     3     4\n3     CDP        2      3         4           5     4        3     5     3\n4     JCP        1      1         1           2     2        1     1     2\n5     JIP        1      1         2           3     2        1     2    10\n6     DPP        0      1         1           1     1        0     1     1\n7     SDP        0      0         0           0     0        0     0     0\n8   Reiwa        0      1         1           1     1        0     1     1\n9     NHK        0      0         0           0     0        0     0     0\n10    SSN        0      0         0           0     0        0     0     0\n11    JFP        0      0         0           0     0        0     0     0\n12 Yamato        0      0         0           0     0        0     0     0\n13 Corona        0      0         0           0     0        0     0     0\n   Chugoku Shikoku Kyushu Total\n1        5       2      7    62\n2        2       1      3    23\n3        2       1      4    36\n4        1       0      1    13\n5        1       1      2    26\n6        0       1      1     8\n7        0       0      1     1\n8        0       0      1     7\n9        0       0      0     0\n10       0       0      0     0\n11       0       0      0     0\n12       0       0      0     0\n13       0       0      0     0\n\nParameters:\n  Allocation method: Hare-Niemeyer quota \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          13          19          22          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          28          11           6          20 \n\n# Sainte-Laguë/Webster method\nobj4 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"sl\")\nobj4\n\nRaw:\n    Party Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1     LDP   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2     NKP   294371  456287    823930      850667  715450   322535  784976\n3     CDP   682913  991505   1391149     1651562 1293281   773076 1485947\n4     JCP   207189  292830    444115      534493  670340   225551  408606\n5     JIP   215344  258690    617531      863897  858577   361476  694630\n6     DPP    73621  195754    298056      384482  306180   133600  382734\n7     SDP    41248  101442     97963      124447   92995    71185   84220\n8   Reiwa   102086  143265    239592      302675  360387   111281  273208\n9     NHK    42916   52664     87702      111298   92353    43529   98238\n10    SSN    46142       0         0           0       0        0       0\n11    JFP        0       0         0           0   33661        0       0\n12 Yamato        0       0         0           0   16970        0       0\n13 Corona        0       0         0           0    6620        0       0\n     Kinki Chugoku Shikoku  Kyushu    Total\n1  2407699 1352723  664805 2250966 19914883\n2  1155683  436220  233407 1040756  7114282\n3  1090666  573324  291871 1266801 11492095\n4   736156  173117  108021  365658  4166076\n5  3180219  286302  173826  540338  8050830\n6   303480  113899  122082  279509  2593397\n7   100980   52638   30249  221221  1018588\n8   292483   94446   52941  243284  2215648\n9   111539   36758   21285   98506   796788\n10       0       0       0       0    46142\n11       0       0       0       0    33661\n12       0       0       0       0    16970\n13       0       0       0       0     6620\n\nResult:\n    Party Hokkaido Tohoku Kitakanto Minamikanto Tokyo Hokuriku Tokai Kinki\n1     LDP        3      5         7           8     5        5     8     7\n2     NKP        1      2         3           2     2        1     3     4\n3     CDP        2      3         4           5     4        3     5     3\n4     JCP        1      1         1           2     2        1     1     2\n5     JIP        1      1         2           3     2        1     2    10\n6     DPP        0      1         1           1     1        0     1     1\n7     SDP        0      0         0           0     0        0     0     0\n8   Reiwa        0      0         1           1     1        0     1     1\n9     NHK        0      0         0           0     0        0     0     0\n10    SSN        0      0         0           0     0        0     0     0\n11    JFP        0      0         0           0     0        0     0     0\n12 Yamato        0      0         0           0     0        0     0     0\n13 Corona        0      0         0           0     0        0     0     0\n   Chugoku Shikoku Kyushu Total\n1        5       3      7    63\n2        2       1      3    24\n3        2       1      4    36\n4        1       0      1    13\n5        1       1      2    26\n6        0       0      1     7\n7        0       0      1     1\n8        0       0      1     6\n9        0       0      0     0\n10       0       0      0     0\n11       0       0      0     0\n12       0       0      0     0\n13       0       0      0     0\n\nParameters:\n  Allocation method: Sainte-Laguë (Webster) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          13          19          22          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          28          11           6          20 \n\n\nPlease click here for the list of various allocation methods provided by {PRcalc} and these abbreviations.\n\nPrinting\nprint() and summary() functions are a method of prcalc object. You can hide a column of “Total” with show_total = FALSE.\n\nprint(obj2, show_total = FALSE) # Hide `Total` column\n\nRaw:\n    Party Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1     LDP   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2     NKP   294371  456287    823930      850667  715450   322535  784976\n3     CDP   682913  991505   1391149     1651562 1293281   773076 1485947\n4     JCP   207189  292830    444115      534493  670340   225551  408606\n5     JIP   215344  258690    617531      863897  858577   361476  694630\n6     DPP    73621  195754    298056      384482  306180   133600  382734\n7     SDP    41248  101442     97963      124447   92995    71185   84220\n8   Reiwa   102086  143265    239592      302675  360387   111281  273208\n9     NHK    42916   52664     87702      111298   92353    43529   98238\n10    SSN    46142       0         0           0       0        0       0\n11    JFP        0       0         0           0   33661        0       0\n12 Yamato        0       0         0           0   16970        0       0\n13 Corona        0       0         0           0    6620        0       0\n     Kinki Chugoku Shikoku  Kyushu\n1  2407699 1352723  664805 2250966\n2  1155683  436220  233407 1040756\n3  1090666  573324  291871 1266801\n4   736156  173117  108021  365658\n5  3180219  286302  173826  540338\n6   303480  113899  122082  279509\n7   100980   52638   30249  221221\n8   292483   94446   52941  243284\n9   111539   36758   21285   98506\n10       0       0       0       0\n11       0       0       0       0\n12       0       0       0       0\n13       0       0       0       0\n\nResult:\n    Party Hokkaido Tohoku Kitakanto Minamikanto Tokyo Hokuriku Tokai Kinki\n1     LDP        3      6         7           8     6        5     8     8\n2     NKP        1      1         3           3     2        1     3     3\n3     CDP        3      4         5           5     4        3     5     3\n4     JCP        0      1         1           1     2        1     1     2\n5     JIP        1      1         2           3     2        1     2    10\n6     DPP        0      0         1           1     0        0     1     1\n7     SDP        0      0         0           0     0        0     0     0\n8   Reiwa        0      0         0           1     1        0     1     1\n9     NHK        0      0         0           0     0        0     0     0\n10    SSN        0      0         0           0     0        0     0     0\n11    JFP        0      0         0           0     0        0     0     0\n12 Yamato        0      0         0           0     0        0     0     0\n13 Corona        0      0         0           0     0        0     0     0\n   Chugoku Shikoku Kyushu\n1        5       3      8\n2        2       1      4\n3        3       1      4\n4        0       0      1\n5        1       1      2\n6        0       0      1\n7        0       0      0\n8        0       0      0\n9        0       0      0\n10       0       0      0\n11       0       0      0\n12       0       0      0\n13       0       0      0\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          13          19          22          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          28          11           6          20 \n\n\nIn some cases, result is too long. You can adjust length of result using head argument. If head = 10, only ten rows are displayed. Default is head = Inf. (entire rows)\n\nprint(obj2, head = 10) # Show only ten rows.\n\nRaw:\n   Party Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1    LDP   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2    NKP   294371  456287    823930      850667  715450   322535  784976\n3    CDP   682913  991505   1391149     1651562 1293281   773076 1485947\n4    JCP   207189  292830    444115      534493  670340   225551  408606\n5    JIP   215344  258690    617531      863897  858577   361476  694630\n6    DPP    73621  195754    298056      384482  306180   133600  382734\n7    SDP    41248  101442     97963      124447   92995    71185   84220\n8  Reiwa   102086  143265    239592      302675  360387   111281  273208\n9    NHK    42916   52664     87702      111298   92353    43529   98238\n10   SSN    46142       0         0           0       0        0       0\n     Kinki Chugoku Shikoku  Kyushu    Total\n1  2407699 1352723  664805 2250966 19914883\n2  1155683  436220  233407 1040756  7114282\n3  1090666  573324  291871 1266801 11492095\n4   736156  173117  108021  365658  4166076\n5  3180219  286302  173826  540338  8050830\n6   303480  113899  122082  279509  2593397\n7   100980   52638   30249  221221  1018588\n8   292483   94446   52941  243284  2215648\n9   111539   36758   21285   98506   796788\n10       0       0       0       0    46142\n\nResult:\n   Party Hokkaido Tohoku Kitakanto Minamikanto Tokyo Hokuriku Tokai Kinki\n1    LDP        3      6         7           8     6        5     8     8\n2    NKP        1      1         3           3     2        1     3     3\n3    CDP        3      4         5           5     4        3     5     3\n4    JCP        0      1         1           1     2        1     1     2\n5    JIP        1      1         2           3     2        1     2    10\n6    DPP        0      0         1           1     0        0     1     1\n7    SDP        0      0         0           0     0        0     0     0\n8  Reiwa        0      0         0           1     1        0     1     1\n9    NHK        0      0         0           0     0        0     0     0\n10   SSN        0      0         0           0     0        0     0     0\n   Chugoku Shikoku Kyushu Total\n1        5       3      8    67\n2        2       1      4    24\n3        3       1      4    40\n4        0       0      1    10\n5        1       1      2    26\n6        0       0      1     5\n7        0       0      0     0\n8        0       0      0     4\n9        0       0      0     0\n10       0       0      0     0\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          13          19          22          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          28          11           6          20 \n\n\nIn default, numbers of votes and seats are displayed. If you switch to proportion using prop = TRUE.\n\nprint(obj2, head = 5, prop = TRUE)\n\nRaw:\n  Party   Hokkaido     Tohoku  Kitakanto Minamikanto     Tokyo   Hokuriku\n1   LDP 0.33602815 0.39513793 0.35191652   0.3494307 0.3102397 0.41826883\n2   NKP 0.11458003 0.11073126 0.13349259   0.1147332 0.1109759 0.09187427\n3   CDP 0.26581489 0.24061742 0.22539303   0.2227534 0.2006052 0.22021111\n4   JCP 0.08064559 0.07106369 0.07195522   0.0720894 0.1039787 0.06424832\n5   JIP 0.08381981 0.06277863 0.10005196   0.1165175 0.1331768 0.10296663\n       Tokai      Kinki    Chugoku    Shikoku     Kyushu      Total\n1 0.37391371 0.25671430 0.43364470 0.39141012 0.35689743 0.34655083\n2 0.11666607 0.12322153 0.13983978 0.13742054 0.16501499 0.12379989\n3 0.22084701 0.11628927 0.18379145 0.17184176 0.20085511 0.19998084\n4 0.06072855 0.07849061 0.05549641 0.06359837 0.05797618 0.07249639\n5 0.10323851 0.33908212 0.09178032 0.10234167 0.08567221 0.14009732\n\nResult:\n  Party Hokkaido     Tohoku  Kitakanto Minamikanto     Tokyo   Hokuriku\n1   LDP    0.375 0.46153846 0.36842105  0.36363636 0.3529412 0.45454545\n2   NKP    0.125 0.07692308 0.15789474  0.13636364 0.1176471 0.09090909\n3   CDP    0.375 0.30769231 0.26315789  0.22727273 0.2352941 0.27272727\n4   JCP    0.000 0.07692308 0.05263158  0.04545455 0.1176471 0.09090909\n5   JIP    0.125 0.07692308 0.10526316  0.13636364 0.1176471 0.09090909\n       Tokai      Kinki    Chugoku   Shikoku Kyushu      Total\n1 0.38095238 0.28571429 0.45454545 0.5000000   0.40 0.38068182\n2 0.14285714 0.10714286 0.18181818 0.1666667   0.20 0.13636364\n3 0.23809524 0.10714286 0.27272727 0.1666667   0.20 0.22727273\n4 0.04761905 0.07142857 0.00000000 0.0000000   0.05 0.05681818\n5 0.09523810 0.35714286 0.09090909 0.1666667   0.10 0.14772727\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          13          19          22          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          28          11           6          20 \n\n\nIf use_gt = TRUE, a result rendered using {gt} package. Furthermore, the digits argument allows specifying the number of decimal places for the output. Default is digits = 3. In {gt} mode, district magnitudes are not displayed.\n\nprint(obj2, prop = TRUE, use_gt = TRUE, digits = 3)\n\n\n\n\n\n\n\n\nParty\nHokkaido\nTohoku\nKitakanto\nMinamikanto\nTokyo\nHokuriku\nTokai\nKinki\nChugoku\nShikoku\nKyushu\nTotal\n\n\n\n\nRaw\n\n\nLDP\n0.336\n0.395\n0.352\n0.349\n0.310\n0.418\n0.374\n0.257\n0.434\n0.391\n0.357\n0.347\n\n\nNKP\n0.115\n0.111\n0.133\n0.115\n0.111\n0.092\n0.117\n0.123\n0.140\n0.137\n0.165\n0.124\n\n\nCDP\n0.266\n0.241\n0.225\n0.223\n0.201\n0.220\n0.221\n0.116\n0.184\n0.172\n0.201\n0.200\n\n\nJCP\n0.081\n0.071\n0.072\n0.072\n0.104\n0.064\n0.061\n0.078\n0.055\n0.064\n0.058\n0.072\n\n\nJIP\n0.084\n0.063\n0.100\n0.117\n0.133\n0.103\n0.103\n0.339\n0.092\n0.102\n0.086\n0.140\n\n\nDPP\n0.029\n0.048\n0.048\n0.052\n0.047\n0.038\n0.057\n0.032\n0.037\n0.072\n0.044\n0.045\n\n\nSDP\n0.016\n0.025\n0.016\n0.017\n0.014\n0.020\n0.013\n0.011\n0.017\n0.018\n0.035\n0.018\n\n\nReiwa\n0.040\n0.035\n0.039\n0.041\n0.056\n0.032\n0.041\n0.031\n0.030\n0.031\n0.039\n0.039\n\n\nNHK\n0.017\n0.013\n0.014\n0.015\n0.014\n0.012\n0.015\n0.012\n0.012\n0.013\n0.016\n0.014\n\n\nSSN\n0.018\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.001\n\n\nJFP\n0.000\n0.000\n0.000\n0.000\n0.005\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.001\n\n\nYamato\n0.000\n0.000\n0.000\n0.000\n0.003\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nCorona\n0.000\n0.000\n0.000\n0.000\n0.001\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nDistribution\n\n\nLDP\n0.375\n0.462\n0.368\n0.364\n0.353\n0.455\n0.381\n0.286\n0.455\n0.500\n0.400\n0.381\n\n\nNKP\n0.125\n0.077\n0.158\n0.136\n0.118\n0.091\n0.143\n0.107\n0.182\n0.167\n0.200\n0.136\n\n\nCDP\n0.375\n0.308\n0.263\n0.227\n0.235\n0.273\n0.238\n0.107\n0.273\n0.167\n0.200\n0.227\n\n\nJCP\n0.000\n0.077\n0.053\n0.045\n0.118\n0.091\n0.048\n0.071\n0.000\n0.000\n0.050\n0.057\n\n\nJIP\n0.125\n0.077\n0.105\n0.136\n0.118\n0.091\n0.095\n0.357\n0.091\n0.167\n0.100\n0.148\n\n\nDPP\n0.000\n0.000\n0.053\n0.045\n0.000\n0.000\n0.048\n0.036\n0.000\n0.000\n0.050\n0.028\n\n\nSDP\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nReiwa\n0.000\n0.000\n0.000\n0.045\n0.059\n0.000\n0.048\n0.036\n0.000\n0.000\n0.000\n0.023\n\n\nNHK\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nSSN\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nJFP\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nYamato\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\nCorona\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n0.000\n\n\n\nAllocation method: D'Hondt (Jefferson) method\n\n\nExtra parameter:\n\n\nThreshold: 0\n\n\n\n\n\n\n\n\n\nsummary() function is a useful when number of blocks is large. summary() function displays only the total column.\n\nsummary(obj2) # summarize\n\n    Party      Raw Dist\n1     LDP 19914883   67\n2     NKP  7114282   24\n3     CDP 11492095   40\n4     JCP  4166076   10\n5     JIP  8050830   26\n6     DPP  2593397    5\n7     SDP  1018588    0\n8   Reiwa  2215648    4\n9     NHK   796788    0\n10    SSN    46142    0\n11    JFP    33661    0\n12 Yamato    16970    0\n13 Corona     6620    0\n\n\nprop argument is also allowed in summary() function.\n\nsummary(obj2, prop = TRUE) # summarize with proportion\n\n    Party      Raw   Dist\n1     LDP 0.346551 0.3807\n2     NKP 0.123800 0.1364\n3     CDP 0.199981 0.2273\n4     JCP 0.072496 0.0568\n5     JIP 0.140097 0.1477\n6     DPP 0.045129 0.0284\n7     SDP 0.017725 0.0000\n8   Reiwa 0.038556 0.0227\n9     NHK 0.013865 0.0000\n10    SSN 0.000803 0.0000\n11    JFP 0.000586 0.0000\n12 Yamato 0.000295 0.0000\n13 Corona 0.000115 0.0000\n\n\n\n\nVisualization\n{PRcalc} provides plot() method for prcalc object.\n\nplot(obj1)\n\n\n\n\n\n\n\n\nIf the number of blocks is two or more, each block is divided into facets.\n\nplot(obj2)\n\n\n\n\n\n\n\n\nThe angle argument allows rotation of the x-axis scale label; the value of angle must be between 0 and 90.\n\nplot(obj2, angle = 90)\n\n\n\n\n\n\n\n\nOnly some parties can be displayed with the subset_p argument.\n\n# Output only some parties\nplot(obj2, \n     subset_p = c(\"LDP\", \"NKP\", \"CDP\", \"JIP\", \"JCP\", \"DPP\"))\n\n\n\n\n\n\n\n\nIt is also possible to display only some blocks by using the subset_b argument.\n\n# Output only some district\nplot(obj2, \n     subset_p = c(\"LDP\", \"NKP\", \"CDP\", \"JIP\", \"JCP\", \"DPP\"),\n     subset_b = c(\"Tokyo\", \"Kinki\")) \n\n\n\n\n\n\n\n\nIf by = \"party\", the facet is divided based on party. Default is by = \"block\".\n\n# Divide the facet by parties\nplot(obj2, \n     subset_p = c(\"LDP\", \"NKP\", \"CDP\", \"JIP\", \"JCP\", \"DPP\"),\n     subset_b = c(\"Tokyo\", \"Kinki\"),\n     by        = \"party\")\n\n\n\n\n\n\n\n\nThe number of facet columns can be adjusted with facet_col.\n\n# Three columns\nplot(obj2, \n     subset_p = c(\"LDP\", \"NKP\", \"CDP\", \"JIP\", \"JCP\", \"DPP\"),\n     subset_b = c(\"Tokyo\", \"Kinki\"),\n     by        = \"party\",\n     facet_col = 3)\n\n\n\n\n\n\n\n\nBy default, all facets share the same y-axis scale. If you want to use a different scale, set free_y to TRUE.\n\n# Use different y-axis scales for each facet\nplot(obj2, \n     subset_p = c(\"LDP\", \"NKP\", \"CDP\", \"JIP\", \"JCP\", \"DPP\"),\n     subset_b  = c(\"Tokyo\", \"Kinki\"),\n     by        = \"party\",\n     facet_col = 3,\n     free_y    = TRUE)"
  },
  {
    "objectID": "tutorials/calculation.html#comparison",
    "href": "tutorials/calculation.html#comparison",
    "title": "Seat allocation",
    "section": "Comparison",
    "text": "Comparison\nYou can compare multiple prcalc ojbects using compare() function. prcalc objects must be grouped in a list structure using list() function.\n\ncompare(list(obj2, obj3, obj4))\n\n    Party Model1 Model2 Model3\n1     LDP     67     62     63\n2     NKP     24     23     24\n3     CDP     40     36     36\n4     JCP     10     13     13\n5     JIP     26     26     26\n6     DPP      5      8      7\n7     SDP      0      1      1\n8   Reiwa      4      7      6\n9     NHK      0      0      0\n10    SSN      0      0      0\n11    JFP      0      0      0\n12 Yamato      0      0      0\n13 Corona      0      0      0\n\n\nA named list structure is also available.\n\nlist(\"Jefferson\"     = obj2, \n     \"Hare-Niemeyer\" = obj3, \n     \"Webster\"       = obj4) |&gt; \n  compare() \n\n    Party Jefferson Hare-Niemeyer Webster\n1     LDP        67            62      63\n2     NKP        24            23      24\n3     CDP        40            36      36\n4     JCP        10            13      13\n5     JIP        26            26      26\n6     DPP         5             8       7\n7     SDP         0             1       1\n8   Reiwa         4             7       6\n9     NHK         0             0       0\n10    SSN         0             0       0\n11    JFP         0             0       0\n12 Yamato         0             0       0\n13 Corona         0             0       0\n\n\nBy using print() function with subset parameter, you can extract subset of the parties.\n\nlist(\"Jefferson\"     = obj2, \n     \"Hare-Niemeyer\" = obj3, \n     \"Webster\"       = obj4) |&gt; \n  compare() |&gt; \n  print(subset = c(\"LDP\", \"NKP\", \"CDP\", \"JIP\", \"JCP\", \"DPP\"))\n\n  Party Jefferson Hare-Niemeyer Webster\n1   LDP        67            62      63\n2   NKP        24            23      24\n3   CDP        40            36      36\n4   JCP        10            13      13\n5   JIP        26            26      26\n6   DPP         5             8       7\n\n\nIf prop = TRUE, the proportion is displayed. It is also available to output tables in HTML format using use_gt = TRUE.\n\nlist(\"Jefferson\"     = obj2, \n     \"Hare-Niemeyer\" = obj3, \n     \"Webster\"       = obj4) |&gt; \n  compare() |&gt; \n  print(prop = TRUE, use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nJefferson\nHare-Niemeyer\nWebster\n\n\n\n\nLDP\n0.381\n0.352\n0.358\n\n\nNKP\n0.136\n0.131\n0.136\n\n\nCDP\n0.227\n0.205\n0.205\n\n\nJCP\n0.057\n0.074\n0.074\n\n\nJIP\n0.148\n0.148\n0.148\n\n\nDPP\n0.028\n0.045\n0.040\n\n\nSDP\n0.000\n0.006\n0.006\n\n\nReiwa\n0.023\n0.040\n0.034\n\n\nNHK\n0.000\n0.000\n0.000\n\n\nSSN\n0.000\n0.000\n0.000\n\n\nJFP\n0.000\n0.000\n0.000\n\n\nYamato\n0.000\n0.000\n0.000\n\n\nCorona\n0.000\n0.000\n0.000\n\n\n\n\n\n\n\n\n\nVisualization\nplot() function is a method of prcalc_compare class. Its return value is ggplot object.\n\nlist(\"Jefferson\"     = obj2, \n     \"Hare-Niemeyer\" = obj3, \n     \"Webster\"       = obj4) |&gt; \n  compare() |&gt; \n  plot()\n\n\n\n\n\n\n\n\nIf facet = TRUE, the plot is separated by parties.\n\nlist(\"Jefferson\"     = obj2, \n     \"Hare-Niemeyer\" = obj3, \n     \"Webster\"       = obj4) |&gt; \n  compare() |&gt; \n  plot(facet = TRUE)\n\n\n\n\n\n\n\n\nIf facet = TRUE, you can adjust number of columns and y-axis scale using facet_col and free_y parameters, respectively.\n\nlist(\"Jefferson\"     = obj2, \n     \"Hare-Niemeyer\" = obj3, \n     \"Webster\"       = obj4) |&gt; \n  compare() |&gt; \n  plot(subset_p = c(\"LDP\", \"NKP\", \"CDP\", \"JCP\", \"JIP\", \n                    \"DPP\", \"SDP\", \"Reiwa\"),\n       facet = TRUE, facet_col = 2, free_y = FALSE)"
  },
  {
    "objectID": "tutorials/calculation.html#customized-allocation-methods",
    "href": "tutorials/calculation.html#customized-allocation-methods",
    "title": "Seat allocation",
    "section": "Customized allocation methods",
    "text": "Customized allocation methods\nAlthough {PRcalc} offers various allocation methods, it may not enough for your needs. In this case you can use fully customizable divisor (\"cd\"), quota (\"cq\"), and \\(\\alpha\\)-divergence (\"ad\").\n\nCustom divisor\nFor highest averages methods, the number of votes received by each party is divided by the denominator of the determined rule, \\(r(k)\\). For example, \\(k+1\\)th divisor of D’Hondt (Jefferson) method is \\(r(k) = k + 1\\), such as \\(1, 2, 3, \\dots\\). In this case, we can use method = \"dt\" and we can reproduce this with custom divisors, method = \"cd\".\nThe divisor is specified by the extra argument. Since the magnitude is 47 (m = 47), division is performed at most 47 times. Therefore, the length of extra must also be 47 or more. In this case, extra = 1:47.\n\ncustom1 &lt;- prcalc(kr_lower_2016_en, m = 47, method = \"dt\", threshold = 0.03)\ncustom2 &lt;- prcalc(kr_lower_2016_en, m = 47, method = \"cd\", threshold = 0.03,\n                  extra = 1:47)\n\nlist(\"D'Hondt\" = custom1, \"Custom divisor\" = custom2) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nD'Hondt\nCustom divisor\n\n\n\n\nLKP\n17\n17\n\n\nDPK\n13\n13\n\n\nPP\n14\n14\n\n\nJP\n3\n3\n\n\nCLP\n0\n0\n\n\nMP\n0\n0\n\n\nGPK\n0\n0\n\n\nPUP\n0\n0\n\n\nCDP\n0\n0\n\n\n\n\n\n\n\n\nLet’s try a super weird divisor here. It shows the same divisor three times repeatedly before going to the next number. That is, the divisor is c(1, 1, 1, 1, 2, 2, 2, 3, 3, 3, ... , 16, 16, 16), a vector of length 48.\n\ncustom3 &lt;- prcalc(kr_lower_2016_en, m = 47, method = \"cd\", threshold = 0.03,\n                  extra = rep(1:16, each = 3))\n\nlist(\"D'Hondt\" = custom1, \"Weird divisor\" = custom3) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nD'Hondt\nWeird divisor\n\n\n\n\nLKP\n17\n18\n\n\nDPK\n13\n12\n\n\nPP\n14\n14\n\n\nJP\n3\n3\n\n\nCLP\n0\n0\n\n\nMP\n0\n0\n\n\nGPK\n0\n0\n\n\nPUP\n0\n0\n\n\nCDP\n0\n0\n\n\n\n\n\n\n\n\nIf the number of blocks is greater than or equal to 2, the length of extra must be greater than or equal to the maximum value of vector m. For example, if the number of block is 3 and m = c(3, 7, 6), then the length of extra must be greater than or equal to 7.\n\n\nCustom quota\nFor largest reminder methods, the first step is to compute quota. For Hare-Niemeyer method, quota is \\(\\frac{v}{m}\\), which \\(v\\) is total votes and \\(m\\) is total seats. In 2016 Korean general election (kr_lower_2016_en), the total number of votes cast was 23400107 and the district magnitude was 47. Thus, Hare-Niemeyer quota is \\(\\frac{23400107}{47} \\simeq 497874.6\\). This custom quota must be specified with an extra argument.\n\ncustom4 &lt;- prcalc(kr_lower_2016_en, m = 47, method = \"hn\")\ncustom5 &lt;- prcalc(kr_lower_2016_en, m = 47, method = \"cq\", extra = 497874.6)\n\nlist(\"Hare\" = custom4, \"Custom quota\" = custom5) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nHare\nCustom quota\n\n\n\n\nLKP\n16\n16\n\n\nDPK\n12\n12\n\n\nPP\n13\n13\n\n\nJP\n4\n4\n\n\nCLP\n1\n1\n\n\nMP\n1\n1\n\n\nGPK\n0\n0\n\n\nPUP\n0\n0\n\n\nCDP\n0\n0\n\n\n\n\n\n\n\n\nThe length of extra must be 1 or equal to the number of blocks; if the length of extra is 1, the same quota is applied to all blocks.\n\ncustom6 &lt;- prcalc(jp_lower_2021_en, \n                  m      = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n                  method = \"hare\")\n\ncustom7 &lt;- prcalc(jp_lower_2021_en, \n                  m      = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n                  method = \"cq\",\n                  extra  = colSums(jp_lower_2021_en[, -1]) / \n                    c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20))\n\nlist(\"Hare\" = custom6, \"Custom quota\" = custom7) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nHare\nCustom quota\n\n\n\n\nLDP\n62\n62\n\n\nNKP\n23\n23\n\n\nCDP\n36\n36\n\n\nJCP\n13\n13\n\n\nJIP\n26\n26\n\n\nDPP\n8\n8\n\n\nSDP\n1\n1\n\n\nReiwa\n7\n7\n\n\nNHK\n0\n0\n\n\nSSN\n0\n0\n\n\nJFP\n0\n0\n\n\nYamato\n0\n0\n\n\nCorona\n0\n0\n\n\n\n\n\n\n\n\n\n\n\\(\\alpha\\)-divergence\n\\(\\alpha\\)-divergence (method = \"ad\") is a highly flexible (not fully customizable) highest averages method. A divisor (\\(r(k)\\)) is calculated as follow:\n\\[\nr(k) = \\begin{cases}\n\\frac{1}{e} \\frac{(k + 1)^{k + 1}}{k^k}& \\mbox{if}\\quad\\alpha = 1,\\\\\n\\frac{1}{\\log{\\frac{k + 1}{k}}} & \\mbox{if}\\quad\\alpha = 0,\\\\\n\\Bigl(\\frac{(k + 1)^\\alpha - k^\\alpha}{\\alpha}\\Bigr)^{\\frac{1}{\\alpha - 1}} & \\mbox{otherwise.}\\\\\n\\end{cases}\n\\]\nFor example, if \\(\\alpha = 2\\), the divisor of \\(\\alpha\\)-divergence is known to coincide with that of Sainte-Laguë (Webster). \\(\\alpha\\) must be specified with an extra argument.\n\n# Jefferson vs alpha = 10\nlist(prcalc(kr_lower_2016_en, m = 47, threshold = 0.03, \n            method = \"sl\"),\n     prcalc(kr_lower_2016_en, m = 47, threshold = 0.03, \n            method = \"ad\", extra = 2)) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nModel1\nModel2\n\n\n\n\nLKP\n17\n17\n\n\nDPK\n13\n13\n\n\nPP\n13\n13\n\n\nJP\n4\n4\n\n\nCLP\n0\n0\n\n\nMP\n0\n0\n\n\nGPK\n0\n0\n\n\nPUP\n0\n0\n\n\nCDP\n0\n0"
  },
  {
    "objectID": "tutorials/decomposition.html",
    "href": "tutorials/decomposition.html",
    "title": "Decomposition",
    "section": "",
    "text": "library(PRcalc)\nlibrary(tidyverse)"
  },
  {
    "objectID": "tutorials/decomposition.html#preparation",
    "href": "tutorials/decomposition.html#preparation",
    "title": "Decomposition",
    "section": "",
    "text": "library(PRcalc)\nlibrary(tidyverse)"
  },
  {
    "objectID": "tutorials/decomposition.html#two-step-decomposition",
    "href": "tutorials/decomposition.html#two-step-decomposition",
    "title": "Decomposition",
    "section": "Two-step decomposition",
    "text": "Two-step decomposition\n\\(\\alpha\\)-divergence (\\(D^\\alpha\\)) can be decomposed in two components—apportionment and districting as follow:\n\\[\n\\begin{align}\nD^{\\alpha} = & \\sum_{j = 1}^{k} v_j \\frac{1}{\\alpha (\\alpha - 1)} \\log{\\frac{s_j}{v_j}} + \\\\\n& \\sum_{j=1}^{k} (s_j)^\\alpha (v_j)^{1 - \\alpha} \\sum_{i=1}^{k_j} v_{ji} \\frac{1}{\\alpha (\\alpha - 1)} \\Biggl[\\biggl(\\frac{s_{ji}}{v_{ji}}\\biggr)^{\\alpha} - 1 \\Biggr]\\\\\\\n= & D^{\\alpha}_{\\mbox{apportionment}} + \\sum_{j=1}^k W^{\\alpha}_j D^{\\alpha}_{\\mbox{districting}_j}.\n\\end{align}\n\\]\nHowever there are two special cases, \\(\\alpha \\rightarrow 0\\) and \\(\\alpha \\rightarrow 1\\).\n\\[\n\\begin{align}\nD^0 = & \\sum_{j = 1}^{k} v_j \\log{\\frac{v_j}{s_j}} + \\sum_{j=1}^{k} v_j \\sum_{i=1}^{k_j} v_{ji} \\log{\\frac{v_{ji}}{s_{ji}}} \\\\\n= & D^0_{\\mbox{apportionment}} + \\sum_{j=1}^k W^0_j D^0_{\\mbox{districting}_j}.\n\\end{align}\n\\]\n\\[\n\\begin{align}\nD^1 = & \\sum_{j = 1}^{k} s_j \\log{\\frac{s_j}{v_j}} + \\sum_{j=1}^{k} s_j \\sum_{i=1}^{k_j} s_{ji} \\log{\\frac{s_{ji}}{v_{ji}}} \\\\\n= & D^1_{\\mbox{apportionment}} + \\sum_{j=1}^k W^1_j D^1_{\\mbox{districting}_j}.\n\\end{align}\n\\]\n\nUsing a prcalc object.\n\ndata(\"jp_lower_2021_en\")\n\nobj1 &lt;- prcalc(jp_lower_2021_en,\n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20),\n               method = \"dt\")\n\nobj2 &lt;- prcalc(jp_lower_2021_en,\n               m = c(8, 13, 19, 23, 19, 11, 20, 29, 10, 5, 19),\n               method = \"dt\")\n\nobj3 &lt;- prcalc(jp_lower_2021_en,\n               m = c(8, 13, 19, 23, 19, 11, 20, 29, 10, 5, 19),\n               method = \"msl\")\n\ndecompose(obj1)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n     0.054938814      0.002314718      0.052624096 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ndecompose(obj2)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n    0.0479196362     0.0003013664     0.0476182698 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ndecompose(obj3)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n    0.0397194583     0.0003013664     0.0394180919 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\n\nDifferent \\(\\alpha\\) also available. Default is 2.\n\ndecompose(obj1, alpha = 0.5)\n\nalpha = 0.5 \nalpha-divergence  Reapportionment    Redistricting \n      0.16624217       0.00232946       0.16391271 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ndecompose(obj1, alpha = 1)\n\nalpha = 1 \nalpha-divergence  Reapportionment    Redistricting \n     0.091292423      0.002322713      0.088969710 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ndecompose(obj1, alpha = 1.5)\n\nalpha = 1.5 \nalpha-divergence  Reapportionment    Redistricting \n     0.066772353      0.002317803      0.064454550 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ndecompose(obj1, alpha = 2)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n     0.054938814      0.002314718      0.052624096 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ndecompose(obj1, alpha = 3)\n\nalpha = 3 \nalpha-divergence  Reapportionment    Redistricting \n     0.044218023      0.002314004      0.041904020 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\n\n\n\nImport prcalc object and decomposition.\n\nFrom .csv format\nSample dataset can be downloaded from here.\n\nobj4 &lt;- read_prcalc(\"../data/sample_dataset.csv\",\n                    l1   = \"region\",\n                    l2   = \"district\",\n                    p    = \"electorates\",\n                    q    = \"magnitude\",\n                    type = \"district\")\n\nprint(obj4, head = 10)\n\nNULL\n\ndecompose(obj4, alpha = 2)\n\nError in UseMethod(\"decompose\"): no applicable method for 'decompose' applied to an object of class \"NULL\"\n\ndecompose(obj4, alpha = 0)\n\nError in UseMethod(\"decompose\"): no applicable method for 'decompose' applied to an object of class \"NULL\"\n\n\n\n\nFrom data.frame\n\ndata(au_district_2010)\n\nhead(au_district_2010)\n\n                        region  district electorates magnitude\n1 Australian Capital Territory  CANBERRA      124294         1\n2 Australian Capital Territory    FRASER      123647         1\n3              New South Wales     BANKS       98742         1\n4              New South Wales    BARTON       95231         1\n5              New South Wales BENNELONG       98915         1\n6              New South Wales   BEROWRA       95124         1\n\n# If all mangnitudes are 1, \"magnitude\" can be omitted.\nobj5 &lt;- as_prcalc(au_district_2010,\n                  l1   = \"region\",\n                  l2   = \"district\",\n                  p    = \"electorates\",\n                  type = \"district\")\n\nprint(obj5, head = 10)\n\nRaw:\n   Level2 Australian Capital Territory New South Wales Northern Territory\n1       1                       124294           98742              61168\n2       2                       123647           95231              59891\n3       3                            0           98915                  0\n4       4                            0           95124                  0\n5       5                            0           95362                  0\n6       6                            0           97255                  0\n7       7                            0           98463                  0\n8       8                            0           94474                  0\n9       9                            0           97605                  0\n10     10                            0          100733                  0\n   Queensland South Australia Tasmania Victoria Western Australia  Total\n1       83045           98519    71686    93447             88186 719087\n2       92661          104845    71576    97756             90079 735686\n3       91856           97860    71350    89131             89536 538648\n4       92197           99775    71122   100610             90430 549258\n5       91961          100216    72875    88124             85811 534349\n6       94533          102281        0   101342             89649 485060\n7       90130           96233        0    92317             93378 470521\n8       85225          101510        0    86220             93930 461359\n9       89726          104280        0   101512             92340 485463\n10      83724           99023        0    91924             92902 468306\n\nResult:\n   Level2 Australian Capital Territory New South Wales Northern Territory\n1       1                            1               1                  1\n2       2                            1               1                  1\n3       3                            0               1                  0\n4       4                            0               1                  0\n5       5                            0               1                  0\n6       6                            0               1                  0\n7       7                            0               1                  0\n8       8                            0               1                  0\n9       9                            0               1                  0\n10     10                            0               1                  0\n   Queensland South Australia Tasmania Victoria Western Australia Total\n1           1               1        1        1                 1     8\n2           1               1        1        1                 1     8\n3           1               1        1        1                 1     6\n4           1               1        1        1                 1     6\n5           1               1        1        1                 1     6\n6           1               1        0        1                 1     5\n7           1               1        0        1                 1     5\n8           1               1        0        1                 1     5\n9           1               1        0        1                 1     5\n10          1               1        0        1                 1     5\n\nParameters:\n  Allocation method: \n  Extra parameter: \n  Threshold: \n\nMagnitude: \nAustralian Capital Territory              New South Wales \n                           2                           48 \n          Northern Territory                   Queensland \n                           2                           30 \n             South Australia                     Tasmania \n                          11                            5 \n                    Victoria            Western Australia \n                          37                           15 \n\ndecompose(obj5, alpha = 2)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n     0.004661456      0.003545961      0.001115495 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ndecompose(obj5, alpha = 0)\n\nalpha = 0 \nalpha-divergence  Reapportionment    Redistricting \n     0.004280586      0.003107794      0.001172792 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\n\n\ndata(jp_lower_2021_result)\n\nhead(jp_lower_2021_result)\n\n# A tibble: 6 × 4\n  Party Pref          Votes Seats\n  &lt;chr&gt; &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;\n1 Jimin Hokkaido     863300     3\n2 Jimin Tohoku      1628233     6\n3 Jimin Kitakanto   2172065     7\n4 Jimin Minamikanto 2590787     7\n5 Jimin Tokyo       2000084     5\n6 Jimin Hokuriku    1468380     5\n\nobj6 &lt;- as_prcalc(jp_lower_2021_result,\n                  l1   = \"Pref\",\n                  l2   = \"Party\",\n                  p    = \"Votes\",\n                  q    = \"Seats\",\n                  type = \"party\")\n\nprint(obj6, head = 10)\n\nRaw:\n     Level2 Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1     Jimin   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2     Komei   294371  456287    823930      850667  715450   322535  784976\n3    Rikken   682913  991505   1391149     1651562 1293281   773076 1485947\n4    Kyosan   207189  292830    444115      534493  670340   225551  408606\n5     Ishin   215344  258690    617531      863897  858577   361476  694630\n6   Kokumin    73621  195754    298056      384482  306180   133600  382734\n7    Shamin    41248  101442     97963      124447   92995    71185   84220\n8     Reiwa   102086  143265    239592      302675  360387   111281  273208\n9       NHK    42916   52664     87702      111298   92353    43529   98238\n10 Sijinasi    46142       0         0           0       0        0       0\n     Kinki Chugoku Shikoku  Kyushu    Total\n1  2407699 1352723  664805 2250966 19914883\n2  1155683  436220  233407 1040756  7114282\n3  1090666  573324  291871 1266801 11492095\n4   736156  173117  108021  365658  4166076\n5  3180219  286302  173826  540338  8050830\n6   303480  113899  122082  279509  2593397\n7   100980   52638   30249  221221  1018588\n8   292483   94446   52941  243284  2215648\n9   111539   36758   21285   98506   796788\n10       0       0       0       0    46142\n\nResult:\n     Level2 Hokkaido Tohoku Kitakanto Minamikanto Tokyo Hokuriku Tokai Kinki\n1     Jimin        3      6         7           7     5        5     8     8\n2     Komei        1      2         3           2     2        1     3     4\n3    Rikken        2      3         5           5     4        3     5     4\n4    Kyosan        1      1         1           2     2        1     1     2\n5     Ishin        1      1         2           3     2        1     2    10\n6   Kokumin        0      1         1           1     1        0     1     1\n7    Shamin        0      0         0           0     0        0     0     0\n8     Reiwa        0      0         1           1     1        0     1     1\n9       NHK        0      0         0           0     0        0     0     0\n10 Sijinasi        0      0         0           0     0        0     0     0\n   Chugoku Shikoku Kyushu Total\n1        5       2      8    64\n2        2       1      3    24\n3        2       1      4    38\n4        1       0      1    13\n5        1       1      2    26\n6        0       1      1     8\n7        0       0      1     1\n8        0       0      1     6\n9        0       0      0     0\n10       0       0      0     0\n\nParameters:\n  Allocation method: \n  Extra parameter: \n  Threshold: \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          14          20          21          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          30          11           6          21 \n\ndecompose(obj6, alpha = 2)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n      0.03952282       0.00324211       0.03628070 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ndecompose(obj6, alpha = 0)\n\nalpha = 0 \nalpha-divergence  Reapportionment    Redistricting \n    -0.032764790      0.003374801     -0.036139591 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "tutorials/decomposition.html#three-step-decomposition",
    "href": "tutorials/decomposition.html#three-step-decomposition",
    "title": "Decomposition",
    "section": "Three-step Decomposition",
    "text": "Three-step Decomposition\nIf special is defined, three-step decomposition is conducted.\n\ndata(\"nz_district\")\n\nnz_1949 &lt;- nz_district |&gt;\n  dplyr::filter(year == 1949) |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")\n\nnz_1972 &lt;- nz_district |&gt;\n  dplyr::filter(year == 1972) |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")\n\nnz_1990 &lt;- nz_district |&gt;\n  dplyr::filter(year == 1990) |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")\n\nnz_2011 &lt;- nz_district |&gt;\n  dplyr::filter(year == 2011) |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")\n\n(decompose_1949 &lt;- decompose(nz_1949, alpha = 1, special = \"Maori\"))\n\nalpha = 1 \nalpha-divergence          Special  Reapportionment    Redistricting \n    2.388943e-02     5.493500e-03     3.683160e-06     1.839225e-02 \n\nNote: \"alha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms.\n\n(decompose_1972 &lt;- decompose(nz_1972, alpha = 1, special = \"Maori\"))\n\nalpha = 1 \nalpha-divergence          Special  Reapportionment    Redistricting \n    4.543015e-03     1.620294e-03     1.096213e-05     2.911759e-03 \n\nNote: \"alha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms.\n\n(decompose_1990 &lt;- decompose(nz_1990, alpha = 1, special = \"Maori\"))\n\nalpha = 1 \nalpha-divergence          Special  Reapportionment    Redistricting \n    0.0035789785     0.0001675832     0.0001717215     0.0032396739 \n\nNote: \"alha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms.\n\n(decompose_2011 &lt;- decompose(nz_2011, alpha = 1, special = \"Maori\"))\n\nalpha = 1 \nalpha-divergence          Special  Reapportionment    Redistricting \n    1.813581e-03     1.313421e-03     2.012103e-06     4.981483e-04 \n\nNote: \"alha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms.\n\nlist(\"1949\" = decompose_1949,\n     \"1972\" = decompose_1972,\n     \"1990\" = decompose_1990,\n     \"2011\" = decompose_2011) |&gt; \n  compare() \n\n              Type     1949     1972     1990     2011\n1 Alpha-divergence 2.39e-02 0.004543 0.003579 1.81e-03\n2          Special 5.49e-03 0.001620 0.000168 1.31e-03\n3  Reapportionment 3.68e-06 0.000011 0.000172 2.01e-06\n4    Redistricting 1.84e-02 0.002912 0.003240 4.98e-04\nNote: \"alpha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms.\n\nlist(\"1949\" = decompose_1949,\n     \"1972\" = decompose_1972,\n     \"1990\" = decompose_1990,\n     \"2011\" = decompose_2011) |&gt; \n  compare() |&gt; \n  plot() +\n  labs(title = \"Electoral districts in New Zealand\",\n       caption = expression(paste(\"Three-step decomposition with \", alpha, \" = 1\")))\n\n\n\n\n\n\n\n\n\n# 1949-2011\nnz_decompose_all &lt;- nz_district |&gt; \n  group_by(year) |&gt; \n  nest() |&gt; \n  mutate(data      = map(data, \\(x) as_prcalc(x,\n                                              l1   = \"region\",\n                                              l2   = \"district\",\n                                              p    = \"electorates\",\n                                              q    = \"magnitude\",\n                                              type = \"district\")),\n         decompose = map(data, \\(x) decompose(x, \n                                              alpha      = 0,\n                                              special    = \"Maori\"))) |&gt; \n  pull(decompose)\n\nnames(nz_decompose_all) &lt;- unique(nz_district$year)\n\nnz_decompose_all |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE, digits = 5)\n\n\n\n\n\n\n\n\nType\n1949\n1951\n1954\n1957\n1960\n1963\n1966\n1969\n1972\n1975\n1978\n1981\n1984\n1987\n1990\n1993\n1996\n1999\n2002\n2005\n2008\n2011\n\n\n\n\nAlpha-divergence\n0.01399\n0.01648\n0.00817\n0.00572\n0.00707\n0.00437\n0.00783\n0.00460\n0.00430\n0.00511\n0.00653\n0.00405\n0.00298\n0.00297\n0.00354\n0.00340\n0.00168\n0.00207\n0.00230\n0.00236\n0.00160\n0.00175\n\n\nSpecial\n0.00469\n0.00359\n0.00322\n0.00262\n0.00180\n0.00147\n0.00156\n0.00153\n0.00149\n0.00121\n0.00001\n0.00050\n0.00037\n0.00026\n0.00016\n0.00014\n0.00080\n0.00156\n0.00178\n0.00171\n0.00113\n0.00125\n\n\nReapportionment\n0.00000\n0.00001\n0.00016\n0.00000\n0.00008\n0.00005\n0.00000\n0.00004\n0.00001\n0.00015\n0.00002\n0.00000\n0.00006\n0.00026\n0.00017\n0.00034\n0.00002\n0.00002\n0.00003\n0.00000\n0.00001\n0.00000\n\n\nRedistricting\n0.00930\n0.01288\n0.00480\n0.00310\n0.00519\n0.00285\n0.00627\n0.00303\n0.00281\n0.00375\n0.00650\n0.00355\n0.00255\n0.00245\n0.00320\n0.00291\n0.00086\n0.00049\n0.00049\n0.00065\n0.00046\n0.00050\n\n\n\nNote: \"alpha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms.\n\n\n\n\n\n\n\n\n\n\nnz_decompose_all |&gt; \n  compare() |&gt; \n  plot(value_type = \"total\", value_angle = 90, \n       x_angle = 45, border_width = 0.5, digits = 6, border_color = \"white\") +\n  coord_cartesian(ylim = c(0, 0.025)) +\n  labs(title = \"Electoral districts in New Zealand (1949-2011)\",\n       caption = expression(paste(\"Note: Three-step decomposition with \", alpha, \" = 2\")))\n\n\n\n\n\n\n\n\n\nnz_decompose_all |&gt; \n  compare() |&gt; \n  plot(facet = TRUE, value_size = 2, digits = 5)"
  },
  {
    "objectID": "tutorials/decomposition.html#comparison",
    "href": "tutorials/decomposition.html#comparison",
    "title": "Decomposition",
    "section": "Comparison",
    "text": "Comparison\n\ncompare(list(\"D'Hondt\"                           = decompose(obj1),\n             \"D'Hondt + Modified magnitudes\"     = decompose(obj2),\n             \"Modified-SL + Modified magnitudes\" = decompose(obj3))) \n\n              Type D'Hondt D'Hondt + Modified magnitudes\n1 Alpha-divergence 0.05494                      0.047920\n2  Reapportionment 0.00231                      0.000301\n3    Redistricting 0.05262                      0.047618\n  Modified-SL + Modified magnitudes\n1                          0.039719\n2                          0.000301\n3                          0.039418\nNote: \"alpha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\ncompare(list(\"D'Hondt\"                          = decompose(obj1),\n             \"D'Hondt\\nModified magnitudes\"     = decompose(obj2),\n             \"Modified-SL\\nModified magnitudes\" = decompose(obj3)))  |&gt; \n  plot()\n\n\n\n\n\n\n\ncompare(list(\"D'Hondt\"                           = decompose(obj1),\n             \"D'Hondt + Modified magnitudes\"     = decompose(obj2),\n             \"Modified-SL + Modified magnitudes\" = decompose(obj3))) |&gt;\n  plot(facet = TRUE, value_type = \"text\", digits = 5)"
  },
  {
    "objectID": "tutorials/decomposition.html#comparison-between-index-and-decompose",
    "href": "tutorials/decomposition.html#comparison-between-index-and-decompose",
    "title": "Decomposition",
    "section": "Comparison between index() and decompose()",
    "text": "Comparison between index() and decompose()\n\ndata(\"jp_upper_2019\")\n\nindex(obj1)[\"ad\"]\n\n        ad \n0.02912491 \n\ndecompose(obj1)[\"d\"]\n\n         d \n0.05493881 \n\n\nIn default (unit = \"l2\"), disproportionality indices are measured based on the marginal distribution of level 2 (in this case, party).\n\n\n\n\n\n\n\n\n\nParty\nHokkaido\nTohoku\nKitakanto\nMinamikanto\nTokyo\nHokuriku\nTokai\nKinki\nChugoku\nShikoku\nKyushu\nTotal\n\n\n\n\nLDP\n863300\n1628233\n2172065\n2590787\n2000084\n1468380\n2515841\n2407699\n1352723\n664805\n2250966\n19914883\n\n\nNKP\n294371\n456287\n823930\n850667\n715450\n322535\n784976\n1155683\n436220\n233407\n1040756\n7114282\n\n\nCDP\n682913\n991505\n1391149\n1651562\n1293281\n773076\n1485947\n1090666\n573324\n291871\n1266801\n11492095\n\n\nJCP\n207189\n292830\n444115\n534493\n670340\n225551\n408606\n736156\n173117\n108021\n365658\n4166076\n\n\nJIP\n215344\n258690\n617531\n863897\n858577\n361476\n694630\n3180219\n286302\n173826\n540338\n8050830\n\n\nDPP\n73621\n195754\n298056\n384482\n306180\n133600\n382734\n303480\n113899\n122082\n279509\n2593397\n\n\nSDP\n41248\n101442\n97963\n124447\n92995\n71185\n84220\n100980\n52638\n30249\n221221\n1018588\n\n\nReiwa\n102086\n143265\n239592\n302675\n360387\n111281\n273208\n292483\n94446\n52941\n243284\n2215648\n\n\nNHK\n42916\n52664\n87702\n111298\n92353\n43529\n98238\n111539\n36758\n21285\n98506\n796788\n\n\nSSN\n46142\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n46142\n\n\nJFP\n0\n0\n0\n0\n33661\n0\n0\n0\n0\n0\n0\n33661\n\n\nYamato\n0\n0\n0\n0\n16970\n0\n0\n0\n0\n0\n0\n16970\n\n\nCorona\n0\n0\n0\n0\n6620\n0\n0\n0\n0\n0\n0\n6620\n\n\nTotal\n2569130\n4120670\n6172103\n7414308\n6446898\n3510613\n6728400\n9378905\n3119427\n1698487\n6307039\n57465980\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty\nHokkaido\nTohoku\nKitakanto\nMinamikanto\nTokyo\nHokuriku\nTokai\nKinki\nChugoku\nShikoku\nKyushu\nTotal\n\n\n\n\nLDP\n3\n6\n7\n8\n6\n5\n8\n8\n5\n3\n8\n67\n\n\nNKP\n1\n1\n3\n3\n2\n1\n3\n3\n2\n1\n4\n24\n\n\nCDP\n3\n4\n5\n5\n4\n3\n5\n3\n3\n1\n4\n40\n\n\nJCP\n0\n1\n1\n1\n2\n1\n1\n2\n0\n0\n1\n10\n\n\nJIP\n1\n1\n2\n3\n2\n1\n2\n10\n1\n1\n2\n26\n\n\nDPP\n0\n0\n1\n1\n0\n0\n1\n1\n0\n0\n1\n5\n\n\nSDP\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nReiwa\n0\n0\n0\n1\n1\n0\n1\n1\n0\n0\n0\n4\n\n\nNHK\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nSSN\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nJFP\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nYamato\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nCorona\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nTotal\n8\n13\n19\n22\n17\n11\n21\n28\n11\n6\n20\n176\n\n\n\n\n\n\n\n\nIf unit = \"l1\", disproportionality indices are measured based on marginal distribution of level 1 (in this case, prefecture).\n\n\n\n\n\n\n\n\n\nParty\nHokkaido\nTohoku\nKitakanto\nMinamikanto\nTokyo\nHokuriku\nTokai\nKinki\nChugoku\nShikoku\nKyushu\nTotal\n\n\n\n\nLDP\n863300\n1628233\n2172065\n2590787\n2000084\n1468380\n2515841\n2407699\n1352723\n664805\n2250966\n19914883\n\n\nNKP\n294371\n456287\n823930\n850667\n715450\n322535\n784976\n1155683\n436220\n233407\n1040756\n7114282\n\n\nCDP\n682913\n991505\n1391149\n1651562\n1293281\n773076\n1485947\n1090666\n573324\n291871\n1266801\n11492095\n\n\nJCP\n207189\n292830\n444115\n534493\n670340\n225551\n408606\n736156\n173117\n108021\n365658\n4166076\n\n\nJIP\n215344\n258690\n617531\n863897\n858577\n361476\n694630\n3180219\n286302\n173826\n540338\n8050830\n\n\nDPP\n73621\n195754\n298056\n384482\n306180\n133600\n382734\n303480\n113899\n122082\n279509\n2593397\n\n\nSDP\n41248\n101442\n97963\n124447\n92995\n71185\n84220\n100980\n52638\n30249\n221221\n1018588\n\n\nReiwa\n102086\n143265\n239592\n302675\n360387\n111281\n273208\n292483\n94446\n52941\n243284\n2215648\n\n\nNHK\n42916\n52664\n87702\n111298\n92353\n43529\n98238\n111539\n36758\n21285\n98506\n796788\n\n\nSSN\n46142\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n46142\n\n\nJFP\n0\n0\n0\n0\n33661\n0\n0\n0\n0\n0\n0\n33661\n\n\nYamato\n0\n0\n0\n0\n16970\n0\n0\n0\n0\n0\n0\n16970\n\n\nCorona\n0\n0\n0\n0\n6620\n0\n0\n0\n0\n0\n0\n6620\n\n\nTotal\n2569130\n4120670\n6172103\n7414308\n6446898\n3510613\n6728400\n9378905\n3119427\n1698487\n6307039\n57465980\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty\nHokkaido\nTohoku\nKitakanto\nMinamikanto\nTokyo\nHokuriku\nTokai\nKinki\nChugoku\nShikoku\nKyushu\nTotal\n\n\n\n\nLDP\n3\n6\n7\n8\n6\n5\n8\n8\n5\n3\n8\n67\n\n\nNKP\n1\n1\n3\n3\n2\n1\n3\n3\n2\n1\n4\n24\n\n\nCDP\n3\n4\n5\n5\n4\n3\n5\n3\n3\n1\n4\n40\n\n\nJCP\n0\n1\n1\n1\n2\n1\n1\n2\n0\n0\n1\n10\n\n\nJIP\n1\n1\n2\n3\n2\n1\n2\n10\n1\n1\n2\n26\n\n\nDPP\n0\n0\n1\n1\n0\n0\n1\n1\n0\n0\n1\n5\n\n\nSDP\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nReiwa\n0\n0\n0\n1\n1\n0\n1\n1\n0\n0\n0\n4\n\n\nNHK\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nSSN\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nJFP\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nYamato\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nCorona\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nTotal\n8\n13\n19\n22\n17\n11\n21\n28\n11\n6\n20\n176\n\n\n\n\n\n\n\n\n\nindex(obj1, unit = \"l1\")[\"ad\"]\n\n         ad \n0.002314718 \n\n\nSince \\(\\alpha\\)-divergence in decompose() is measured based on the joint distribution of level 1 and level 2, the unit argument in index() must be \"joint\" due to reproduce the same result as in decompose().\n\n\n\n\n\n\n\n\n\nParty\nHokkaido\nTohoku\nKitakanto\nMinamikanto\nTokyo\nHokuriku\nTokai\nKinki\nChugoku\nShikoku\nKyushu\nTotal\n\n\n\n\nLDP\n863300\n1628233\n2172065\n2590787\n2000084\n1468380\n2515841\n2407699\n1352723\n664805\n2250966\n19914883\n\n\nNKP\n294371\n456287\n823930\n850667\n715450\n322535\n784976\n1155683\n436220\n233407\n1040756\n7114282\n\n\nCDP\n682913\n991505\n1391149\n1651562\n1293281\n773076\n1485947\n1090666\n573324\n291871\n1266801\n11492095\n\n\nJCP\n207189\n292830\n444115\n534493\n670340\n225551\n408606\n736156\n173117\n108021\n365658\n4166076\n\n\nJIP\n215344\n258690\n617531\n863897\n858577\n361476\n694630\n3180219\n286302\n173826\n540338\n8050830\n\n\nDPP\n73621\n195754\n298056\n384482\n306180\n133600\n382734\n303480\n113899\n122082\n279509\n2593397\n\n\nSDP\n41248\n101442\n97963\n124447\n92995\n71185\n84220\n100980\n52638\n30249\n221221\n1018588\n\n\nReiwa\n102086\n143265\n239592\n302675\n360387\n111281\n273208\n292483\n94446\n52941\n243284\n2215648\n\n\nNHK\n42916\n52664\n87702\n111298\n92353\n43529\n98238\n111539\n36758\n21285\n98506\n796788\n\n\nSSN\n46142\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n46142\n\n\nJFP\n0\n0\n0\n0\n33661\n0\n0\n0\n0\n0\n0\n33661\n\n\nYamato\n0\n0\n0\n0\n16970\n0\n0\n0\n0\n0\n0\n16970\n\n\nCorona\n0\n0\n0\n0\n6620\n0\n0\n0\n0\n0\n0\n6620\n\n\nTotal\n2569130\n4120670\n6172103\n7414308\n6446898\n3510613\n6728400\n9378905\n3119427\n1698487\n6307039\n57465980\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty\nHokkaido\nTohoku\nKitakanto\nMinamikanto\nTokyo\nHokuriku\nTokai\nKinki\nChugoku\nShikoku\nKyushu\nTotal\n\n\n\n\nLDP\n3\n6\n7\n8\n6\n5\n8\n8\n5\n3\n8\n67\n\n\nNKP\n1\n1\n3\n3\n2\n1\n3\n3\n2\n1\n4\n24\n\n\nCDP\n3\n4\n5\n5\n4\n3\n5\n3\n3\n1\n4\n40\n\n\nJCP\n0\n1\n1\n1\n2\n1\n1\n2\n0\n0\n1\n10\n\n\nJIP\n1\n1\n2\n3\n2\n1\n2\n10\n1\n1\n2\n26\n\n\nDPP\n0\n0\n1\n1\n0\n0\n1\n1\n0\n0\n1\n5\n\n\nSDP\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nReiwa\n0\n0\n0\n1\n1\n0\n1\n1\n0\n0\n0\n4\n\n\nNHK\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nSSN\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nJFP\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nYamato\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nCorona\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n\n\nTotal\n8\n13\n19\n22\n17\n11\n21\n28\n11\n6\n20\n176\n\n\n\n\n\n\n\n\n\nindex(obj1, unit = \"joint\")[\"ad\"]\n\n        ad \n0.05493881"
  },
  {
    "objectID": "supplement/other_package.html",
    "href": "supplement/other_package.html",
    "title": "Comparison with other packages",
    "section": "",
    "text": "library(tidyverse)\nlibrary(PRcalc)\nlibrary(seatdist)\n\ndp &lt;- disproportionality\n\nobj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\nind1 &lt;- index(obj1)\nv1   &lt;- obj1$raw$Vote\ns1   &lt;- obj1$dist$Vote\n\nobj2 &lt;- prcalc(us_census_2020, m = 435, method = \"hh\")\nind2 &lt;- index(obj2)\nv2   &lt;- obj2$raw$Pop\ns2   &lt;- obj2$dist$Pop"
  },
  {
    "objectID": "supplement/other_package.html#setting",
    "href": "supplement/other_package.html#setting",
    "title": "Comparison with other packages",
    "section": "",
    "text": "library(tidyverse)\nlibrary(PRcalc)\nlibrary(seatdist)\n\ndp &lt;- disproportionality\n\nobj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\nind1 &lt;- index(obj1)\nv1   &lt;- obj1$raw$Vote\ns1   &lt;- obj1$dist$Vote\n\nobj2 &lt;- prcalc(us_census_2020, m = 435, method = \"hh\")\nind2 &lt;- index(obj2)\nv2   &lt;- obj2$raw$Pop\ns2   &lt;- obj2$dist$Pop"
  },
  {
    "objectID": "supplement/other_package.html#comparison",
    "href": "supplement/other_package.html#comparison",
    "title": "Comparison with other packages",
    "section": "Comparison",
    "text": "Comparison\n\nD’Hondt\n\n\n\n\n\n{PRcalc}\n\nind1[\"dhondt\"]\n##   dhondt \n## 1.116833\nind2[\"dhondt\"]\n##   dhondt \n## 1.402639\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"dhondt\")$value\n## [1] 1.116833\ndp(s = s2, v = v2, measure = \"dhondt\")$value\n## [1] 1.402639\n\n\n\n\n\n\nMonroe\n\n\n\n\n\n{PRcalc}\n\nind1[\"monroe\"]\n##     monroe \n## 0.01891832\nind2[\"monroe\"]\n##      monroe \n## 0.004537504\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"monroe\")$value\n## [1] 0.01891832\ndp(s = s2, v = v2, measure = \"monroe\")$value\n## [1] 0.004537504\n\n\n\n\n\n\nMaximum absolute deviation\n\n\n\n\n\n{PRcalc}\n\nind1[\"maxdev\"]\n##     maxdev \n## 0.01046107\nind2[\"maxdev\"]\n##      maxdev \n## 0.001319808\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"monroe\")$value\n## [1] 0.01891832\ndp(s = s2, v = v2, measure = \"monroe\")$value\n## [1] 0.004537504\n\n\n\n\n\n\nMax-Min ratio\n\n\n\n{PRcalc}\n\nind1[\"mm_ratio\"]\n## mm_ratio \n##      Inf\nind2[\"mm_ratio\"]\n## mm_ratio \n## 1.826093\n\n\n\n\nRae\n\n\n\n\n\n{PRcalc}\n\nind1[\"maxdev\"]\n##     maxdev \n## 0.01046107\nind2[\"maxdev\"]\n##      maxdev \n## 0.001319808\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"maxdev\")$value\n## [1] 0.01046107\ndp(s = s2, v = v2, measure = \"maxdev\")$value\n## [1] 0.001319808\n\n\n\n\n\n\nLoosemore & Hanby\n\n\n\n\n\n{PRcalc}\n\nind1[\"lh\"]\n##         lh \n## 0.03031546\nind2[\"lh\"]\n##         lh \n## 0.01387072\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"loosemore hanby\")$value\n## [1] 0.03031546\ndp(s = s2, v = v2, measure = \"loosemore hanby\")$value\n## [1] 0.01387072\n\n\n\n\n\n\nGrofman\n\n\n\n\n\n{PRcalc}\n\nind1[\"grofman\"]\n##    grofman \n## 0.01167689\nind2[\"grofman\"]\n##     grofman \n## 0.001241881\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"grofman\")$value\n## [1] 0.01167689\ndp(s = s2, v = v2, measure = \"grofman\")$value\n## [1] 0.001241881\n\n\n\n\n\n\nLijphart\n\n\n\n\n\n{PRcalc}\n\nind1[\"lijphart\"]\n##    lijphart \n## 0.004068599\nind2[\"lijphart\"]\n##     lijphart \n## 0.0003820148\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"lijphart\")$value\n##        p_13 \n## 0.002475945\ndp(s = s2, v = v2, measure = \"lijphart\")$value\n##         p_50 \n## 0.0004547714\n\n\n\n\nSince the results for each package are different, we need to be sure we know which results are correct. Lijphart index is calculated as follow:\n\\[\n\\mbox{I}_{\\mbox{Lijphart}} = \\frac{|s_a - v_a| + |s_b - v_b|}{2},\n\\]\nwhere \\(s_a\\) and \\(v_a\\) are the proportion of seats and votes for the party that received the largest number of votes, and \\(s_b\\) and \\(v_b\\) are that for the party that received the second largest of votes. We can compute the above equation directly.\n\nnew_s1 &lt;- s1[order(v1, decreasing = TRUE)]\nnew_v1 &lt;- v1[order(v1, decreasing = TRUE)]\n\nnew_s1 &lt;- new_s1 / sum(new_s1)\nnew_v1 &lt;- new_v1 / sum(new_v1)\n\nnew_s1\n##  [1] 0.36 0.16 0.14 0.10 0.10 0.06 0.04 0.02 0.02 0.00 0.00 0.00 0.00\nnew_v1\n##  [1] 0.353736700 0.158126102 0.130538236 0.098015356 0.089538935 0.069521178\n##  [7] 0.045539306 0.020890077 0.019729213 0.005373282 0.004039727 0.003353098\n## [13] 0.001598792\n\n(abs(new_s1[1] - new_v1[1]) + abs(new_s1[2] - new_v1[2])) / 2\n## [1] 0.004068599\n\nThe calculation results show that {PRcalc} is correct.\n\n\nGallagher\n\n\n\n\n\n{PRcalc}\n\nind1[\"gallagher\"]\n##  gallagher \n## 0.01460875\nind2[\"gallagher\"]\n##  gallagher \n## 0.00327953\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"gallagher\")$value\n## [1] 0.01460875\ndp(s = s2, v = v2, measure = \"gallagher\")$value\n## [1] 0.00327953\n\n\n\n\n\n\nGeneralized Gallagher\n\nParameter \\(k\\) (k) is required. Default is 2.\n\n\n\n\n\n\n{PRcalc}\n\nindex(obj1, k = 2)[\"g_gallagher\"]\n## g_gallagher \n##  0.01460875\nindex(obj2, k = 3)[\"g_gallagher\"]\n##  g_gallagher \n## 0.0008262183\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, k = 2, \n   measure = \"kindex\")$value\n## [1] 0.01460875\ndp(s = s2, v = v2, k = 3, \n   measure = \"kindex\")$value\n## [1] 0.0008262183\n\n\n\n\n\n\nGatev\n\n\n\n\n\n{PRcalc}\n\nind1[\"gatev\"]\n##      gatev \n## 0.03293948\nind2[\"gatev\"]\n##     gatev \n## 0.0155396\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"gatev\")$value\n## [1] 0.03293948\ndp(s = s2, v = v2, measure = \"gatev\")$value\n## [1] 0.0155396\n\n\n\n\n\n\nRyabtsev\n\n\n\n\n\n{PRcalc}\n\nind1[\"ryabtsev\"]\n##   ryabtsev \n## 0.02329805\nind2[\"ryabtsev\"]\n##   ryabtsev \n## 0.01098882\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"ryabtsev\")$value\n## [1] 0.02329805\ndp(s = s2, v = v2, measure = \"ryabtsev\")$value\n## [1] 0.01098882\n\n\n\n\n\n\nSzalai\n\n\n\n\n\n{PRcalc}\n\nind1[\"szalai\"]\n##    szalai \n## 0.5557115\nind2[\"szalai\"]\n##     szalai \n## 0.05339091\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"szalai\")$value\n## [1] 0.5557115\ndp(s = s2, v = v2, measure = \"szalai\")$value\n## [1] 0.05339091\n\n\n\n\n\n\nWeighted Szalai\n\n\n\n\n\n{PRcalc}\n\nind1[\"w_szalai\"]\n##   w_szalai \n## 0.09066122\nind2[\"w_szalai\"]\n##   w_szalai \n## 0.02538329\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"weighted szalai\")$value\n## [1] 0.09066122\ndp(s = s2, v = v2, measure = \"weighted szalai\")$value\n## [1] 0.02538329\n\n\n\n\n\n\nAleskerov & Platonov\n\n\n\n\n\n{PRcalc}\n\nind1[\"ap\"]\n##       ap \n## 1.042141\nind2[\"ap\"]\n##       ap \n## 1.093426\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"aleskerov\")$value\n## [1] 1.042141\ndp(s = s2, v = v2, measure = \"aleskerov\")$value\n## [1] 1.093426\n\n\n\n\n\n\nGini coefficient\n\n\n\n\n\n{PRcalc}\n\nind1[\"gini\"]\n##       gini \n## 0.03606891\nind2[\"gini\"]\n##       gini \n## 0.01671634\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"gini\")$value\n## [1] 0.03606891\ndp(s = s2, v = v2, measure = \"gini\")$value\n## [1] 0.01671634\n\n\n\n\n\n\nAtkinson\n\nParameter \\(\\eta\\) (eta) is required. Defualt is 2.\n\n\n\n\n\n\n{PRcalc}\n\nindex(obj1, eta = 2)[\"atkinson\"]\n## atkinson \n##        1\nindex(obj2, eta = 3)[\"atkinson\"]\n##    atkinson \n## 0.003623267\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, eta = 2, \n   measure = \"atkinson\")$value\n## [1] 1\ndp(s = s2, v = v2, eta = 3, \n   measure = \"atkinson\")$value\n## [1] 0.003623267\n\n\n\n\n\n\nGeneralized entropy\nSee \\(\\alpha\\)-divergence.\n\n\nSainte-Laguë\n\n\n\n\n\n{PRcalc}\n\nind1[\"sl\"]\n##         sl \n## 0.01846559\nind2[\"sl\"]\n##          sl \n## 0.002747745\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"sainte lague\")$value\n## [1] 0.01846559\ndp(s = s2, v = v2, measure = \"sainte lague\")$value\n## [1] 0.002747745\n\n\n\n\n\n\nCox & Shugart\n\n\n\n\n\n{PRcalc}\n\nind1[\"cs\"]\n##       cs \n## 1.033646\nind2[\"cs\"]\n##        cs \n## 0.9904007\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"cox shugart\")$value\n## [1] 1.033646\ndp(s = s2, v = v2, measure = \"cox shugart\")$value\n## [1] 0.9904007\n\n\n\n\n\n\nFarina\n\n\n\n\n\n{PRcalc}\n\nind1[\"farina\"]\n##     farina \n## 0.04628158\nind2[\"farina\"]\n##     farina \n## 0.02375309\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"farina\")$value\n## [1] 0.04628158\ndp(s = s2, v = v2, measure = \"farina\")$value\n## [1] 0.02375309\n\n\n\n\n\n\nOrtona\n\n\n\n\n\n{PRcalc}\n\nind1[\"ortona\"]\n##     ortona \n## 0.04690884\nind2[\"ortona\"]\n##     ortona \n## 0.01575384\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"ortona\")$value\n## [1] 0.04690884\ndp(s = s2, v = v2, measure = \"ortona\")$value\n## [1] 0.01575384\n\n\n\n\n\n\nCosine Dissimilarity\n\n\n\n\n\n{PRcalc}\n\nind1[\"cd\"]\n##           cd \n## 0.0008673785\nind2[\"cd\"]\n##           cd \n## 0.0002284962\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"cosine\")$value\n## [1] 0.0008673785\ndp(s = s2, v = v2, measure = \"cosine\")$value\n## [1] 0.0002284962\n\n\n\n\n\n\nLebeda’s RR (Mixture D’Hondt)\n\n\n\n\n\n{PRcalc}\n\nind1[\"rr\"]\n##        rr \n## 0.1046107\nind2[\"rr\"]\n##        rr \n## 0.2870583\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"mixture\")$value\n## [1] 0.1046107\ndp(s = s2, v = v2, measure = \"mixture\")$value\n## [1] 0.2870583\n\n\n\n\n\n\nLebeda’s ARR\n\n\n\n\n\n{PRcalc}\n\nind1[\"arr\"]\n##         arr \n## 0.008046973\nind2[\"arr\"]\n##         arr \n## 0.005741165\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"arr\")$value\n## [1] 0.008046973\ndp(s = s2, v = v2, measure = \"arr\")$value\n## [1] 0.005741165\n\n\n\n\n\n\nLebeda’s SRR\n\n\n\n\n\n{PRcalc}\n\nind1[\"srr\"]\n##        srr \n## 0.04148157\nind2[\"srr\"]\n##        srr \n## 0.06162057\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"srr\")$value\n## [1] 0.04148157\ndp(s = s2, v = v2, measure = \"srr\")$value\n## [1] 0.06162057\n\n\n\n\n\n\nLebeda’s WDRR\n\n\n\n\n\n{PRcalc}\n\nind1[\"wdrr\"]\n##       wdrr \n## 0.05508052\nind2[\"wdrr\"]\n##      wdrr \n## 0.1049332\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"wdrr\")$value\n## [1] 0.05508052\ndp(s = s2, v = v2, measure = \"wdrr\")$value\n## [1] 0.1049332\n\n\n\n\n\n\nKullback-Leibler Surprise\n\n\n\n\n\n{PRcalc}\n\nind1[\"kl\"]\n##         kl \n## 0.01643105\nind2[\"kl\"]\n##          kl \n## 0.001316731\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"surprise\")$value\n## [1] 0.01643105\ndp(s = s2, v = v2, measure = \"surprise\")$value\n## [1] 0.001316731\n\n\n\n\n\n\nLikelihood Ratio Statistic\n\n\n\n\n\n{PRcalc}\n\nind1[\"lr\"]\n##  lr \n## Inf\nind2[\"lr\"]\n##          lr \n## 0.002544105\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"lrstat\")$value\n## [1] Inf\ndp(s = s2, v = v2, measure = \"lrstat\")$value\n## [1] 0.002544105\n\n\n\n\n\n\n\\(\\chi^2\\)\n\n\n\n\n\n{PRcalc}\n\nind1[\"chisq\"]\n##       chisq \n## 0.004225364\nind2[\"chisq\"]\n##       chisq \n## 0.002476612\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"chisq\")$value\n## [1] 0.004225364\ndp(s = s2, v = v2, measure = \"chisq\")$value\n## [1] 0.002476612\n\n\n\n\n\n\nHellinger Distance\n\n\n\n\n\n{PRcalc}\n\nind1[\"hellinger\"]\n##  hellinger \n## 0.08775774\nind2[\"hellinger\"]\n##  hellinger \n## 0.01797873\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, measure = \"hellinger\")$value\n## [1] 0.08775774\ndp(s = s2, v = v2, measure = \"hellinger\")$value\n## [1] 0.01797873\n\n\n\n\n\n\n\\(\\alpha\\)-divergence (Generalized entropy)\n\nParameter \\(\\alpha\\) (alpha) is required. Default is 2.\n\\(\\alpha\\)-divergence is theoretically equivalent to generalized entropy. However, {seatdist} can only be computed for the cases where \\(\\alpha \\neq 0, 1\\)\n\n\n\n\n\n\n{PRcalc}\n\nindex(obj1, alpha = 2)[\"ad\"]\n##          ad \n## 0.009232794\nindex(obj2, alpha = 0, as_disprop = FALSE)[\"ad\"]\n##          ad \n## 0.001272053\nindex(obj1, alpha = 1)[\"ad\"]\n##         ad \n## 0.01643105\nindex(obj2, alpha = -1, as_disprop = FALSE)[\"ad\"]\n##          ad \n## 0.001238306\nindex(obj1, alpha = 3)[\"ad\"]\n##         ad \n## 0.00682755\nindex(obj2, alpha = 0.5)[\"ad\"]\n##         ad \n## 0.00129294\n\n\n\n\n\n\n\n\n{seatdist}\n\ndp(s = s1, v = v1, alpha = 2, \n   measure = \"gen entropy\")$value\n## [1] 0.009232794\ndp(s = s2, v = v2, alpha = 0, \n   measure = \"gen entropy\")$value\n## [1] NaN\ndp(s = s1, v = v1, alpha = 1, \n   measure = \"gen entropy\")$value\n## [1] NaN\ndp(s = s2, v = v2, alpha = -1, \n   measure = \"gen entropy\")$value\n## [1] 0.001238306\ndp(s = s1, v = v1, alpha = 3, \n   measure = \"gen entropy\")$value\n## [1] 0.00682755\ndp(s = s2, v = v2, alpha = 0.5, \n   measure = \"gen entropy\")$value\n## [1] 0.00129294\n\n\n\n\nExample 1: \\(D^{-1} \\times 2\\) is equivalent to Neyman’s \\(\\chi^2\\) divergence.\n\n2 * index(obj2, alpha = -1, as_disprop = FALSE)[\"ad\"]\n##          ad \n## 0.002476612\nindex(obj2)[\"chisq\"]\n##       chisq \n## 0.002476612\n\nExample 2: \\(D^{1}\\) is equivalent to Kullback-Leibler surprise.\n\nindex(obj2, alpha = 1, as_disprop = FALSE)[\"ad\"]\n##          ad \n## 0.001316731\nindex(obj2)[\"kl\"]\n##          kl \n## 0.001316731\n\nExample 3: \\(\\sqrt{\\frac{1}{4} D^{\\frac{1}{2}}}\\) is equivalent to Hellinger distance.\n\nsqrt(index(obj2, alpha = 0.5, as_disprop = FALSE)[\"ad\"] * 0.25)\n##         ad \n## 0.01797873\nindex(obj2)[\"hellinger\"]\n##  hellinger \n## 0.01797873"
  },
  {
    "objectID": "supplement/list_of_indices.html",
    "href": "supplement/list_of_indices.html",
    "title": "List of indices",
    "section": "",
    "text": "In the case of a block system, disproportionality is not measured within individual blocks, but rather based on the total number of votes and seats received.\n\n\\(p\\): Number of parties\n\\(v_i\\): voteshare of party \\(i\\)\n\\(s_i\\): seatshare of party \\(i\\)\n\n\n\n\n\n\n\n\n\nIndex\nID in {PRcalc}\nRule\n\n\n\n\nD’Hondt (Gallagher 1991)\n\"dhondt\"\n\\(\\mbox{max}_i \\frac{s_i}{v_i}\\)\n\n\nMonroe (1994)\n\"monroe\"\n\\(\\sqrt{\\frac{\\sum_i (s_i - v_i)^2}{1 + \\sum_i v_i^2}}\\)\n\n\nMaximum absolute deviation\n\"maxdev\"\n\\(\\mbox{max}_i\\{|s_i - v_i|\\}\\)\n\n\nMax-Min ratio\n\"mm_ratio\"\n\\(\\frac{\\max{\\frac{v_i}{s_i}}}{\\min{\\frac{v_i}{s_i}}}\\)\n\n\nRae (1967)\n\"rae\"\n\\(\\frac{1}{p}\\sum_i |s_i - v_i|\\)\n\n\nLoosemore & Hanby (1971)\n\"lh\"\n\\(\\frac{1}{2}\\sum_i |s_i - v_i|\\)\n\n\nGrofman\n\"grofman\"\n\\(\\frac{1}{e}\\sum_i |s_i - v_i|; e = \\frac{1}{\\sum_i v_i^2}\\)\n\n\nLijphart\n\"lijphart\"\n\\(\\frac{|s_a - v_a| + |s_b - v_b|}{2}; v_a &gt; v_b &gt; ...\\)\n\n\nGallagher (1991)\n\"gallagher\"\n\\(\\sqrt{\\frac{1}{2}\\sum_i (s_i - v_i)^2}\\)\n\n\nGeneralized Gallagher\n\"g_gallagher\"\n\\(\\sqrt[k]{\\frac{1}{k}\\sum_i (s_i - v_i)^k}\\)\n\n\nGatev\n\"gatev\"\n\\(\\sqrt{\\frac{\\sum_i(s_i - v_i)^2}{\\sum_i(s_i^2 + v_i^2)}}\\)\n\n\nRyabtsev\n\"ryabtsev\"\n\\(\\sqrt{\\frac{\\sum_i(s_i - v_i)^2}{\\sum_i(s_i + v_i)^2}}\\)\n\n\nSzalai (Stewart 2006)\n\"szalai\"\n\\(\\sqrt{\\frac{1}{p}\\sum_i \\bigl(\\frac{s_i - v_i}{s_i + v_i}\\bigr)^2}\\)\n\n\nWeighted Szalai (Stewart 2006)\n\"w_szalai\"\n\\(\\sqrt{\\frac{1}{2}\\sum_i \\frac{(s_i - v_i)^2}{s_i + v_i}}\\)\n\n\nAleskerov & Platonov\n\"ap\"\n\\(\\frac{\\sum_i k_i \\frac{s_i}{v_i}}{\\sum_i k_i}; k_i = \\mathbb{I}\\bigl(\\frac{s_i}{v_i} &gt; 1\\bigr)\\)\n\n\nGini coefficient\n\"gini\"\n\\(1\\)\n\n\nAtkinson\n\"atkinson\"\n\\(1 - \\Bigl[\\sum_i v_i \\bigl(\\frac{s_i}{v_i}\\bigr)^{(1 - \\eta)} \\Bigr]^{\\frac{1}{1-\\eta}}\\)\n\n\nGeneralized Entropy\n\"entropy\"\n\\(\\frac{1}{\\alpha^2 - \\alpha}\\Bigl[ \\sum_i v_i \\bigl( \\frac{s_i}{v_i} \\bigr)^\\alpha - 1 \\Bigr]\\)\n\n\nSainte-Laguë (1910)\n\"sl\"\n\\(\\sum_i \\frac{(s_i - v_i)^2}{v_i}\\)\n\n\nCox & Shugart\n\"cs\"\n\\(\\frac{\\sum_i (s_i - \\bar{s})(v_i - \\bar{v})}{\\sum_i(v_i - \\bar{v})^2}\\)\n\n\nFarina (Kestelman 2005)\n\"farina\"\n\\(\\mbox{arccos}\\Bigl[ \\frac{\\sum_i s_i v_i}{\\sqrt{\\sum_i s_i^2 \\sum_i v_i^2}} \\Bigr]\\frac{10}{9}\\)\n\n\nOrtona\n\"ortona\"\n\\(\\frac{\\sum_i |s_i - v_i|}{\\sum_i |u_i - v_i|}\\)\n\n\nCosine Dissimilarity\n\"cd\"\n\\(1 - \\frac{\\sum_i s_i v_i}{\\sqrt{\\sum_i s_i^2}\\sqrt{\\sum_i v_i^2}}\\)\n\n\nLebeda’s RR (Mixture D’Hondt)\n\"rr\"\n\\(1 - \\frac{1}{\\mbox{max}_i \\frac{s_i}{v_i}}\\)\n\n\nLebeda’s ARR\n\"arr\"\n\\(\\frac{1}{p}\\Bigl( 1 - \\frac{1}{\\mbox{max}_i \\frac{s_i}{v_i}} \\Bigr)\\)\n\n\nLebeda’s SRR\n\"srr\"\n\\(\\sqrt{\\sum_i\\Bigl(v_i - \\frac{s_i}{\\mbox{max}_i \\frac{s_i}{v_i}}\\Bigr)^2}\\)\n\n\nLebeda’s WDRR\n\"wdrr\"\n\\(\\frac{1}{3}\\Bigl(\\Bigl(\\sum_i |v_i - s_i|\\Bigr) + \\Bigl(\\sum_i 1 - \\frac{1}{\\mbox{max}_i \\frac{s_i}{v_i}} \\Bigr)\\Bigr)\\)\n\n\nKullback-Leibler Surprise\n\"kl\"\n\\(\\sum_{s_i &gt; 0}s_i \\mbox{ln} \\frac{s_i}{v_i}\\)\n\n\nLikelihood Ratio Statistic\n\"lr\"\n\\(2\\sum_i v_i \\mbox{ln} \\frac{v_i}{s_i}\\)\n\n\n\\(\\chi^2\\)\n\"chisq\"\n\\(\\sum_{s_i &gt; 0}\\frac{(v_i - s_i)^2}{s_i}\\)\n\n\nHellinger Distance\n\"hellinger\"\n\\(\\frac{1}{\\sqrt{2}}\\sqrt{\\sum_i(\\sqrt{s_i} - \\sqrt{v_i})^2}\\)\n\n\n\\(\\alpha\\)-divergence\n\"ad\"\nSee Note 2\n\n\n\n\n\n\n\n\n\nNote 1: About Max-Min ratio\n\n\n\n\n\nIf as_disprop = FALSE (default), the calculation is based on each party’s total votes and total seats. This is fine when calculating disproportionality in the allocation of seats for proportional representation system. However, in a proportional representation system, there can be many parties that receive a positive number of votes but no seats. In this case, Max-Min ratio is not a useful indicator.\nHowever, when measuring malapportionment, Max-Min ratio is one of the useful indicators. In this case, as_disprop = FALSE must be specified or it will not be calculated correctly.\n\n\n\n\n\n\n\n\n\nNote 2: About \\(\\alpha\\)-divergence\n\n\n\n\n\n\n\\[\nD(\\alpha) = \\begin{cases}\n\\sum_i \\bigl(s_i \\mbox{ln} \\bigl(\\frac{s_i}{v_i}\\bigr)\\bigr) & \\mbox{if}\\quad\\alpha = 1,\\\\\n\\sum_i \\bigl(v_i \\mbox{ln} \\bigl(\\frac{v_i}{s_i}\\bigr)\\bigr)  & \\mbox{if}\\quad\\alpha = 0,\\\\\n\\sum_i \\bigl(v_i \\frac{1}{\\alpha (\\alpha - 1)}\\bigr) \\Bigl[\\bigl(\\frac{s_i}{v_i}\\bigr)^\\alpha - 1\\Bigr] & \\mbox{otherwise.}\\\\\n\\end{cases}\n\\]\n\n\\(0\\log(0) = 0\\)"
  },
  {
    "objectID": "index.html#description",
    "href": "index.html#description",
    "title": "PRcalc",
    "section": "Description",
    "text": "Description\n{PRcalc} is an R package designed for computing proportional representatives, computing disproportionality indices including \\(\\alpha\\)-divergence, and decomposing \\(\\alpha\\)-divergence. {PRcalc} can also be used to compute malapportionment in electoral district allocations.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#installation",
    "href": "index.html#installation",
    "title": "PRcalc",
    "section": "Installation",
    "text": "Installation\n# If {remotes} is not installed, install {remotes} package.\nremotes::install_github(\"JaehyunSong/PRcalc\")",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "LICENSE.html",
    "href": "LICENSE.html",
    "title": "MIT License",
    "section": "",
    "text": "MIT License\nCopyright (c) 2024 Jaehyun Song,Yuta Kamahara\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.",
    "crumbs": [
      "License"
    ]
  },
  {
    "objectID": "man/kr_lower_2016.html",
    "href": "man/kr_lower_2016.html",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2016年)\n\n\n\ndata(kr_lower_2016)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/kr_lower_2016.html#韓国国会議員総選挙比例区得票数-2016年",
    "href": "man/kr_lower_2016.html#韓国国会議員総選挙比例区得票数-2016年",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2016年)\n\n\n\ndata(kr_lower_2016)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/print.prcalc_index.html",
    "href": "man/print.prcalc_index.html",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_index object.\n\n\n\n## S3 method for class 'prcalc_index'\nprint(x, subset = NULL, hide_id = FALSE, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_index object.\n\n\n\n\nsubset\n\n\na\n\n\n\n\nhide_id\n\n\na\n\n\n\n\nuse_gt\n\n\na\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nindex(pr_obj)\n\n            ID                         Index    Value\n1       dhondt                       D’Hondt 1.116833\n2       monroe                        Monroe 0.018918\n3       maxdev    Maximum Absolute Deviation 0.010461\n4     mm_ratio                 Max-Min ratio      Inf\n5          rae                           Rae 0.004664\n6           lh             Loosemore & Hanby 0.030315\n7      grofman                       Grofman 0.011677\n8     lijphart                      Lijphart 0.004069\n9    gallagher                     Gallagher 0.014609\n10 g_gallagher         Generalized Gallagher 0.014609\n11       gatev                         Gatev 0.032939\n12    ryabtsev                      Ryabtsev 0.023298\n13      szalai                        Szalai 0.555712\n14    w_szalai               Weighted Szalai 0.090661\n15          ap          Aleskerov & Platonov 1.042141\n16        gini                          Gini 0.036069\n17    atkinson                      Atkinson 1.000000\n18          sl                  Sainte-Laguë 0.018466\n19          cs                 Cox & Shugart 1.033646\n20      farina                        Farina 0.046282\n21      ortona                        Ortona 0.046909\n22          cd          Cosine Dissimilarity 0.000867\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.104611\n24         arr                  Lebeda’s ARR 0.008047\n25         srr                  Lebeda’s SRR 0.041482\n26        wdrr                 Lebeda’s WDRR 0.055081\n27          kl     Kullback-Leibler Surprise 0.016431\n28          lr    Likelihood Ratio Statistic      Inf\n29       chisq                   Chi Squared 0.004225\n30   hellinger            Hellinger Distance 0.087758\n31          ad              alpha-Divergence 0.009233\n\nindex(pr_obj) |&gt;\n  print(subset = c(\"lh\", \"gallagher\", \"rae\", \"dhondt\", \"ad\"))\n\n         ID             Index   Value\n1    dhondt           D’Hondt 1.11683\n2       rae               Rae 0.00466\n3        lh Loosemore & Hanby 0.03032\n4 gallagher         Gallagher 0.01461\n5        ad  alpha-Divergence 0.00923"
  },
  {
    "objectID": "man/print.prcalc_index.html#printing-a-prcalc_index-object.",
    "href": "man/print.prcalc_index.html#printing-a-prcalc_index-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_index object.\n\n\n\n## S3 method for class 'prcalc_index'\nprint(x, subset = NULL, hide_id = FALSE, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_index object.\n\n\n\n\nsubset\n\n\na\n\n\n\n\nhide_id\n\n\na\n\n\n\n\nuse_gt\n\n\na\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nindex(pr_obj)\n\n            ID                         Index    Value\n1       dhondt                       D’Hondt 1.116833\n2       monroe                        Monroe 0.018918\n3       maxdev    Maximum Absolute Deviation 0.010461\n4     mm_ratio                 Max-Min ratio      Inf\n5          rae                           Rae 0.004664\n6           lh             Loosemore & Hanby 0.030315\n7      grofman                       Grofman 0.011677\n8     lijphart                      Lijphart 0.004069\n9    gallagher                     Gallagher 0.014609\n10 g_gallagher         Generalized Gallagher 0.014609\n11       gatev                         Gatev 0.032939\n12    ryabtsev                      Ryabtsev 0.023298\n13      szalai                        Szalai 0.555712\n14    w_szalai               Weighted Szalai 0.090661\n15          ap          Aleskerov & Platonov 1.042141\n16        gini                          Gini 0.036069\n17    atkinson                      Atkinson 1.000000\n18          sl                  Sainte-Laguë 0.018466\n19          cs                 Cox & Shugart 1.033646\n20      farina                        Farina 0.046282\n21      ortona                        Ortona 0.046909\n22          cd          Cosine Dissimilarity 0.000867\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.104611\n24         arr                  Lebeda’s ARR 0.008047\n25         srr                  Lebeda’s SRR 0.041482\n26        wdrr                 Lebeda’s WDRR 0.055081\n27          kl     Kullback-Leibler Surprise 0.016431\n28          lr    Likelihood Ratio Statistic      Inf\n29       chisq                   Chi Squared 0.004225\n30   hellinger            Hellinger Distance 0.087758\n31          ad              alpha-Divergence 0.009233\n\nindex(pr_obj) |&gt;\n  print(subset = c(\"lh\", \"gallagher\", \"rae\", \"dhondt\", \"ad\"))\n\n         ID             Index   Value\n1    dhondt           D’Hondt 1.11683\n2       rae               Rae 0.00466\n3        lh Loosemore & Hanby 0.03032\n4 gallagher         Gallagher 0.01461\n5        ad  alpha-Divergence 0.00923"
  },
  {
    "objectID": "man/kr_lower_2004.html",
    "href": "man/kr_lower_2004.html",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2004年)\n\n\n\ndata(kr_lower_2004)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/kr_lower_2004.html#韓国国会議員総選挙比例区得票数-2004年",
    "href": "man/kr_lower_2004.html#韓国国会議員総選挙比例区得票数-2004年",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2004年)\n\n\n\ndata(kr_lower_2004)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/print.prcalc_index_compare.html",
    "href": "man/print.prcalc_index_compare.html",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_index_compare object.\n\n\n\n## S3 method for class 'prcalc_index_compare'\nprint(x, subset = NULL, hide_id = FALSE, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_index_compare object.\n\n\n\n\nsubset\n\n\na\n\n\n\n\nhide_id\n\n\na\n\n\n\n\nuse_gt\n\n\na\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\ncompare(list(\"t = 0%\" = pr_obj1, \"t = 2.5%\" = pr_obj2, \"t = 5%\" = pr_obj3))\n\n      Party t = 0% t = 2.5% t = 5%\n1      自民     18       19     20\n2      公明      7        7      7\n3      立憲      8        9      9\n4      維新      5        5      5\n5      共産      5        5      5\n6      国民      3        3      4\n7    れいわ      2        2      0\n8      社民      1        0      0\n9       N国      1        0      0\n10   安楽死      0        0      0\n11     幸福      0        0      0\n12 オリーブ      0        0      0\n13   労働者      0        0      0\n\nlist(\"t = 0%\"   = index(pr_obj1),\n     \"t = 2.5%\" = index(pr_obj2),\n     \"t = 5%\"   = index(pr_obj3)) |&gt;\n  compare() |&gt;\n  print(subset  = c(\"lh\", \"gallagher\", \"rae\", \"dhondt\", \"ad\"),\n        hide_id = TRUE)\n\n              Index  t = 0% t = 2.5% t = 5%\n1           D’Hondt 1.11683   1.1383 1.1507\n2               Rae 0.00466   0.0108 0.0155\n3 Loosemore & Hanby 0.03032   0.0700 0.1005\n4         Gallagher 0.01461   0.0345 0.0543\n5  alpha-Divergence 0.00923   0.0319 0.0566"
  },
  {
    "objectID": "man/print.prcalc_index_compare.html#printing-a-prcalc_index_compare-object.",
    "href": "man/print.prcalc_index_compare.html#printing-a-prcalc_index_compare-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_index_compare object.\n\n\n\n## S3 method for class 'prcalc_index_compare'\nprint(x, subset = NULL, hide_id = FALSE, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_index_compare object.\n\n\n\n\nsubset\n\n\na\n\n\n\n\nhide_id\n\n\na\n\n\n\n\nuse_gt\n\n\na\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\ncompare(list(\"t = 0%\" = pr_obj1, \"t = 2.5%\" = pr_obj2, \"t = 5%\" = pr_obj3))\n\n      Party t = 0% t = 2.5% t = 5%\n1      自民     18       19     20\n2      公明      7        7      7\n3      立憲      8        9      9\n4      維新      5        5      5\n5      共産      5        5      5\n6      国民      3        3      4\n7    れいわ      2        2      0\n8      社民      1        0      0\n9       N国      1        0      0\n10   安楽死      0        0      0\n11     幸福      0        0      0\n12 オリーブ      0        0      0\n13   労働者      0        0      0\n\nlist(\"t = 0%\"   = index(pr_obj1),\n     \"t = 2.5%\" = index(pr_obj2),\n     \"t = 5%\"   = index(pr_obj3)) |&gt;\n  compare() |&gt;\n  print(subset  = c(\"lh\", \"gallagher\", \"rae\", \"dhondt\", \"ad\"),\n        hide_id = TRUE)\n\n              Index  t = 0% t = 2.5% t = 5%\n1           D’Hondt 1.11683   1.1383 1.1507\n2               Rae 0.00466   0.0108 0.0155\n3 Loosemore & Hanby 0.03032   0.0700 0.1005\n4         Gallagher 0.01461   0.0345 0.0543\n5  alpha-Divergence 0.00923   0.0319 0.0566"
  },
  {
    "objectID": "man/allocation.html",
    "href": "man/allocation.html",
    "title": "PRcalc",
    "section": "",
    "text": "Largest Remainder Method\n\n\n\nallocation(x, m, method, extra = NULL)\n\n\n\n\n\n\n\nx\n\n\na data.frame or tibble with two columns. The first and second column represents names of parties and numbers of votes, respectively.\n\n\n\n\nm\n\n\na numeric value of district magnitude.\n\n\n\n\nmethod\n\n\na character string giving a method for computing seat allocation. See \"Allocation methods\" section.\n\n\n\n\nextra\n\n\na numeric vector of length m. If method is “custom divisor” (“cd”) or “custom quota” (“cq”), this parameter is mandatory. See \"About custom methods\" section.\n\n\n\n\n\n\nA tibble object with two columns.\n\n\n\n\n\nHighest average method\n\n\n“d’hondt” (“dt”) or “jefferson”: D’hondt / Jefferson method\n\n\n“adams” or “cambridge”: Adams / Cambridge method\n\n\n“sainte-lague” (“sl”) or “webster”: Sainte-Laguë / Webster method\n\n\n“modified sainte-lague” (“msl”): Modified Sainte-Laguë method\n\n\n“danish”: Danish method\n\n\n“imperiali”: Imperiali method\n\n\n“hungtington-hill” (“hh”): Huntington-Hill method\n\n\n“dean”: Dean method\n\n\n“ad”: alpha-divergence. extra is mandatory.\n\n\n“custom divisor” (“cd”): Custom divisor. extra is mandatory.\n\n\n\n\nLargest reminder method\n\n\n“hare-niemeyer” (“hn” or “hare”): Hare-Niemeyer quota\n\n\n“droop”: Droop quota\n\n\n“hagenbach-bischoff” (“hb”): Hagenbach-Bischoff quota\n\n\n“imperiali quota” (“iq”): Imperiali quota\n\n\n“custom quota” (“cq”): Custom quota. extra is mandatory.\n\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\nsample_data &lt;- data.frame(Party = c(\"Party A\", \"Party B\", \"Party C\", \"Party D\"),\n                          Votes = c(53000, 25000, 16600, 5400))\n\nsample_data\n\n    Party Votes\n1 Party A 53000\n2 Party B 25000\n3 Party C 16600\n4 Party D  5400\n\n# Magnitude = 10, Hare-Niemeyer quota\nallocation(x = sample_data, m = 10, method = \"hare\")\n\n    party votes\n1 Party A     5\n2 Party B     2\n3 Party C     2\n4 Party D     1\n\n# Magnitude = 10, D'hondt method\nallocation(x = sample_data, m = 10, method = \"dt\")\n\n# A tibble: 3 × 2\n  party   votes\n  &lt;chr&gt;   &lt;int&gt;\n1 Party A     6\n2 Party B     3\n3 Party C     1\n\n# Custom divisor: 1.4, 3, 5, 7, ... (identical to Modified Sainte-Laguë method)\nallocation(x = sample_data, m = 10, method = \"custom divisor\",\n           extra = c(1.4, seq(3, 19, by = 2)))\n\n# A tibble: 3 × 2\n  party   votes\n  &lt;chr&gt;   &lt;int&gt;\n1 Party A     5\n2 Party B     3\n3 Party C     2"
  },
  {
    "objectID": "man/allocation.html#largest-remainder-method",
    "href": "man/allocation.html#largest-remainder-method",
    "title": "PRcalc",
    "section": "",
    "text": "Largest Remainder Method\n\n\n\nallocation(x, m, method, extra = NULL)\n\n\n\n\n\n\n\nx\n\n\na data.frame or tibble with two columns. The first and second column represents names of parties and numbers of votes, respectively.\n\n\n\n\nm\n\n\na numeric value of district magnitude.\n\n\n\n\nmethod\n\n\na character string giving a method for computing seat allocation. See \"Allocation methods\" section.\n\n\n\n\nextra\n\n\na numeric vector of length m. If method is “custom divisor” (“cd”) or “custom quota” (“cq”), this parameter is mandatory. See \"About custom methods\" section.\n\n\n\n\n\n\nA tibble object with two columns.\n\n\n\n\n\nHighest average method\n\n\n“d’hondt” (“dt”) or “jefferson”: D’hondt / Jefferson method\n\n\n“adams” or “cambridge”: Adams / Cambridge method\n\n\n“sainte-lague” (“sl”) or “webster”: Sainte-Laguë / Webster method\n\n\n“modified sainte-lague” (“msl”): Modified Sainte-Laguë method\n\n\n“danish”: Danish method\n\n\n“imperiali”: Imperiali method\n\n\n“hungtington-hill” (“hh”): Huntington-Hill method\n\n\n“dean”: Dean method\n\n\n“ad”: alpha-divergence. extra is mandatory.\n\n\n“custom divisor” (“cd”): Custom divisor. extra is mandatory.\n\n\n\n\nLargest reminder method\n\n\n“hare-niemeyer” (“hn” or “hare”): Hare-Niemeyer quota\n\n\n“droop”: Droop quota\n\n\n“hagenbach-bischoff” (“hb”): Hagenbach-Bischoff quota\n\n\n“imperiali quota” (“iq”): Imperiali quota\n\n\n“custom quota” (“cq”): Custom quota. extra is mandatory.\n\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\nsample_data &lt;- data.frame(Party = c(\"Party A\", \"Party B\", \"Party C\", \"Party D\"),\n                          Votes = c(53000, 25000, 16600, 5400))\n\nsample_data\n\n    Party Votes\n1 Party A 53000\n2 Party B 25000\n3 Party C 16600\n4 Party D  5400\n\n# Magnitude = 10, Hare-Niemeyer quota\nallocation(x = sample_data, m = 10, method = \"hare\")\n\n    party votes\n1 Party A     5\n2 Party B     2\n3 Party C     2\n4 Party D     1\n\n# Magnitude = 10, D'hondt method\nallocation(x = sample_data, m = 10, method = \"dt\")\n\n# A tibble: 3 × 2\n  party   votes\n  &lt;chr&gt;   &lt;int&gt;\n1 Party A     6\n2 Party B     3\n3 Party C     1\n\n# Custom divisor: 1.4, 3, 5, 7, ... (identical to Modified Sainte-Laguë method)\nallocation(x = sample_data, m = 10, method = \"custom divisor\",\n           extra = c(1.4, seq(3, 19, by = 2)))\n\n# A tibble: 3 × 2\n  party   votes\n  &lt;chr&gt;   &lt;int&gt;\n1 Party A     5\n2 Party B     3\n3 Party C     2"
  },
  {
    "objectID": "man/jp_census_2015.html",
    "href": "man/jp_census_2015.html",
    "title": "PRcalc",
    "section": "",
    "text": "47都道府県の人口 (2015年)\n\n\n\ndata(jp_census_2015)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nPref\n\n\n都道府県名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\n国勢調査"
  },
  {
    "objectID": "man/jp_census_2015.html#都道府県別人口-2015年",
    "href": "man/jp_census_2015.html#都道府県別人口-2015年",
    "title": "PRcalc",
    "section": "",
    "text": "47都道府県の人口 (2015年)\n\n\n\ndata(jp_census_2015)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nPref\n\n\n都道府県名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\n国勢調査"
  },
  {
    "objectID": "man/us_census_2020.html",
    "href": "man/us_census_2020.html",
    "title": "PRcalc",
    "section": "",
    "text": "アメリカ州別人口 (2020年)\n\n\n\ndata(us_census_2020)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nState\n\n\n州名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\nU.S. Census Bureau"
  },
  {
    "objectID": "man/us_census_2020.html#アメリカ州別人口-2020年",
    "href": "man/us_census_2020.html#アメリカ州別人口-2020年",
    "title": "PRcalc",
    "section": "",
    "text": "アメリカ州別人口 (2020年)\n\n\n\ndata(us_census_2020)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nState\n\n\n州名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\nU.S. Census Bureau"
  },
  {
    "objectID": "man/br_district_2010.html",
    "href": "man/br_district_2010.html",
    "title": "PRcalc",
    "section": "",
    "text": "List of electoral district in Brazil (2010)\n\n\n\ndata(\"br_district_2010\")\n\n\n\n\nA data frame with 27 rows and 3 variables:\n\n\ndistrict\n\n\nnames of state\n\n\npopulation\n\n\nnumber of population\n\n\nmagnitude\n\n\nelectoral magnitude"
  },
  {
    "objectID": "man/br_district_2010.html#list-of-electoral-district-in-brazil-2010",
    "href": "man/br_district_2010.html#list-of-electoral-district-in-brazil-2010",
    "title": "PRcalc",
    "section": "",
    "text": "List of electoral district in Brazil (2010)\n\n\n\ndata(\"br_district_2010\")\n\n\n\n\nA data frame with 27 rows and 3 variables:\n\n\ndistrict\n\n\nnames of state\n\n\npopulation\n\n\nnumber of population\n\n\nmagnitude\n\n\nelectoral magnitude"
  },
  {
    "objectID": "man/jp_census_1970.html",
    "href": "man/jp_census_1970.html",
    "title": "PRcalc",
    "section": "",
    "text": "47都道府県の人口 (1970年)\n\n\n\ndata(jp_census_1970)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nPref\n\n\n都道府県名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\n国勢調査"
  },
  {
    "objectID": "man/jp_census_1970.html#都道府県別人口-1970年",
    "href": "man/jp_census_1970.html#都道府県別人口-1970年",
    "title": "PRcalc",
    "section": "",
    "text": "47都道府県の人口 (1970年)\n\n\n\ndata(jp_census_1970)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nPref\n\n\n都道府県名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\n国勢調査"
  },
  {
    "objectID": "man/index.html",
    "href": "man/index.html",
    "title": "PRcalc",
    "section": "",
    "text": "Calculate the disproportionality indices.\n\n\n\nindex(x, ...)\n\n## S3 method for class 'prcalc'\nindex(\n  x,\n  k = 2,\n  eta = 2,\n  alpha = 2,\n  unit = c(\"l2\", \"l1\", \"joint\"),\n  omit_zero = TRUE,\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\n…\n\n\nignored\n\n\n\n\nk\n\n\na parameter for Generalized Gallagher index. Default is 2.\n\n\n\n\neta\n\n\na parameter for Atkinson index. Default is 2.\n\n\n\n\nalpha\n\n\na parameter for alpha-divergence. alpha must be larger than 0. Default is 2.\n\n\n\n\nunit\n\n\nA unit of observation. This argument is valid only when p (e.g., votes or population) and q (e.g., seats or magnitudes) are two-dimensional structures. If “l2” (abbr. of \"level 2\"), the disproportionality is measured based on marginal distribution of level 2, such as parties or district. If “l1” (abbr. of \"level 1\"), the disproportionality is measured based on marginal distribution of level 1, such as states or region. If “joint”, the disproportionality is measured based on joint distribution of level 1 and 2. If you want to match the result of decompose(), use “joint”. Default is “l2”.\n\n\n\n\nomit_zero\n\n\nIf TRUE, parties with 0 votes and 0 seats are ignored. Default is TRUE.\n\n\n\n\n\n\na prcalc_index object.\n\n\n\n\n\nLaakso, Markku and Rein Taagepera. 1979. \"\"Effective\" Number of Parties: A Measure with Application to West Europe\". Comparative Political Studies. 12 (1): 3–27.\n\n\nGallagher, Michael. 1991. \"Proportionality, Disproportionality and Electoral Systems\". Electoral Studies. 10: 33–51.\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\nobj &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nobj_index &lt;- index(obj)\nobj_index\n\n            ID                         Index    Value\n1       dhondt                       D’Hondt 1.116833\n2       monroe                        Monroe 0.018918\n3       maxdev    Maximum Absolute Deviation 0.010461\n4     mm_ratio                 Max-Min ratio      Inf\n5          rae                           Rae 0.004664\n6           lh             Loosemore & Hanby 0.030315\n7      grofman                       Grofman 0.011677\n8     lijphart                      Lijphart 0.004069\n9    gallagher                     Gallagher 0.014609\n10 g_gallagher         Generalized Gallagher 0.014609\n11       gatev                         Gatev 0.032939\n12    ryabtsev                      Ryabtsev 0.023298\n13      szalai                        Szalai 0.555712\n14    w_szalai               Weighted Szalai 0.090661\n15          ap          Aleskerov & Platonov 1.042141\n16        gini                          Gini 0.036069\n17    atkinson                      Atkinson 1.000000\n18          sl                  Sainte-Laguë 0.018466\n19          cs                 Cox & Shugart 1.033646\n20      farina                        Farina 0.046282\n21      ortona                        Ortona 0.046909\n22          cd          Cosine Dissimilarity 0.000867\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.104611\n24         arr                  Lebeda’s ARR 0.008047\n25         srr                  Lebeda’s SRR 0.041482\n26        wdrr                 Lebeda’s WDRR 0.055081\n27          kl     Kullback-Leibler Surprise 0.016431\n28          lr    Likelihood Ratio Statistic      Inf\n29       chisq                   Chi Squared 0.004225\n30   hellinger            Hellinger Distance 0.087758\n31          ad              alpha-Divergence 0.009233\n\nobj_index[\"gallagher\"] # Extract Gallagher index\n\n gallagher \n0.01460875"
  },
  {
    "objectID": "man/index.html#calculate-the-disproportionality-indices.",
    "href": "man/index.html#calculate-the-disproportionality-indices.",
    "title": "PRcalc",
    "section": "",
    "text": "Calculate the disproportionality indices.\n\n\n\nindex(x, ...)\n\n## S3 method for class 'prcalc'\nindex(\n  x,\n  k = 2,\n  eta = 2,\n  alpha = 2,\n  unit = c(\"l2\", \"l1\", \"joint\"),\n  omit_zero = TRUE,\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\n…\n\n\nignored\n\n\n\n\nk\n\n\na parameter for Generalized Gallagher index. Default is 2.\n\n\n\n\neta\n\n\na parameter for Atkinson index. Default is 2.\n\n\n\n\nalpha\n\n\na parameter for alpha-divergence. alpha must be larger than 0. Default is 2.\n\n\n\n\nunit\n\n\nA unit of observation. This argument is valid only when p (e.g., votes or population) and q (e.g., seats or magnitudes) are two-dimensional structures. If “l2” (abbr. of \"level 2\"), the disproportionality is measured based on marginal distribution of level 2, such as parties or district. If “l1” (abbr. of \"level 1\"), the disproportionality is measured based on marginal distribution of level 1, such as states or region. If “joint”, the disproportionality is measured based on joint distribution of level 1 and 2. If you want to match the result of decompose(), use “joint”. Default is “l2”.\n\n\n\n\nomit_zero\n\n\nIf TRUE, parties with 0 votes and 0 seats are ignored. Default is TRUE.\n\n\n\n\n\n\na prcalc_index object.\n\n\n\n\n\nLaakso, Markku and Rein Taagepera. 1979. \"\"Effective\" Number of Parties: A Measure with Application to West Europe\". Comparative Political Studies. 12 (1): 3–27.\n\n\nGallagher, Michael. 1991. \"Proportionality, Disproportionality and Electoral Systems\". Electoral Studies. 10: 33–51.\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\nobj &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nobj_index &lt;- index(obj)\nobj_index\n\n            ID                         Index    Value\n1       dhondt                       D’Hondt 1.116833\n2       monroe                        Monroe 0.018918\n3       maxdev    Maximum Absolute Deviation 0.010461\n4     mm_ratio                 Max-Min ratio      Inf\n5          rae                           Rae 0.004664\n6           lh             Loosemore & Hanby 0.030315\n7      grofman                       Grofman 0.011677\n8     lijphart                      Lijphart 0.004069\n9    gallagher                     Gallagher 0.014609\n10 g_gallagher         Generalized Gallagher 0.014609\n11       gatev                         Gatev 0.032939\n12    ryabtsev                      Ryabtsev 0.023298\n13      szalai                        Szalai 0.555712\n14    w_szalai               Weighted Szalai 0.090661\n15          ap          Aleskerov & Platonov 1.042141\n16        gini                          Gini 0.036069\n17    atkinson                      Atkinson 1.000000\n18          sl                  Sainte-Laguë 0.018466\n19          cs                 Cox & Shugart 1.033646\n20      farina                        Farina 0.046282\n21      ortona                        Ortona 0.046909\n22          cd          Cosine Dissimilarity 0.000867\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.104611\n24         arr                  Lebeda’s ARR 0.008047\n25         srr                  Lebeda’s SRR 0.041482\n26        wdrr                 Lebeda’s WDRR 0.055081\n27          kl     Kullback-Leibler Surprise 0.016431\n28          lr    Likelihood Ratio Statistic      Inf\n29       chisq                   Chi Squared 0.004225\n30   hellinger            Hellinger Distance 0.087758\n31          ad              alpha-Divergence 0.009233\n\nobj_index[\"gallagher\"] # Extract Gallagher index\n\n gallagher \n0.01460875"
  },
  {
    "objectID": "man/plot.prcalc_index_compare.html",
    "href": "man/plot.prcalc_index_compare.html",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc_index_compare object.\n\n\n\n## S3 method for class 'prcalc_index_compare'\nplot(\n  x,\n  index = NULL,\n  style = \"bar\",\n  bar_width = 0.75,\n  point_size = 5,\n  facet = FALSE,\n  free_x = TRUE,\n  font_size = 12,\n  facet_col = 4,\n  legend_pos = \"bottom\",\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc_index_compare object.\n\n\n\n\nindex\n\n\na character vector of disproportionality indices. If NULL, all indices are displayed.\n\n\n\n\nstyle\n\n\nPlot style. Lollipop (“lollipop) or bar plot (”bar”). Default is “bar”.\n\n\n\n\nbar_width\n\n\nDefault is 0.75.\n\n\n\n\npoint_size\n\n\nDefault is 5.\n\n\n\n\nfacet\n\n\n政党ごとにfacet分割. Default is FALSE.\n\n\n\n\nfree_x\n\n\nDefault is TRUE.\n\n\n\n\nfont_size\n\n\na font size. Default is 12.\n\n\n\n\nfacet_col\n\n\na number of columns of facets. Default is 4.\n\n\n\n\nlegend_pos\n\n\na position of legend. Default is “bottom”\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\nlist(\"t = 0%\"   = index(pr_obj1),\n     \"t = 2.5%\" = index(pr_obj2),\n     \"t = 5%\"   = index(pr_obj3)) |&gt;\n  compare() |&gt;\n  plot()\n\n\n\n\n\n\n\nlist(\"t = 0%\"   = index(pr_obj1),\n     \"t = 2.5%\" = index(pr_obj2),\n     \"t = 5%\"   = index(pr_obj3)) |&gt;\n  compare() |&gt;\n  plot(index = c(\"lh\", \"gallagher\", \"rae\", \"dhondt\", \"ad\"))"
  },
  {
    "objectID": "man/plot.prcalc_index_compare.html#visualization-of-a-prcalc_index_compare-object.",
    "href": "man/plot.prcalc_index_compare.html#visualization-of-a-prcalc_index_compare-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc_index_compare object.\n\n\n\n## S3 method for class 'prcalc_index_compare'\nplot(\n  x,\n  index = NULL,\n  style = \"bar\",\n  bar_width = 0.75,\n  point_size = 5,\n  facet = FALSE,\n  free_x = TRUE,\n  font_size = 12,\n  facet_col = 4,\n  legend_pos = \"bottom\",\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc_index_compare object.\n\n\n\n\nindex\n\n\na character vector of disproportionality indices. If NULL, all indices are displayed.\n\n\n\n\nstyle\n\n\nPlot style. Lollipop (“lollipop) or bar plot (”bar”). Default is “bar”.\n\n\n\n\nbar_width\n\n\nDefault is 0.75.\n\n\n\n\npoint_size\n\n\nDefault is 5.\n\n\n\n\nfacet\n\n\n政党ごとにfacet分割. Default is FALSE.\n\n\n\n\nfree_x\n\n\nDefault is TRUE.\n\n\n\n\nfont_size\n\n\na font size. Default is 12.\n\n\n\n\nfacet_col\n\n\na number of columns of facets. Default is 4.\n\n\n\n\nlegend_pos\n\n\na position of legend. Default is “bottom”\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\nlist(\"t = 0%\"   = index(pr_obj1),\n     \"t = 2.5%\" = index(pr_obj2),\n     \"t = 5%\"   = index(pr_obj3)) |&gt;\n  compare() |&gt;\n  plot()\n\n\n\n\n\n\n\nlist(\"t = 0%\"   = index(pr_obj1),\n     \"t = 2.5%\" = index(pr_obj2),\n     \"t = 5%\"   = index(pr_obj3)) |&gt;\n  compare() |&gt;\n  plot(index = c(\"lh\", \"gallagher\", \"rae\", \"dhondt\", \"ad\"))"
  },
  {
    "objectID": "man/print.prcalc.html",
    "href": "man/print.prcalc.html",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc object.\n\n\n\n## S3 method for class 'prcalc'\nprint(\n  x,\n  prop = FALSE,\n  show_total = TRUE,\n  use_gt = FALSE,\n  digits = 3,\n  head = Inf,\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\nprop\n\n\nIf TRUE, voteshare and seatshare are displayed. Default is FALSE.\n\n\n\n\nshow_total\n\n\nIf TRUE, total vote (share) and seat (share) are displayed on the last column. Default is TRUE.\n\n\n\n\nuse_gt\n\n\nUse gt package? Default is FALSE.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\nhead\n\n\nFor example, if head = 6, only six rows are displayed. Default is Inf (entire rows).\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\nsummary.prcalc\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\njp2019 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nprint(jp2019)\n\nRaw:\n      Party     Vote\n1      自民 17712373\n2      公明  6536336\n3      立憲  7917721\n4      維新  4907844\n5      共産  4483411\n6      国民  3481078\n7    れいわ  2280253\n8      社民  1046012\n9       N国   987885\n10   安楽死   269052\n11     幸福   202278\n12 オリーブ   167897\n13   労働者    80055\n\nResult:\n      Party Vote\n1      自民   18\n2      公明    7\n3      立憲    8\n4      維新    5\n5      共産    5\n6      国民    3\n7    れいわ    2\n8      社民    1\n9       N国    1\n10   安楽死    0\n11     幸福    0\n12 オリーブ    0\n13   労働者    0\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: 50"
  },
  {
    "objectID": "man/print.prcalc.html#printing-a-prcalc-object.",
    "href": "man/print.prcalc.html#printing-a-prcalc-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc object.\n\n\n\n## S3 method for class 'prcalc'\nprint(\n  x,\n  prop = FALSE,\n  show_total = TRUE,\n  use_gt = FALSE,\n  digits = 3,\n  head = Inf,\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\nprop\n\n\nIf TRUE, voteshare and seatshare are displayed. Default is FALSE.\n\n\n\n\nshow_total\n\n\nIf TRUE, total vote (share) and seat (share) are displayed on the last column. Default is TRUE.\n\n\n\n\nuse_gt\n\n\nUse gt package? Default is FALSE.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\nhead\n\n\nFor example, if head = 6, only six rows are displayed. Default is Inf (entire rows).\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\nsummary.prcalc\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\njp2019 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nprint(jp2019)\n\nRaw:\n      Party     Vote\n1      自民 17712373\n2      公明  6536336\n3      立憲  7917721\n4      維新  4907844\n5      共産  4483411\n6      国民  3481078\n7    れいわ  2280253\n8      社民  1046012\n9       N国   987885\n10   安楽死   269052\n11     幸福   202278\n12 オリーブ   167897\n13   労働者    80055\n\nResult:\n      Party Vote\n1      自民   18\n2      公明    7\n3      立憲    8\n4      維新    5\n5      共産    5\n6      国民    3\n7    れいわ    2\n8      社民    1\n9       N国    1\n10   安楽死    0\n11     幸福    0\n12 オリーブ    0\n13   労働者    0\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: 50"
  },
  {
    "objectID": "man/summary.prcalc.html",
    "href": "man/summary.prcalc.html",
    "title": "PRcalc",
    "section": "",
    "text": "Summrizing a prcalc object.\n\n\n\n## S3 method for class 'prcalc'\nsummary(object, prop = FALSE, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nobject\n\n\na prcalc object.\n\n\n\n\nprop\n\n\nIf TRUE, voteshare and seatshare are displayed. Default is FALSE.\n\n\n\n\nuse_gt\n\n\nIf TRUE, a table is rendered using {gt} package. Default is FALSE.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\nprint.prcalc\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\njp2019 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nsummary(jp2019)\n\n      Party      Raw Dist\n1      自民 17712373   18\n2      公明  6536336    7\n3      立憲  7917721    8\n4      維新  4907844    5\n5      共産  4483411    5\n6      国民  3481078    3\n7    れいわ  2280253    2\n8      社民  1046012    1\n9       N国   987885    1\n10   安楽死   269052    0\n11     幸福   202278    0\n12 オリーブ   167897    0\n13   労働者    80055    0"
  },
  {
    "objectID": "man/summary.prcalc.html#summrizing-a-prcalc-object.",
    "href": "man/summary.prcalc.html#summrizing-a-prcalc-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Summrizing a prcalc object.\n\n\n\n## S3 method for class 'prcalc'\nsummary(object, prop = FALSE, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nobject\n\n\na prcalc object.\n\n\n\n\nprop\n\n\nIf TRUE, voteshare and seatshare are displayed. Default is FALSE.\n\n\n\n\nuse_gt\n\n\nIf TRUE, a table is rendered using {gt} package. Default is FALSE.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\nprint.prcalc\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\njp2019 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nsummary(jp2019)\n\n      Party      Raw Dist\n1      自民 17712373   18\n2      公明  6536336    7\n3      立憲  7917721    8\n4      維新  4907844    5\n5      共産  4483411    5\n6      国民  3481078    3\n7    れいわ  2280253    2\n8      社民  1046012    1\n9       N国   987885    1\n10   安楽死   269052    0\n11     幸福   202278    0\n12 オリーブ   167897    0\n13   労働者    80055    0"
  },
  {
    "objectID": "man/jp_upper_2019.html",
    "href": "man/jp_upper_2019.html",
    "title": "PRcalc",
    "section": "",
    "text": "参議院議員通常選挙比例区の得票数 (2019年)\n\n\n\ndata(jp_upper_2019)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_upper_2019.html#参議院議員通常選挙比例区得票数-2019年",
    "href": "man/jp_upper_2019.html#参議院議員通常選挙比例区得票数-2019年",
    "title": "PRcalc",
    "section": "",
    "text": "参議院議員通常選挙比例区の得票数 (2019年)\n\n\n\ndata(jp_upper_2019)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/plot.prcalc_decomposition_compare.html",
    "href": "man/plot.prcalc_decomposition_compare.html",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc_decomposition_compare object.\n\n\n\n## S3 method for class 'prcalc_decomposition_compare'\nplot(\n  x,\n  facet = FALSE,\n  bar_width = 0.75,\n  value_type = \"all\",\n  value_angle = 0,\n  value_size = 3,\n  x_angle = 0,\n  font_size = 12,\n  border_width = 0,\n  border_color = \"black\",\n  digits = 3,\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc_decomposition_compare object.\n\n\n\n\nfacet\n\n\nDefault is FALSE.\n\n\n\n\nbar_width\n\n\nDefault is 0.75.\n\n\n\n\nvalue_type\n\n\n“all”, “total”, or “none”. If “total”, only alpha-divergences are displayed. Default is “all”.\n\n\n\n\nvalue_angle\n\n\nAlgle of values. Default is 0.\n\n\n\n\nvalue_size\n\n\nDefault is 3. If value_type == “none”, it is ignored.\n\n\n\n\nx_angle\n\n\nan angle of x-ticks label (0 to 90). Defualt is 0.\n\n\n\n\nfont_size\n\n\na font size. Default is 12.\n\n\n\n\nborder_width\n\n\nwidth of border. Default is 0 (no border).\n\n\n\n\nborder_color\n\n\ncolor of border. Default is “black”.\n\n\n\n\ndigits\n\n\nDefault is 3.\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_lower_2021)\n\nobj1 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20),\n               method = \"dt\")\n\nobj2 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20),\n               method = \"hare\")\n\nobj3 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20),\n               method = \"msl\")\n\nobj4 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 23, 19, 11, 20, 29, 10, 5, 19),\n               method = \"dt\")\n\nobj5 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 23, 19, 11, 20, 29, 10, 5, 19),\n               method = \"msl\")\n\ncompare(list(\"D'Hondt\"     = decompose(obj1),\n             \"Hare\"        = decompose(obj2),\n             \"Modified-SL\" = decompose(obj3))) |&gt;\n  plot()\n\n\n\n\n\n\n\ncompare(list(\"Model 1\" = decompose(obj1),\n             \"Model 2\" = decompose(obj4),\n             \"Model 3\" = decompose(obj5))) |&gt;\n  plot(facet = TRUE, value_type = \"total\", digits = 5)"
  },
  {
    "objectID": "man/plot.prcalc_decomposition_compare.html#visualization-of-a-prcalc_decomposition_compare-object.",
    "href": "man/plot.prcalc_decomposition_compare.html#visualization-of-a-prcalc_decomposition_compare-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc_decomposition_compare object.\n\n\n\n## S3 method for class 'prcalc_decomposition_compare'\nplot(\n  x,\n  facet = FALSE,\n  bar_width = 0.75,\n  value_type = \"all\",\n  value_angle = 0,\n  value_size = 3,\n  x_angle = 0,\n  font_size = 12,\n  border_width = 0,\n  border_color = \"black\",\n  digits = 3,\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc_decomposition_compare object.\n\n\n\n\nfacet\n\n\nDefault is FALSE.\n\n\n\n\nbar_width\n\n\nDefault is 0.75.\n\n\n\n\nvalue_type\n\n\n“all”, “total”, or “none”. If “total”, only alpha-divergences are displayed. Default is “all”.\n\n\n\n\nvalue_angle\n\n\nAlgle of values. Default is 0.\n\n\n\n\nvalue_size\n\n\nDefault is 3. If value_type == “none”, it is ignored.\n\n\n\n\nx_angle\n\n\nan angle of x-ticks label (0 to 90). Defualt is 0.\n\n\n\n\nfont_size\n\n\na font size. Default is 12.\n\n\n\n\nborder_width\n\n\nwidth of border. Default is 0 (no border).\n\n\n\n\nborder_color\n\n\ncolor of border. Default is “black”.\n\n\n\n\ndigits\n\n\nDefault is 3.\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_lower_2021)\n\nobj1 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20),\n               method = \"dt\")\n\nobj2 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20),\n               method = \"hare\")\n\nobj3 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20),\n               method = \"msl\")\n\nobj4 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 23, 19, 11, 20, 29, 10, 5, 19),\n               method = \"dt\")\n\nobj5 &lt;- prcalc(jp_lower_2021,\n               m = c(8, 13, 19, 23, 19, 11, 20, 29, 10, 5, 19),\n               method = \"msl\")\n\ncompare(list(\"D'Hondt\"     = decompose(obj1),\n             \"Hare\"        = decompose(obj2),\n             \"Modified-SL\" = decompose(obj3))) |&gt;\n  plot()\n\n\n\n\n\n\n\ncompare(list(\"Model 1\" = decompose(obj1),\n             \"Model 2\" = decompose(obj4),\n             \"Model 3\" = decompose(obj5))) |&gt;\n  plot(facet = TRUE, value_type = \"total\", digits = 5)"
  },
  {
    "objectID": "man/jp_census_1920.html",
    "href": "man/jp_census_1920.html",
    "title": "PRcalc",
    "section": "",
    "text": "47都道府県の人口\n\n\n\ndata(jp_census_1920)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nPref\n\n\n都道府県名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\n国勢調査"
  },
  {
    "objectID": "man/jp_census_1920.html#都道府県別人口-1920年",
    "href": "man/jp_census_1920.html#都道府県別人口-1920年",
    "title": "PRcalc",
    "section": "",
    "text": "47都道府県の人口\n\n\n\ndata(jp_census_1920)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nPref\n\n\n都道府県名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\n国勢調査"
  },
  {
    "objectID": "man/print.prcalc_compare.html",
    "href": "man/print.prcalc_compare.html",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_compare object.\n\n\n\n## S3 method for class 'prcalc_compare'\nprint(x, subset = NULL, prop = FALSE, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_compare object.\n\n\n\n\nsubset\n\n\na\n\n\n\n\nprop\n\n\na\n\n\n\n\nuse_gt\n\n\nUse gt packages? Default is FALSE.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\ncompare(list(\"t = 0%\" = pr_obj1, \"t = 2.5%\" = pr_obj2, \"t = 5%\" = pr_obj3))\n\n      Party t = 0% t = 2.5% t = 5%\n1      自民     18       19     20\n2      公明      7        7      7\n3      立憲      8        9      9\n4      維新      5        5      5\n5      共産      5        5      5\n6      国民      3        3      4\n7    れいわ      2        2      0\n8      社民      1        0      0\n9       N国      1        0      0\n10   安楽死      0        0      0\n11     幸福      0        0      0\n12 オリーブ      0        0      0\n13   労働者      0        0      0\n\nlist(\"t = 0%\"   = pr_obj1,\n     \"t = 2.5%\" = pr_obj2,\n     \"t = 5%\"   = pr_obj3) |&gt;\n  compare() |&gt;\n  print()\n\n      Party t = 0% t = 2.5% t = 5%\n1      自民     18       19     20\n2      公明      7        7      7\n3      立憲      8        9      9\n4      維新      5        5      5\n5      共産      5        5      5\n6      国民      3        3      4\n7    れいわ      2        2      0\n8      社民      1        0      0\n9       N国      1        0      0\n10   安楽死      0        0      0\n11     幸福      0        0      0\n12 オリーブ      0        0      0\n13   労働者      0        0      0\n\nlist(\"t = 0%\"   = pr_obj1,\n     \"t = 2.5%\" = pr_obj2,\n     \"t = 5%\"   = pr_obj3) |&gt;\n  compare() |&gt;\n  print(subset = c(\"自民\", \"公明\", \"立憲\", \"共産\", \"維新\"))\n\n  Party t = 0% t = 2.5% t = 5%\n1  自民     18       19     20\n2  公明      7        7      7\n3  立憲      8        9      9\n4  維新      5        5      5\n5  共産      5        5      5"
  },
  {
    "objectID": "man/print.prcalc_compare.html#printing-a-prcalc_compare-object.",
    "href": "man/print.prcalc_compare.html#printing-a-prcalc_compare-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_compare object.\n\n\n\n## S3 method for class 'prcalc_compare'\nprint(x, subset = NULL, prop = FALSE, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_compare object.\n\n\n\n\nsubset\n\n\na\n\n\n\n\nprop\n\n\na\n\n\n\n\nuse_gt\n\n\nUse gt packages? Default is FALSE.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\ncompare(list(\"t = 0%\" = pr_obj1, \"t = 2.5%\" = pr_obj2, \"t = 5%\" = pr_obj3))\n\n      Party t = 0% t = 2.5% t = 5%\n1      自民     18       19     20\n2      公明      7        7      7\n3      立憲      8        9      9\n4      維新      5        5      5\n5      共産      5        5      5\n6      国民      3        3      4\n7    れいわ      2        2      0\n8      社民      1        0      0\n9       N国      1        0      0\n10   安楽死      0        0      0\n11     幸福      0        0      0\n12 オリーブ      0        0      0\n13   労働者      0        0      0\n\nlist(\"t = 0%\"   = pr_obj1,\n     \"t = 2.5%\" = pr_obj2,\n     \"t = 5%\"   = pr_obj3) |&gt;\n  compare() |&gt;\n  print()\n\n      Party t = 0% t = 2.5% t = 5%\n1      自民     18       19     20\n2      公明      7        7      7\n3      立憲      8        9      9\n4      維新      5        5      5\n5      共産      5        5      5\n6      国民      3        3      4\n7    れいわ      2        2      0\n8      社民      1        0      0\n9       N国      1        0      0\n10   安楽死      0        0      0\n11     幸福      0        0      0\n12 オリーブ      0        0      0\n13   労働者      0        0      0\n\nlist(\"t = 0%\"   = pr_obj1,\n     \"t = 2.5%\" = pr_obj2,\n     \"t = 5%\"   = pr_obj3) |&gt;\n  compare() |&gt;\n  print(subset = c(\"自民\", \"公明\", \"立憲\", \"共産\", \"維新\"))\n\n  Party t = 0% t = 2.5% t = 5%\n1  自民     18       19     20\n2  公明      7        7      7\n3  立憲      8        9      9\n4  維新      5        5      5\n5  共産      5        5      5"
  },
  {
    "objectID": "man/kr_lower_2008.html",
    "href": "man/kr_lower_2008.html",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2008年)\n\n\n\ndata(kr_lower_2008)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/kr_lower_2008.html#韓国国会議員総選挙比例区得票数-2008年",
    "href": "man/kr_lower_2008.html#韓国国会議員総選挙比例区得票数-2008年",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2008年)\n\n\n\ndata(kr_lower_2008)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/plot.prcalc_compare.html",
    "href": "man/plot.prcalc_compare.html",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc_compare object.\n\n\n\n## S3 method for class 'prcalc_compare'\nplot(\n  x,\n  subset_p = NULL,\n  bar_width = 0.75,\n  facet = FALSE,\n  free_y = TRUE,\n  font_size = 12,\n  angle = 0,\n  facet_col = 4,\n  legend_pos = \"bottom\",\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc_compare object.\n\n\n\n\nsubset_p\n\n\na character vector. A subset of parties.\n\n\n\n\nbar_width\n\n\nDefault is 0.75.\n\n\n\n\nfacet\n\n\nSeparate facets by parties? Default is FALSE.\n\n\n\n\nfree_y\n\n\nDefault is TRUE.\n\n\n\n\nfont_size\n\n\na font size. Default is 12.\n\n\n\n\nangle\n\n\nan angle of x-ticks label (0 to 90). Defualt is 0.\n\n\n\n\nfacet_col\n\n\na number of columns of facets. Default is 4.\n\n\n\n\nlegend_pos\n\n\na position of legend. Default is “bottom”\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\nlist(\"t = 0%\"   = pr_obj1,\n     \"t = 2.5%\" = pr_obj2,\n     \"t = 5%\"   = pr_obj3) |&gt;\n  compare() |&gt;\n  plot()"
  },
  {
    "objectID": "man/plot.prcalc_compare.html#visualization-of-a-prcalc_compare-object.",
    "href": "man/plot.prcalc_compare.html#visualization-of-a-prcalc_compare-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc_compare object.\n\n\n\n## S3 method for class 'prcalc_compare'\nplot(\n  x,\n  subset_p = NULL,\n  bar_width = 0.75,\n  facet = FALSE,\n  free_y = TRUE,\n  font_size = 12,\n  angle = 0,\n  facet_col = 4,\n  legend_pos = \"bottom\",\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc_compare object.\n\n\n\n\nsubset_p\n\n\na character vector. A subset of parties.\n\n\n\n\nbar_width\n\n\nDefault is 0.75.\n\n\n\n\nfacet\n\n\nSeparate facets by parties? Default is FALSE.\n\n\n\n\nfree_y\n\n\nDefault is TRUE.\n\n\n\n\nfont_size\n\n\na font size. Default is 12.\n\n\n\n\nangle\n\n\nan angle of x-ticks label (0 to 90). Defualt is 0.\n\n\n\n\nfacet_col\n\n\na number of columns of facets. Default is 4.\n\n\n\n\nlegend_pos\n\n\na position of legend. Default is “bottom”\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\nlist(\"t = 0%\"   = pr_obj1,\n     \"t = 2.5%\" = pr_obj2,\n     \"t = 5%\"   = pr_obj3) |&gt;\n  compare() |&gt;\n  plot()"
  },
  {
    "objectID": "man/decompose2.html",
    "href": "man/decompose2.html",
    "title": "PRcalc",
    "section": "",
    "text": "Decomposition using a prcalc object with two-step.\n\n\n\ndecompose2(x, alpha = 2, ...)\n\ndecompose2(x, alpha = 2, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\nalpha\n\n\nDefault is 2 and it must be larger than 0.\n\n\n\n\n…\n\n\nignored\n\n\n\n\n\n\na prcalc_decomposition object.\n\n\n\n\n\nYuta, Kamahara. \"The Desired Political Entropy as the Measure of Unequal Representation: Disproportionality and Malapportionment\". Working paper.\n\n\n\n\n\ndecompose, decompose3\n\n\n\n\nlibrary(PRcalc)\n\n# Using a prcalc object\ndata(jp_lower_2021)\n\nobj &lt;- prcalc(jp_lower_2021,\n              m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n              method = \"hare\")\n\ndecompose2(obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n      0.03952282       0.00324211       0.03628070 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/decompose2.html#decomposition-using-a-prcalc-object-with-two-step.",
    "href": "man/decompose2.html#decomposition-using-a-prcalc-object-with-two-step.",
    "title": "PRcalc",
    "section": "",
    "text": "Decomposition using a prcalc object with two-step.\n\n\n\ndecompose2(x, alpha = 2, ...)\n\ndecompose2(x, alpha = 2, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\nalpha\n\n\nDefault is 2 and it must be larger than 0.\n\n\n\n\n…\n\n\nignored\n\n\n\n\n\n\na prcalc_decomposition object.\n\n\n\n\n\nYuta, Kamahara. \"The Desired Political Entropy as the Measure of Unequal Representation: Disproportionality and Malapportionment\". Working paper.\n\n\n\n\n\ndecompose, decompose3\n\n\n\n\nlibrary(PRcalc)\n\n# Using a prcalc object\ndata(jp_lower_2021)\n\nobj &lt;- prcalc(jp_lower_2021,\n              m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n              method = \"hare\")\n\ndecompose2(obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n      0.03952282       0.00324211       0.03628070 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/decompose3.html",
    "href": "man/decompose3.html",
    "title": "PRcalc",
    "section": "",
    "text": "Decomposition using a prcalc object with three-step.\n\n\n\ndecompose3(x, ...)\n\n## S3 method for class 'prcalc'\ndecompose3(x, special = NULL, alpha = 0, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\n…\n\n\nignored\n\n\n\n\nspecial\n\n\na character. names of special district.\n\n\n\n\nalpha\n\n\nDefault is 0.\n\n\n\n\n\n\na prcalc_decomposition object.\n\n\n\n\n\nYuta, Kamahara, Junichiro Wada, and Yuko Kasuya. 2021. \"Malapportionment in space and time: Decompose it!\" Electoral Studies. 71: 102301.\n\n\n\n\n\ndecompose, decompose2\ndecompose\n\n\n\n\nlibrary(PRcalc)\n\ndata(nz_district)\n\nnz_1949 &lt;- nz_district |&gt;\n  subset(year == 1949) |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")\n\ndecompose3(nz_1949, special = \"Maori\")\n\nalpha = 0 \nalpha-divergence          Special  Reapportionment    Redistricting \n    1.398816e-02     4.686074e-03     3.761550e-06     9.298328e-03 \n\nNote: \"alha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/decompose3.html#decomposition-using-a-prcalc-object-with-three-step.",
    "href": "man/decompose3.html#decomposition-using-a-prcalc-object-with-three-step.",
    "title": "PRcalc",
    "section": "",
    "text": "Decomposition using a prcalc object with three-step.\n\n\n\ndecompose3(x, ...)\n\n## S3 method for class 'prcalc'\ndecompose3(x, special = NULL, alpha = 0, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\n…\n\n\nignored\n\n\n\n\nspecial\n\n\na character. names of special district.\n\n\n\n\nalpha\n\n\nDefault is 0.\n\n\n\n\n\n\na prcalc_decomposition object.\n\n\n\n\n\nYuta, Kamahara, Junichiro Wada, and Yuko Kasuya. 2021. \"Malapportionment in space and time: Decompose it!\" Electoral Studies. 71: 102301.\n\n\n\n\n\ndecompose, decompose2\ndecompose\n\n\n\n\nlibrary(PRcalc)\n\ndata(nz_district)\n\nnz_1949 &lt;- nz_district |&gt;\n  subset(year == 1949) |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")\n\ndecompose3(nz_1949, special = \"Maori\")\n\nalpha = 0 \nalpha-divergence          Special  Reapportionment    Redistricting \n    1.398816e-02     4.686074e-03     3.761550e-06     9.298328e-03 \n\nNote: \"alha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/it_distirct_2006.html",
    "href": "man/it_distirct_2006.html",
    "title": "PRcalc",
    "section": "",
    "text": "List of electoral district in Italy (2006)\n\n\n\ndata(\"it_distirct_2006\")\n\n\n\n\nA data frame with 27 rows and 3 variables:\n\n\nregion\n\n\nnames of region\n\n\ndistrict\n\n\nnames of district\n\n\npopulation\n\n\nnumber of population\n\n\nmag\n\n\nelectoral magnitude\n\n\n\n\n\nThere are four special region—\"EUROPA\", \"AMERICA MERIDIONALE\", \"AMERICA SETTENTRIONALE E CENTRALE\", and \"AFRICA ASIA OCEANIA ANTARTIDE\"."
  },
  {
    "objectID": "man/it_distirct_2006.html#list-of-electoral-district-in-italy-2006",
    "href": "man/it_distirct_2006.html#list-of-electoral-district-in-italy-2006",
    "title": "PRcalc",
    "section": "",
    "text": "List of electoral district in Italy (2006)\n\n\n\ndata(\"it_distirct_2006\")\n\n\n\n\nA data frame with 27 rows and 3 variables:\n\n\nregion\n\n\nnames of region\n\n\ndistrict\n\n\nnames of district\n\n\npopulation\n\n\nnumber of population\n\n\nmag\n\n\nelectoral magnitude\n\n\n\n\n\nThere are four special region—\"EUROPA\", \"AMERICA MERIDIONALE\", \"AMERICA SETTENTRIONALE E CENTRALE\", and \"AFRICA ASIA OCEANIA ANTARTIDE\"."
  },
  {
    "objectID": "man/plot.prcalc.html",
    "href": "man/plot.prcalc.html",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc object.\n\n\n\n## S3 method for class 'prcalc'\nplot(\n  x,\n  type = \"both\",\n  prop = TRUE,\n  show_total = TRUE,\n  by = \"block\",\n  subset_b = NULL,\n  subset_p = NULL,\n  free_y = FALSE,\n  font_size = 12,\n  angle = 0,\n  facet_col = 4,\n  legend_pos = \"bottom\",\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\ntype\n\n\na plot of votes (“raw”), allocation (“dist”), or both (“both”). Default is “both”.\n\n\n\n\nprop\n\n\nOutput at a percentage. If type is “both”, it is ignored. Default is TRUE.\n\n\n\n\nshow_total\n\n\nIf TRUE, a facet names \"Total\" is diplayed. Default is TRUE.\n\n\n\n\nby\n\n\nFacets by blocks (“block”) or parties (“party”). Default is “block”.\n\n\n\n\nsubset_b\n\n\na character vector of block names.\n\n\n\n\nsubset_p\n\n\na character vector of party names.\n\n\n\n\nfree_y\n\n\nIf FALSE, y-axes are fixed over all facets. Default is TRUE.\n\n\n\n\nfont_size\n\n\na font size.\n\n\n\n\nangle\n\n\nan angle of x-ticks label (0 to 90). Defualt is 0.\n\n\n\n\nfacet_col\n\n\na number of columns of facets.\n\n\n\n\nlegend_pos\n\n\na position of legend. Default is “bottom”\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\ndata(jp_lower_2021)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\nplot(pr_obj1)\n\n\n\n\n\n\n\npr_obj2 &lt;- prcalc(jp_lower_2021,\n                  m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n                  method = \"hare\")\nplot(pr_obj2, angle = 90)\n\n\n\n\n\n\n\nplot(pr_obj2, subset_p = c(\"自民\", \"公明\", \"立憲\", \"維新\", \"国民\"))\n\n\n\n\n\n\n\nplot(pr_obj2, subset_b = c(\"Tokyo\", \"Kinki\"), facet_col = 1)\n\n\n\n\n\n\n\nplot(pr_obj2, by = \"party\",\n     subset_p = c(\"自民\", \"公明\", \"立憲\", \"維新\"),\n     subset_b = c(\"Hokkaido\", \"Tohoku\", \"Tokyo\", \"Kinki\"))"
  },
  {
    "objectID": "man/plot.prcalc.html#visualization-of-a-prcalc-object.",
    "href": "man/plot.prcalc.html#visualization-of-a-prcalc-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc object.\n\n\n\n## S3 method for class 'prcalc'\nplot(\n  x,\n  type = \"both\",\n  prop = TRUE,\n  show_total = TRUE,\n  by = \"block\",\n  subset_b = NULL,\n  subset_p = NULL,\n  free_y = FALSE,\n  font_size = 12,\n  angle = 0,\n  facet_col = 4,\n  legend_pos = \"bottom\",\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\ntype\n\n\na plot of votes (“raw”), allocation (“dist”), or both (“both”). Default is “both”.\n\n\n\n\nprop\n\n\nOutput at a percentage. If type is “both”, it is ignored. Default is TRUE.\n\n\n\n\nshow_total\n\n\nIf TRUE, a facet names \"Total\" is diplayed. Default is TRUE.\n\n\n\n\nby\n\n\nFacets by blocks (“block”) or parties (“party”). Default is “block”.\n\n\n\n\nsubset_b\n\n\na character vector of block names.\n\n\n\n\nsubset_p\n\n\na character vector of party names.\n\n\n\n\nfree_y\n\n\nIf FALSE, y-axes are fixed over all facets. Default is TRUE.\n\n\n\n\nfont_size\n\n\na font size.\n\n\n\n\nangle\n\n\nan angle of x-ticks label (0 to 90). Defualt is 0.\n\n\n\n\nfacet_col\n\n\na number of columns of facets.\n\n\n\n\nlegend_pos\n\n\na position of legend. Default is “bottom”\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\ndata(jp_lower_2021)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\nplot(pr_obj1)\n\n\n\n\n\n\n\npr_obj2 &lt;- prcalc(jp_lower_2021,\n                  m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n                  method = \"hare\")\nplot(pr_obj2, angle = 90)\n\n\n\n\n\n\n\nplot(pr_obj2, subset_p = c(\"自民\", \"公明\", \"立憲\", \"維新\", \"国民\"))\n\n\n\n\n\n\n\nplot(pr_obj2, subset_b = c(\"Tokyo\", \"Kinki\"), facet_col = 1)\n\n\n\n\n\n\n\nplot(pr_obj2, by = \"party\",\n     subset_p = c(\"自民\", \"公明\", \"立憲\", \"維新\"),\n     subset_b = c(\"Hokkaido\", \"Tohoku\", \"Tokyo\", \"Kinki\"))"
  },
  {
    "objectID": "man/nz_district.html",
    "href": "man/nz_district.html",
    "title": "PRcalc",
    "section": "",
    "text": "List of electoral district in New Zealand\n\n\n\ndata(nz_district)\n\n\n\n\nA data frame with 1800 rows and 5 variables:\n\n\nyear\n\n\nelection year\n\n\nregion\n\n\nnames of region. Maori is a special region.\n\n\ndistrict\n\n\nnames of districts\n\n\nelectorates\n\n\nnumber of electorates\n\n\nmagnitude\n\n\nelectoral magnitude"
  },
  {
    "objectID": "man/nz_district.html#list-of-electoral-district-in-new-zealand",
    "href": "man/nz_district.html#list-of-electoral-district-in-new-zealand",
    "title": "PRcalc",
    "section": "",
    "text": "List of electoral district in New Zealand\n\n\n\ndata(nz_district)\n\n\n\n\nA data frame with 1800 rows and 5 variables:\n\n\nyear\n\n\nelection year\n\n\nregion\n\n\nnames of region. Maori is a special region.\n\n\ndistrict\n\n\nnames of districts\n\n\nelectorates\n\n\nnumber of electorates\n\n\nmagnitude\n\n\nelectoral magnitude"
  },
  {
    "objectID": "man/jp_lower_2009.html",
    "href": "man/jp_lower_2009.html",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2009年)\n\n\n\ndata(jp_lower_2009)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2009.html#衆議院議員総選挙比例区得票数-2009年",
    "href": "man/jp_lower_2009.html#衆議院議員総選挙比例区得票数-2009年",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2009年)\n\n\n\ndata(jp_lower_2009)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2021.html",
    "href": "man/jp_lower_2021.html",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2021年)\n\n\n\ndata(jp_lower_2021)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2021.html#衆議院議員総選挙比例区得票数-2021年",
    "href": "man/jp_lower_2021.html#衆議院議員総選挙比例区得票数-2021年",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2021年)\n\n\n\ndata(jp_lower_2021)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/prcalc.html",
    "href": "man/prcalc.html",
    "title": "PRcalc",
    "section": "",
    "text": "Proportional Representation Calculator\n\n\n\nprcalc(x, m, method, extra = NULL, threshold = 0)\n\n\n\n\n\n\n\nx\n\n\na data.frame or tibble object.\n\n\n\n\nm\n\n\na numeric vector of district magnitude.\n\n\n\n\nmethod\n\n\na character string giving a method for computing seat allocation. See \"Allocation methods\" section.\n\n\n\n\nextra\n\n\na numeric vector of length m. If method is “custom divisor” (“cd”) or “custom quota” (“cq”), this parameter is mandatory. See \"About custom methods\" section.\n\n\n\n\nthreshold\n\n\na threshold. It must be equal or larger than 0 (0%) and smaller than 0.1 (10%). a default is 0.\n\n\n\n\n\n\na prcalc object\n\n\n\naaa\n\n\n\nCustom methods (“custom divisor” and “custom quota”) require extra parameter. In the case of “custom divisor” (“cd”), a numeric vector of the same length as the magnitude (m) must be specified. If the magnitude (m) is a vector of length 2 or longer, the extra must have a length equal to max(m). For example, if m = c(5, 7, 4), then the length of the extra must be 7.\nIn the case of “custom quota”, extra must be a vector of the same length as m. For example, if m = c(5, 7, 4), extra must also be a numeric vector of length 3. If length of extra is 1, the same quota is applied to all blocks.\n\n\n\nprint.prcalc, summary.prcalc, plot.prcalc\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\ndata(jp_lower_2021)\nprcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nRaw:\n      Party     Vote\n1      自民 17712373\n2      公明  6536336\n3      立憲  7917721\n4      維新  4907844\n5      共産  4483411\n6      国民  3481078\n7    れいわ  2280253\n8      社民  1046012\n9       N国   987885\n10   安楽死   269052\n11     幸福   202278\n12 オリーブ   167897\n13   労働者    80055\n\nResult:\n      Party Vote\n1      自民   18\n2      公明    7\n3      立憲    8\n4      維新    5\n5      共産    5\n6      国民    3\n7    れいわ    2\n8      社民    1\n9       N国    1\n10   安楽死    0\n11     幸福    0\n12 オリーブ    0\n13   労働者    0\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: 50\n\njapan_2021 &lt;- prcalc(jp_lower_2021,\n                     m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n                     method = \"hare\")\njapan_2021\n\nRaw:\n    Party Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1    自民   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2    公明   294371  456287    823930      850667  715450   322535  784976\n3    立憲   682913  991505   1391149     1651562 1293281   773076 1485947\n4    共産   207189  292830    444115      534493  670340   225551  408606\n5    維新   215344  258690    617531      863897  858577   361476  694630\n6    国民    73621  195754    298056      384482  306180   133600  382734\n7    社民    41248  101442     97963      124447   92995    71185   84220\n8    れ新   102086  143265    239592      302675  360387   111281  273208\n9     N党    42916   52664     87702      111298   92353    43529   98238\n10 支なし    46142       0         0           0       0        0       0\n11   第一        0       0         0           0   33661        0       0\n12 やまと        0       0         0           0   16970        0       0\n13 コロナ        0       0         0           0    6620        0       0\n     Kinki Chugoku Shikoku  Kyushu    Total\n1  2407699 1352723  664805 2250966 19914883\n2  1155683  436220  233407 1040756  7114282\n3  1090666  573324  291871 1266801 11492095\n4   736156  173117  108021  365658  4166076\n5  3180219  286302  173826  540338  8050830\n6   303480  113899  122082  279509  2593397\n7   100980   52638   30249  221221  1018588\n8   292483   94446   52941  243284  2215648\n9   111539   36758   21285   98506   796788\n10       0       0       0       0    46142\n11       0       0       0       0    33661\n12       0       0       0       0    16970\n13       0       0       0       0     6620\n\nResult:\n    Party Hokkaido Tohoku Kitakanto Minamikanto Tokyo Hokuriku Tokai Kinki\n1    自民        3      6         7           7     5        5     8     8\n2    公明        1      2         3           2     2        1     3     4\n3    立憲        2      3         5           5     4        3     5     4\n4    共産        1      1         1           2     2        1     1     2\n5    維新        1      1         2           3     2        1     2    10\n6    国民        0      1         1           1     1        0     1     1\n7    社民        0      0         0           0     0        0     0     0\n8    れ新        0      0         1           1     1        0     1     1\n9     N党        0      0         0           0     0        0     0     0\n10 支なし        0      0         0           0     0        0     0     0\n11   第一        0      0         0           0     0        0     0     0\n12 やまと        0      0         0           0     0        0     0     0\n13 コロナ        0      0         0           0     0        0     0     0\n   Chugoku Shikoku Kyushu Total\n1        5       2      8    64\n2        2       1      3    24\n3        2       1      4    38\n4        1       0      1    13\n5        1       1      2    26\n6        0       1      1     8\n7        0       0      1     1\n8        0       0      1     6\n9        0       0      0     0\n10       0       0      0     0\n11       0       0      0     0\n12       0       0      0     0\n13       0       0      0     0\n\nParameters:\n  Allocation method: Hare-Niemeyer quota \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          14          20          21          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          30          11           6          21"
  },
  {
    "objectID": "man/prcalc.html#proportional-representation-calculator",
    "href": "man/prcalc.html#proportional-representation-calculator",
    "title": "PRcalc",
    "section": "",
    "text": "Proportional Representation Calculator\n\n\n\nprcalc(x, m, method, extra = NULL, threshold = 0)\n\n\n\n\n\n\n\nx\n\n\na data.frame or tibble object.\n\n\n\n\nm\n\n\na numeric vector of district magnitude.\n\n\n\n\nmethod\n\n\na character string giving a method for computing seat allocation. See \"Allocation methods\" section.\n\n\n\n\nextra\n\n\na numeric vector of length m. If method is “custom divisor” (“cd”) or “custom quota” (“cq”), this parameter is mandatory. See \"About custom methods\" section.\n\n\n\n\nthreshold\n\n\na threshold. It must be equal or larger than 0 (0%) and smaller than 0.1 (10%). a default is 0.\n\n\n\n\n\n\na prcalc object\n\n\n\naaa\n\n\n\nCustom methods (“custom divisor” and “custom quota”) require extra parameter. In the case of “custom divisor” (“cd”), a numeric vector of the same length as the magnitude (m) must be specified. If the magnitude (m) is a vector of length 2 or longer, the extra must have a length equal to max(m). For example, if m = c(5, 7, 4), then the length of the extra must be 7.\nIn the case of “custom quota”, extra must be a vector of the same length as m. For example, if m = c(5, 7, 4), extra must also be a numeric vector of length 3. If length of extra is 1, the same quota is applied to all blocks.\n\n\n\nprint.prcalc, summary.prcalc, plot.prcalc\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\ndata(jp_lower_2021)\nprcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nRaw:\n      Party     Vote\n1      自民 17712373\n2      公明  6536336\n3      立憲  7917721\n4      維新  4907844\n5      共産  4483411\n6      国民  3481078\n7    れいわ  2280253\n8      社民  1046012\n9       N国   987885\n10   安楽死   269052\n11     幸福   202278\n12 オリーブ   167897\n13   労働者    80055\n\nResult:\n      Party Vote\n1      自民   18\n2      公明    7\n3      立憲    8\n4      維新    5\n5      共産    5\n6      国民    3\n7    れいわ    2\n8      社民    1\n9       N国    1\n10   安楽死    0\n11     幸福    0\n12 オリーブ    0\n13   労働者    0\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: 50\n\njapan_2021 &lt;- prcalc(jp_lower_2021,\n                     m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n                     method = \"hare\")\njapan_2021\n\nRaw:\n    Party Hokkaido  Tohoku Kitakanto Minamikanto   Tokyo Hokuriku   Tokai\n1    自民   863300 1628233   2172065     2590787 2000084  1468380 2515841\n2    公明   294371  456287    823930      850667  715450   322535  784976\n3    立憲   682913  991505   1391149     1651562 1293281   773076 1485947\n4    共産   207189  292830    444115      534493  670340   225551  408606\n5    維新   215344  258690    617531      863897  858577   361476  694630\n6    国民    73621  195754    298056      384482  306180   133600  382734\n7    社民    41248  101442     97963      124447   92995    71185   84220\n8    れ新   102086  143265    239592      302675  360387   111281  273208\n9     N党    42916   52664     87702      111298   92353    43529   98238\n10 支なし    46142       0         0           0       0        0       0\n11   第一        0       0         0           0   33661        0       0\n12 やまと        0       0         0           0   16970        0       0\n13 コロナ        0       0         0           0    6620        0       0\n     Kinki Chugoku Shikoku  Kyushu    Total\n1  2407699 1352723  664805 2250966 19914883\n2  1155683  436220  233407 1040756  7114282\n3  1090666  573324  291871 1266801 11492095\n4   736156  173117  108021  365658  4166076\n5  3180219  286302  173826  540338  8050830\n6   303480  113899  122082  279509  2593397\n7   100980   52638   30249  221221  1018588\n8   292483   94446   52941  243284  2215648\n9   111539   36758   21285   98506   796788\n10       0       0       0       0    46142\n11       0       0       0       0    33661\n12       0       0       0       0    16970\n13       0       0       0       0     6620\n\nResult:\n    Party Hokkaido Tohoku Kitakanto Minamikanto Tokyo Hokuriku Tokai Kinki\n1    自民        3      6         7           7     5        5     8     8\n2    公明        1      2         3           2     2        1     3     4\n3    立憲        2      3         5           5     4        3     5     4\n4    共産        1      1         1           2     2        1     1     2\n5    維新        1      1         2           3     2        1     2    10\n6    国民        0      1         1           1     1        0     1     1\n7    社民        0      0         0           0     0        0     0     0\n8    れ新        0      0         1           1     1        0     1     1\n9     N党        0      0         0           0     0        0     0     0\n10 支なし        0      0         0           0     0        0     0     0\n11   第一        0      0         0           0     0        0     0     0\n12 やまと        0      0         0           0     0        0     0     0\n13 コロナ        0      0         0           0     0        0     0     0\n   Chugoku Shikoku Kyushu Total\n1        5       2      8    64\n2        2       1      3    24\n3        2       1      4    38\n4        1       0      1    13\n5        1       1      2    26\n6        0       1      1     8\n7        0       0      1     1\n8        0       0      1     6\n9        0       0      0     0\n10       0       0      0     0\n11       0       0      0     0\n12       0       0      0     0\n13       0       0      0     0\n\nParameters:\n  Allocation method: Hare-Niemeyer quota \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n   Hokkaido      Tohoku   Kitakanto Minamikanto       Tokyo    Hokuriku \n          8          14          20          21          17          11 \n      Tokai       Kinki     Chugoku     Shikoku      Kyushu \n         21          30          11           6          21"
  },
  {
    "objectID": "man/jp_lower_2021_result.html",
    "href": "man/jp_lower_2021_result.html",
    "title": "PRcalc",
    "section": "",
    "text": "Result in Japanese lowerhouse election (2011)\n\n\n\ndata(jp_lower_2021_result)\n\n\n\n\nA data frame with 103 rows and 4 variables:\n\n\nParty\n\n\nname of party\n\n\nPref\n\n\nname of prefecture\n\n\nVotes\n\n\nnumber of votes\n\n\nSeats\n\n\nnumber of seats"
  },
  {
    "objectID": "man/jp_lower_2021_result.html#result-in-japanese-lowerhouse-election-2011",
    "href": "man/jp_lower_2021_result.html#result-in-japanese-lowerhouse-election-2011",
    "title": "PRcalc",
    "section": "",
    "text": "Result in Japanese lowerhouse election (2011)\n\n\n\ndata(jp_lower_2021_result)\n\n\n\n\nA data frame with 103 rows and 4 variables:\n\n\nParty\n\n\nname of party\n\n\nPref\n\n\nname of prefecture\n\n\nVotes\n\n\nnumber of votes\n\n\nSeats\n\n\nnumber of seats"
  },
  {
    "objectID": "man/jp_lower_2021_en.html",
    "href": "man/jp_lower_2021_en.html",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2021年; 英文)\n\n\n\ndata(jp_lower_2021_en)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2021_en.html#衆議院議員総選挙比例区得票数-2021年-英文",
    "href": "man/jp_lower_2021_en.html#衆議院議員総選挙比例区得票数-2021年-英文",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2021年; 英文)\n\n\n\ndata(jp_lower_2021_en)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_census_1945.html",
    "href": "man/jp_census_1945.html",
    "title": "PRcalc",
    "section": "",
    "text": "47都道府県の人口 (1945年)\n\n\n\ndata(jp_census_1945)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nPref\n\n\n都道府県名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\n国勢調査"
  },
  {
    "objectID": "man/jp_census_1945.html#都道府県別人口-1945年",
    "href": "man/jp_census_1945.html#都道府県別人口-1945年",
    "title": "PRcalc",
    "section": "",
    "text": "47都道府県の人口 (1945年)\n\n\n\ndata(jp_census_1945)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nPref\n\n\n都道府県名; character\n\n\nPop\n\n\n人口; numeric\n\n\n\n\n\n国勢調査"
  },
  {
    "objectID": "man/kr_lower_2016_en.html",
    "href": "man/kr_lower_2016_en.html",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2016年; 英語)\n\n\n\ndata(kr_lower_2016_en)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/kr_lower_2016_en.html#韓国国会議員総選挙比例区得票数-2016年-英語",
    "href": "man/kr_lower_2016_en.html#韓国国会議員総選挙比例区得票数-2016年-英語",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2016年; 英語)\n\n\n\ndata(kr_lower_2016_en)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/print.prcalc_decomposition_compare.html",
    "href": "man/print.prcalc_decomposition_compare.html",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_decomposition_compare object.\n\n\n\n## S3 method for class 'prcalc_decomposition_compare'\nprint(x, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_decomposition_compare object.\n\n\n\n\nuse_gt\n\n\nUse gt package? Default is FALSE.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_lower_2021)\n\nobj &lt;- prcalc(jp_lower_2021[1:9, ],\n              m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n              method = \"hare\")\n\ndecompose(obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n     0.038552104      0.003095531      0.035456573 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/print.prcalc_decomposition_compare.html#printing-a-prcalc_decomposition_compare-object.",
    "href": "man/print.prcalc_decomposition_compare.html#printing-a-prcalc_decomposition_compare-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_decomposition_compare object.\n\n\n\n## S3 method for class 'prcalc_decomposition_compare'\nprint(x, use_gt = FALSE, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_decomposition_compare object.\n\n\n\n\nuse_gt\n\n\nUse gt package? Default is FALSE.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_lower_2021)\n\nobj &lt;- prcalc(jp_lower_2021[1:9, ],\n              m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n              method = \"hare\")\n\ndecompose(obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n     0.038552104      0.003095531      0.035456573 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/print.prcalc_decomposition.html",
    "href": "man/print.prcalc_decomposition.html",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_decomposition object.\n\n\n\n## S3 method for class 'prcalc_decomposition'\nprint(x, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_decomposition object.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_lower_2021)\n\nobj &lt;- prcalc(jp_lower_2021[1:9, ],\n              m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n              method = \"hare\")\n\ndecompose(obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n     0.038552104      0.003095531      0.035456573 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/print.prcalc_decomposition.html#printing-a-prcalc_decomposition-object.",
    "href": "man/print.prcalc_decomposition.html#printing-a-prcalc_decomposition-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Printing a prcalc_decomposition object.\n\n\n\n## S3 method for class 'prcalc_decomposition'\nprint(x, digits = 3, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc_decomposition object.\n\n\n\n\ndigits\n\n\nthe number of decimal places. Default is 3.\n\n\n\n\n…\n\n\nignored.\n\n\n\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_lower_2021)\n\nobj &lt;- prcalc(jp_lower_2021[1:9, ],\n              m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n              method = \"hare\")\n\ndecompose(obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n     0.038552104      0.003095531      0.035456573 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/plot.prcalc_index.html",
    "href": "man/plot.prcalc_index.html",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc_index object.\n\n\n\n## S3 method for class 'prcalc_index'\nplot(\n  x,\n  index = NULL,\n  style = \"bar\",\n  bar_width = 0.75,\n  point_size = 5,\n  font_size = 12,\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc_index object.\n\n\n\n\nindex\n\n\na character vector. A subset of indices. If NULL, all indices are displayed. Default is NULL.\n\n\n\n\nstyle\n\n\nPlot style. Lollipop (“lollipop) or bar plot (”bar”). Default is “bar”.\n\n\n\n\nbar_width\n\n\nDefault is 0.75.\n\n\n\n\npoint_size\n\n\nDefault is 5.\n\n\n\n\nfont_size\n\n\na font size. Default is 12.\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nplot(index(pr_obj))\n\n\n\n\n\n\n\nplot(index(pr_obj), style = \"lollipop\",\n     index = c(\"lh\", \"gallagher\", \"rae\", \"dhondt\", \"ad\"))"
  },
  {
    "objectID": "man/plot.prcalc_index.html#visualization-of-a-prcalc_index-object.",
    "href": "man/plot.prcalc_index.html#visualization-of-a-prcalc_index-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Visualization of a prcalc_index object.\n\n\n\n## S3 method for class 'prcalc_index'\nplot(\n  x,\n  index = NULL,\n  style = \"bar\",\n  bar_width = 0.75,\n  point_size = 5,\n  font_size = 12,\n  ...\n)\n\n\n\n\n\n\n\nx\n\n\na prcalc_index object.\n\n\n\n\nindex\n\n\na character vector. A subset of indices. If NULL, all indices are displayed. Default is NULL.\n\n\n\n\nstyle\n\n\nPlot style. Lollipop (“lollipop) or bar plot (”bar”). Default is “bar”.\n\n\n\n\nbar_width\n\n\nDefault is 0.75.\n\n\n\n\npoint_size\n\n\nDefault is 5.\n\n\n\n\nfont_size\n\n\na font size. Default is 12.\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\n\n\nA ggplot object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\n\nplot(index(pr_obj))\n\n\n\n\n\n\n\nplot(index(pr_obj), style = \"lollipop\",\n     index = c(\"lh\", \"gallagher\", \"rae\", \"dhondt\", \"ad\"))"
  },
  {
    "objectID": "man/compare.html",
    "href": "man/compare.html",
    "title": "PRcalc",
    "section": "",
    "text": "Comparison multiple prcalc, prcalc_index, or prcalc_decomposition objects.\n\n\n\ncompare(x, ...)\n\n## S3 method for class 'list'\ncompare(x, prop = FALSE, ...)\n\n\n\n\n\n\n\nx\n\n\na list. All elements in the list must be prcalc, prcalc_index, or prcalc_decomposition objects.\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\nprop\n\n\nDefault is FALSE.\n\n\n\n\n\n\nA prcalc_compare, prcalc_index_compare, or prcalc_decomposition_compare object\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\ncompare(list(\"t = 0%\" = pr_obj1, \"t = 2.5%\" = pr_obj2, \"t = 5%\" = pr_obj3))\n\n      Party t = 0% t = 2.5% t = 5%\n1      自民     18       19     20\n2      公明      7        7      7\n3      立憲      8        9      9\n4      維新      5        5      5\n5      共産      5        5      5\n6      国民      3        3      4\n7    れいわ      2        2      0\n8      社民      1        0      0\n9       N国      1        0      0\n10   安楽死      0        0      0\n11     幸福      0        0      0\n12 オリーブ      0        0      0\n13   労働者      0        0      0\n\nlist(\"t = 0%\"   = index(pr_obj1),\n     \"t = 2.5%\" = index(pr_obj2),\n     \"t = 5%\"   = index(pr_obj3)) |&gt;\n  compare()\n\n            ID                         Index   t = 0% t = 2.5%  t = 5%\n1       dhondt                       D’Hondt 1.116833  1.13833 1.15073\n2       monroe                        Monroe 0.018918  0.04465 0.07028\n3       maxdev    Maximum Absolute Deviation 0.010461  0.02626 0.04626\n4     mm_ratio                 Max-Min ratio      Inf      Inf     Inf\n5          rae                           Rae 0.004664  0.01078 0.01547\n6           lh             Loosemore & Hanby 0.030315  0.07004 0.10052\n7      grofman                       Grofman 0.011677  0.02698 0.03872\n8     lijphart                      Lijphart 0.004069  0.02407 0.03407\n9    gallagher                     Gallagher 0.014609  0.03448 0.05427\n10 g_gallagher         Generalized Gallagher 0.014609  0.03448 0.05427\n11       gatev                         Gatev 0.032939  0.07576 0.11690\n12    ryabtsev                      Ryabtsev 0.023298  0.05365 0.08295\n13      szalai                        Szalai 0.555712  0.68047 0.73470\n14    w_szalai               Weighted Szalai 0.090661  0.17223 0.23070\n15          ap          Aleskerov & Platonov 1.042141  1.08443 1.10490\n16        gini                          Gini 0.036069  0.08943 0.13750\n17    atkinson                      Atkinson 1.000000  1.00000 1.00000\n18          sl                  Sainte-Laguë 0.018466  0.06389 0.11313\n19          cs                 Cox & Shugart 1.033646  1.11513 1.17257\n20      farina                        Farina 0.046282  0.09017 0.14105\n21      ortona                        Ortona 0.046909  0.10838 0.15555\n22          cd          Cosine Dissimilarity 0.000867  0.00329 0.00805\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.104611  0.12152 0.13099\n24         arr                  Lebeda’s ARR 0.008047  0.00935 0.01008\n25         srr                  Lebeda’s SRR 0.041482  0.04284 0.05664\n26        wdrr                 Lebeda’s WDRR 0.055081  0.08720 0.11068\n27          kl     Kullback-Leibler Surprise 0.016431  0.05936 0.10657\n28          lr    Likelihood Ratio Statistic      Inf      Inf     Inf\n29       chisq                   Chi Squared 0.004225  0.00852 0.01115\n30   hellinger            Hellinger Distance 0.087758  0.16905 0.22747\n31          ad              alpha-Divergence 0.009233  0.03194 0.05656"
  },
  {
    "objectID": "man/compare.html#comparison-multiple-prcalc-prcalc_index-or-prcalc_decomposition-objects.",
    "href": "man/compare.html#comparison-multiple-prcalc-prcalc_index-or-prcalc_decomposition-objects.",
    "title": "PRcalc",
    "section": "",
    "text": "Comparison multiple prcalc, prcalc_index, or prcalc_decomposition objects.\n\n\n\ncompare(x, ...)\n\n## S3 method for class 'list'\ncompare(x, prop = FALSE, ...)\n\n\n\n\n\n\n\nx\n\n\na list. All elements in the list must be prcalc, prcalc_index, or prcalc_decomposition objects.\n\n\n\n\n…\n\n\nIgnored\n\n\n\n\nprop\n\n\nDefault is FALSE.\n\n\n\n\n\n\nA prcalc_compare, prcalc_index_compare, or prcalc_decomposition_compare object\n\n\n\n\nlibrary(PRcalc)\n\ndata(jp_upper_2019)\n\npr_obj1 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\")\npr_obj2 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.025)\npr_obj3 &lt;- prcalc(jp_upper_2019, m = 50, method = \"dt\", threshold = 0.05)\n\ncompare(list(\"t = 0%\" = pr_obj1, \"t = 2.5%\" = pr_obj2, \"t = 5%\" = pr_obj3))\n\n      Party t = 0% t = 2.5% t = 5%\n1      自民     18       19     20\n2      公明      7        7      7\n3      立憲      8        9      9\n4      維新      5        5      5\n5      共産      5        5      5\n6      国民      3        3      4\n7    れいわ      2        2      0\n8      社民      1        0      0\n9       N国      1        0      0\n10   安楽死      0        0      0\n11     幸福      0        0      0\n12 オリーブ      0        0      0\n13   労働者      0        0      0\n\nlist(\"t = 0%\"   = index(pr_obj1),\n     \"t = 2.5%\" = index(pr_obj2),\n     \"t = 5%\"   = index(pr_obj3)) |&gt;\n  compare()\n\n            ID                         Index   t = 0% t = 2.5%  t = 5%\n1       dhondt                       D’Hondt 1.116833  1.13833 1.15073\n2       monroe                        Monroe 0.018918  0.04465 0.07028\n3       maxdev    Maximum Absolute Deviation 0.010461  0.02626 0.04626\n4     mm_ratio                 Max-Min ratio      Inf      Inf     Inf\n5          rae                           Rae 0.004664  0.01078 0.01547\n6           lh             Loosemore & Hanby 0.030315  0.07004 0.10052\n7      grofman                       Grofman 0.011677  0.02698 0.03872\n8     lijphart                      Lijphart 0.004069  0.02407 0.03407\n9    gallagher                     Gallagher 0.014609  0.03448 0.05427\n10 g_gallagher         Generalized Gallagher 0.014609  0.03448 0.05427\n11       gatev                         Gatev 0.032939  0.07576 0.11690\n12    ryabtsev                      Ryabtsev 0.023298  0.05365 0.08295\n13      szalai                        Szalai 0.555712  0.68047 0.73470\n14    w_szalai               Weighted Szalai 0.090661  0.17223 0.23070\n15          ap          Aleskerov & Platonov 1.042141  1.08443 1.10490\n16        gini                          Gini 0.036069  0.08943 0.13750\n17    atkinson                      Atkinson 1.000000  1.00000 1.00000\n18          sl                  Sainte-Laguë 0.018466  0.06389 0.11313\n19          cs                 Cox & Shugart 1.033646  1.11513 1.17257\n20      farina                        Farina 0.046282  0.09017 0.14105\n21      ortona                        Ortona 0.046909  0.10838 0.15555\n22          cd          Cosine Dissimilarity 0.000867  0.00329 0.00805\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.104611  0.12152 0.13099\n24         arr                  Lebeda’s ARR 0.008047  0.00935 0.01008\n25         srr                  Lebeda’s SRR 0.041482  0.04284 0.05664\n26        wdrr                 Lebeda’s WDRR 0.055081  0.08720 0.11068\n27          kl     Kullback-Leibler Surprise 0.016431  0.05936 0.10657\n28          lr    Likelihood Ratio Statistic      Inf      Inf     Inf\n29       chisq                   Chi Squared 0.004225  0.00852 0.01115\n30   hellinger            Hellinger Distance 0.087758  0.16905 0.22747\n31          ad              alpha-Divergence 0.009233  0.03194 0.05656"
  },
  {
    "objectID": "man/as_prcalc.html",
    "href": "man/as_prcalc.html",
    "title": "PRcalc",
    "section": "",
    "text": "Transformation from .csv or data.frame (tibble) to prcalc object.\n\n\n\nas_prcalc(x, l1, l2 = NULL, p, q = NULL, type = c(\"district\", \"party\"), ...)\n\nread_prcalc(x, l1, l2 = NULL, p, q = NULL, type = c(\"district\", \"party\"), ...)\n\n\n\n\n\n\n\nx\n\n\na path of .csv file (read_prcalc()), or name of data.frame or tibble object (as_prcalc()).\n\n\n\n\nl1\n\n\na character. Mandatory. A column name of level 1 (region or state).\n\n\n\n\nl2\n\n\na character. Optional. A column name of level 2 (party or district).\n\n\n\n\np\n\n\na character. Mandatory. A column name of population or number of electorates.\n\n\n\n\nq\n\n\na character. Optional. A column name of magnitude or number of allocated seats. If NULL, replaced by 1.\n\n\n\n\ntype\n\n\na type of l2. Mandatory. If “party”, vector of l2 represents parties. If “district”, vector of l2 represents electoral district. Default is “district”.\n\n\n\n\n…\n\n\nignored\n\n\n\n\n\n\nAt least two columns of x are required—l1 and p.\n\n\n\na prcalc object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(\"jp_lower_2021_result\")\n\nas_prcalc(jp_lower_2021_result,\n          l1   = \"Pref\",\n          l2   = \"Party\",\n          p    = \"Votes\",\n          q    = \"Seats\",\n          type = \"party\")\n\ndata(\"br_district_2010\")\n# Brazil has single block PR system, l2 can be omitted.\n# If type = \"party\", raw names of districts are preserved.\nbr_district_2010 |&gt;\n  as_prcalc(l1   = \"district\",\n            p    = \"population\",\n            q    = \"magnitude\",\n            type = \"party\")\n\ndata(\"au_district_2010\")\n# Because all of magnitude are 1 and type of l2 is district,\n# you can omit q and type arguments.\nas_prcalc(au_district_2010,\n          l1   = \"region\",\n          l2   = \"district\",\n          p    = \"electorates\")\n# You can import .csv format and transfrom into prcalc object directly.\nread_prcalc(\"data/my_file.csv\",\n            l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")"
  },
  {
    "objectID": "man/as_prcalc.html#transformation-from-.csv-or-data.frame-tibble-to-prcalc-object.",
    "href": "man/as_prcalc.html#transformation-from-.csv-or-data.frame-tibble-to-prcalc-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Transformation from .csv or data.frame (tibble) to prcalc object.\n\n\n\nas_prcalc(x, l1, l2 = NULL, p, q = NULL, type = c(\"district\", \"party\"), ...)\n\nread_prcalc(x, l1, l2 = NULL, p, q = NULL, type = c(\"district\", \"party\"), ...)\n\n\n\n\n\n\n\nx\n\n\na path of .csv file (read_prcalc()), or name of data.frame or tibble object (as_prcalc()).\n\n\n\n\nl1\n\n\na character. Mandatory. A column name of level 1 (region or state).\n\n\n\n\nl2\n\n\na character. Optional. A column name of level 2 (party or district).\n\n\n\n\np\n\n\na character. Mandatory. A column name of population or number of electorates.\n\n\n\n\nq\n\n\na character. Optional. A column name of magnitude or number of allocated seats. If NULL, replaced by 1.\n\n\n\n\ntype\n\n\na type of l2. Mandatory. If “party”, vector of l2 represents parties. If “district”, vector of l2 represents electoral district. Default is “district”.\n\n\n\n\n…\n\n\nignored\n\n\n\n\n\n\nAt least two columns of x are required—l1 and p.\n\n\n\na prcalc object.\n\n\n\n\nlibrary(PRcalc)\n\ndata(\"jp_lower_2021_result\")\n\nas_prcalc(jp_lower_2021_result,\n          l1   = \"Pref\",\n          l2   = \"Party\",\n          p    = \"Votes\",\n          q    = \"Seats\",\n          type = \"party\")\n\ndata(\"br_district_2010\")\n# Brazil has single block PR system, l2 can be omitted.\n# If type = \"party\", raw names of districts are preserved.\nbr_district_2010 |&gt;\n  as_prcalc(l1   = \"district\",\n            p    = \"population\",\n            q    = \"magnitude\",\n            type = \"party\")\n\ndata(\"au_district_2010\")\n# Because all of magnitude are 1 and type of l2 is district,\n# you can omit q and type arguments.\nas_prcalc(au_district_2010,\n          l1   = \"region\",\n          l2   = \"district\",\n          p    = \"electorates\")\n# You can import .csv format and transfrom into prcalc object directly.\nread_prcalc(\"data/my_file.csv\",\n            l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")"
  },
  {
    "objectID": "man/kr_lower_2012.html",
    "href": "man/kr_lower_2012.html",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2012年)\n\n\n\ndata(kr_lower_2012)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/kr_lower_2012.html#韓国国会議員総選挙比例区得票数-2012年",
    "href": "man/kr_lower_2012.html#韓国国会議員総選挙比例区得票数-2012年",
    "title": "PRcalc",
    "section": "",
    "text": "韓国国会議員総選挙比例区の得票数 (2012年)\n\n\n\ndata(kr_lower_2012)\n\n\n\n\nA data frame with 47 rows and 2 variables:\n\n\nParty\n\n\n政党名; character\n\n\nVote\n\n\n各政党の得票数; numeric\n\n\n\n\n\n韓国中央選挙管理委員会"
  },
  {
    "objectID": "man/au_district_2010.html",
    "href": "man/au_district_2010.html",
    "title": "PRcalc",
    "section": "",
    "text": "List of electoral district in Australia (2010)\n\n\n\ndata(au_district_2010)\n\n\n\n\nA data frame with 150 rows and 4 variables:\n\n\nregion\n\n\nname of region\n\n\ndistrict\n\n\nname of district\n\n\nelectorates\n\n\nnumber of electorates\n\n\nmagnitude\n\n\nmagnitude"
  },
  {
    "objectID": "man/au_district_2010.html#list-of-electoral-district-in-australia-2010",
    "href": "man/au_district_2010.html#list-of-electoral-district-in-australia-2010",
    "title": "PRcalc",
    "section": "",
    "text": "List of electoral district in Australia (2010)\n\n\n\ndata(au_district_2010)\n\n\n\n\nA data frame with 150 rows and 4 variables:\n\n\nregion\n\n\nname of region\n\n\ndistrict\n\n\nname of district\n\n\nelectorates\n\n\nnumber of electorates\n\n\nmagnitude\n\n\nmagnitude"
  },
  {
    "objectID": "man/jp_lower_2012.html",
    "href": "man/jp_lower_2012.html",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2012年)\n\n\n\ndata(jp_lower_2012)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2012.html#衆議院議員総選挙比例区得票数-2012年",
    "href": "man/jp_lower_2012.html#衆議院議員総選挙比例区得票数-2012年",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2012年)\n\n\n\ndata(jp_lower_2012)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2017.html",
    "href": "man/jp_lower_2017.html",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2017年)\n\n\n\ndata(jp_lower_2017)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2017.html#衆議院議員総選挙比例区得票数-2017年",
    "href": "man/jp_lower_2017.html#衆議院議員総選挙比例区得票数-2017年",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2017年)\n\n\n\ndata(jp_lower_2017)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2014.html",
    "href": "man/jp_lower_2014.html",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2014年)\n\n\n\ndata(jp_lower_2014)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/jp_lower_2014.html#衆議院議員総選挙比例区得票数-2014年",
    "href": "man/jp_lower_2014.html#衆議院議員総選挙比例区得票数-2014年",
    "title": "PRcalc",
    "section": "",
    "text": "衆議院議員総選挙比例区の得票数 (2014年)\n\n\n\ndata(jp_lower_2014)\n\n\n\n\nA data frame with 47 rows and 12 variables:\n\n\nParty\n\n\n政党名; character\n\n\nHokkaido\n\n\n北海道ブロックの得票数; numeric\n\n\nTohoku\n\n\n東北ブロックの得票数; numeric\n\n\nKitakanto\n\n\n北関東ブロックの得票数; numeric\n\n\nMinamikanto\n\n\n南関東ブロックの得票数; numeric\n\n\nTokyo\n\n\n東京ブロックの得票数; numeric\n\n\nHokuriku\n\n\n北陸信越ブロックの得票数; numeric\n\n\nTokai\n\n\n東海ブロックの得票数; numeric\n\n\nKinki\n\n\n近畿ブロックの得票数; numeric\n\n\nChugoku\n\n\n中国ブロックの得票数; numeric\n\n\nShikoku\n\n\n四国ブロックの得票数; numeric\n\n\nKyushu\n\n\n九州ブロックの得票数; numeric\n\n\n\n\n\n総務省"
  },
  {
    "objectID": "man/decompose.html",
    "href": "man/decompose.html",
    "title": "PRcalc",
    "section": "",
    "text": "Decomposition using a prcalc object.\n\n\n\ndecompose(x, as_disprop = TRUE, alpha = 2, special = NULL, ...)\n\n## S3 method for class 'prcalc'\ndecompose(x, as_disprop = TRUE, alpha = 2, special = NULL, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\nas_disprop\n\n\nIf TRUE, alpha must be larger than 0. Default is TRUE.\n\n\n\n\nalpha\n\n\nDefault is 2 and it must be larger than 0.\n\n\n\n\nspecial\n\n\na character. names of special district. If it is defined, three-step decomposition is conducted.\n\n\n\n\n…\n\n\nignored\n\n\n\n\n\n\na prcalc_decomposition object.\n\n\n\n\n\nYuta, Kamahara. \"The Desired Political Entropy as the Measure of Unequal Representation: Disproportionality and Malapportionment\". Working paper.\n\n\n\n\n\ndecompose2, decompose3\n\n\n\n\nlibrary(PRcalc)\n\n# two-step decomposition (example 1)\ndata(\"jp_lower_2021\")\n\nobj &lt;- prcalc(jp_lower_2021,\n              m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n              method = \"hare\")\n\ndecompose(obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n      0.03952282       0.00324211       0.03628070 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\n# two-step decomposition (example 2)\ndata(\"au_district_2010\")\n\nau_data &lt;- au_district_2010 |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")\n\ndecompose(au_data, alpha = 0, as_disprop = FALSE)\n\nalpha = 0 \nalpha-divergence  Reapportionment    Redistricting \n     0.004280586      0.003107794      0.001172792 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\n# three-step decomposition\ndata(\"nz_district\")\n\nnz_district |&gt;\n  dplyr::filter(year == 2011) |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\") |&gt;\n  decompose(alpha = 0, as_disprop = FALSE, special = \"Maori\")\n\nalpha = 0 \nalpha-divergence          Special  Reapportionment    Redistricting \n    1.749517e-03     1.247976e-03     2.041288e-06     4.995002e-04 \n\nNote: \"alha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "man/decompose.html#decomposition-using-a-prcalc-object.",
    "href": "man/decompose.html#decomposition-using-a-prcalc-object.",
    "title": "PRcalc",
    "section": "",
    "text": "Decomposition using a prcalc object.\n\n\n\ndecompose(x, as_disprop = TRUE, alpha = 2, special = NULL, ...)\n\n## S3 method for class 'prcalc'\ndecompose(x, as_disprop = TRUE, alpha = 2, special = NULL, ...)\n\n\n\n\n\n\n\nx\n\n\na prcalc object.\n\n\n\n\nas_disprop\n\n\nIf TRUE, alpha must be larger than 0. Default is TRUE.\n\n\n\n\nalpha\n\n\nDefault is 2 and it must be larger than 0.\n\n\n\n\nspecial\n\n\na character. names of special district. If it is defined, three-step decomposition is conducted.\n\n\n\n\n…\n\n\nignored\n\n\n\n\n\n\na prcalc_decomposition object.\n\n\n\n\n\nYuta, Kamahara. \"The Desired Political Entropy as the Measure of Unequal Representation: Disproportionality and Malapportionment\". Working paper.\n\n\n\n\n\ndecompose2, decompose3\n\n\n\n\nlibrary(PRcalc)\n\n# two-step decomposition (example 1)\ndata(\"jp_lower_2021\")\n\nobj &lt;- prcalc(jp_lower_2021,\n              m = c(8, 14, 20, 21, 17, 11, 21, 30, 11, 6, 21),\n              method = \"hare\")\n\ndecompose(obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n      0.03952282       0.00324211       0.03628070 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\n# two-step decomposition (example 2)\ndata(\"au_district_2010\")\n\nau_data &lt;- au_district_2010 |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\")\n\ndecompose(au_data, alpha = 0, as_disprop = FALSE)\n\nalpha = 0 \nalpha-divergence  Reapportionment    Redistricting \n     0.004280586      0.003107794      0.001172792 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\n# three-step decomposition\ndata(\"nz_district\")\n\nnz_district |&gt;\n  dplyr::filter(year == 2011) |&gt;\n  as_prcalc(l1   = \"region\",\n            l2   = \"district\",\n            p    = \"electorates\",\n            q    = \"magnitude\",\n            type = \"district\") |&gt;\n  decompose(alpha = 0, as_disprop = FALSE, special = \"Maori\")\n\nalpha = 0 \nalpha-divergence          Special  Reapportionment    Redistricting \n    1.749517e-03     1.247976e-03     2.041288e-06     4.995002e-04 \n\nNote: \"alha-divergence\" is sum of \"Special\", \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "NEWS.html",
    "href": "NEWS.html",
    "title": "PRcalc",
    "section": "",
    "text": "index()およびdecompose()関数のas_disprop引数を削除しました。\nindex()にunit引数が追加されました。\n\n得票、人口、議席などのデータが2次元の場合のみ有効で、単一ブロックのような1次元の場合は無視されます。\n\"l1\"、\"l2\"（既定値）、\"joint\"から選択できます。\n\"l2\"（level 2）の場合、level 2（政党、選挙区など）の周辺分布に基づいて非比例性指標が計算され、\"l1\"（level 1）はlevel 1（地域や州など）の周辺分布を使用します。\n\"joint\"はlevel 1とlevel 2の同時分布が仕様します。この場合、\\(\\alpha\\)-divergenceはdecomose()のそれと一致するようになります。\n\n\n\n\n\n\n新しい非比例性指標、Max-Min ratioを追加しました。\n\n比例代表の議席配分でなく、定数不均衡の指標として有効です。as_disprop = FALSEを指定してください。\n\nas_dispropの値に応じてindex()関数の動きが変わります。既定値はTRUEであり、各政党の得票数の合計、議席数の合計に基づいて計算されます。しかし、このような計算方法は定数不均衡の測定に役立ちません。as_disprop = FALSEにすることで、定数不均衡の指標として測定可能となります。\n\n\n\n\n\nデータセット（jp_lower_2021_en、kr_lower_2016_en）を追加\n\n\n\n\n\n既存のdecompose()をdecompse2()に名称変更し、decompose()をdecompose2()とdecompose3()のラッパー関数へ変更\nprcalcオブジェクトのprint()メソッドにhead引数を追加。たとえば、head = 10にすると最初の10行のみ出力される（既定値はhead = Inf）。\n\n\n\n\n\n新しい関数decompose3()、print.prcalc_decomposition_compare()を追加\nデータセット（nz_district）を追加\n\n\n\n\n\nread_prcalc()、as_prcalc()追加\nデータセット2種（jp_lower_2021_resultとau_district_2010）追加\n\n\n\n\n\ndecompose()のバグ修正\n\n\n\n\n\ndecompose()、plot.prcalc_decomposition_compare()の追加\ncompare()関数がprcalc.prcalc_decompositionクラスにも対応\n\n\n\n\n\nprcalc_indexクラス構造の変更\n\n\n\n\n\nindex()関数のバグ修正\n\n\n\n\n\nCode refactoring\n\n\n\n\n\n大幅なアップデート (というか、作り直しました)\n\n\n\n\n\nバグ修正\n\n\n\n\n\n新しいサンプルデータjapanese.sample2の追加\nブロック制比例代表が計算可能\n\n\n\n\n\nパッケージ化\nサンプルデータの追加\n\n\n\n\n\nvoteの実引数としてdata.frame型が使用可能\n\n\n\n\n\n阻止条項が指定可能\n\n\n\n\n\nnparty引数の削除\n仮引数voteshareの名称をvoteに変更\n非比例性指標 (Gallagher Index) の出力\n関数の効率化\n例を出力するPR.calc.ex()関数の追加\n\n\n\n\n\n初公開",
    "crumbs": [
      "News"
    ]
  },
  {
    "objectID": "NEWS.html#news",
    "href": "NEWS.html#news",
    "title": "PRcalc",
    "section": "",
    "text": "index()およびdecompose()関数のas_disprop引数を削除しました。\nindex()にunit引数が追加されました。\n\n得票、人口、議席などのデータが2次元の場合のみ有効で、単一ブロックのような1次元の場合は無視されます。\n\"l1\"、\"l2\"（既定値）、\"joint\"から選択できます。\n\"l2\"（level 2）の場合、level 2（政党、選挙区など）の周辺分布に基づいて非比例性指標が計算され、\"l1\"（level 1）はlevel 1（地域や州など）の周辺分布を使用します。\n\"joint\"はlevel 1とlevel 2の同時分布が仕様します。この場合、\\(\\alpha\\)-divergenceはdecomose()のそれと一致するようになります。\n\n\n\n\n\n\n新しい非比例性指標、Max-Min ratioを追加しました。\n\n比例代表の議席配分でなく、定数不均衡の指標として有効です。as_disprop = FALSEを指定してください。\n\nas_dispropの値に応じてindex()関数の動きが変わります。既定値はTRUEであり、各政党の得票数の合計、議席数の合計に基づいて計算されます。しかし、このような計算方法は定数不均衡の測定に役立ちません。as_disprop = FALSEにすることで、定数不均衡の指標として測定可能となります。\n\n\n\n\n\nデータセット（jp_lower_2021_en、kr_lower_2016_en）を追加\n\n\n\n\n\n既存のdecompose()をdecompse2()に名称変更し、decompose()をdecompose2()とdecompose3()のラッパー関数へ変更\nprcalcオブジェクトのprint()メソッドにhead引数を追加。たとえば、head = 10にすると最初の10行のみ出力される（既定値はhead = Inf）。\n\n\n\n\n\n新しい関数decompose3()、print.prcalc_decomposition_compare()を追加\nデータセット（nz_district）を追加\n\n\n\n\n\nread_prcalc()、as_prcalc()追加\nデータセット2種（jp_lower_2021_resultとau_district_2010）追加\n\n\n\n\n\ndecompose()のバグ修正\n\n\n\n\n\ndecompose()、plot.prcalc_decomposition_compare()の追加\ncompare()関数がprcalc.prcalc_decompositionクラスにも対応\n\n\n\n\n\nprcalc_indexクラス構造の変更\n\n\n\n\n\nindex()関数のバグ修正\n\n\n\n\n\nCode refactoring\n\n\n\n\n\n大幅なアップデート (というか、作り直しました)\n\n\n\n\n\nバグ修正\n\n\n\n\n\n新しいサンプルデータjapanese.sample2の追加\nブロック制比例代表が計算可能\n\n\n\n\n\nパッケージ化\nサンプルデータの追加\n\n\n\n\n\nvoteの実引数としてdata.frame型が使用可能\n\n\n\n\n\n阻止条項が指定可能\n\n\n\n\n\nnparty引数の削除\n仮引数voteshareの名称をvoteに変更\n非比例性指標 (Gallagher Index) の出力\n関数の効率化\n例を出力するPR.calc.ex()関数の追加\n\n\n\n\n\n初公開",
    "crumbs": [
      "News"
    ]
  },
  {
    "objectID": "supplement/dataset.html",
    "href": "supplement/dataset.html",
    "title": "Sample Dataset",
    "section": "",
    "text": "1st column is the name of the political party, 2nd and subsequent columns are the number of votes received in each block.\n\n\n\nName\nCountry\nYear\nType\nBlocks\nEtc.\n\n\n\n\njp_lower_2009\nJapan\n2009\nLower house\n11\n\n\n\njp_lower_2012\nJapan\n2012\nLower house\n11\n\n\n\njp_lower_2014\nJapan\n2014\nLower house\n11\n\n\n\njp_lower_2017\nJapan\n2017\nLower house\n11\n\n\n\njp_lower_2021\nJapan\n2021\nLower house\n11\n\n\n\njp_lower_2021_en\nJapan\n2021\nLower house\n11\nin English\n\n\njp_upper_2019\nJapan\n2019\nUpper house\n1\n\n\n\nkr_lower_2004\nKorea\n2004\nLower house\n1\n\n\n\nkr_lower_2008\nKorea\n2008\nLower house\n1\n\n\n\nkr_lower_2012\nKorea\n2012\nLower house\n1\n\n\n\nkr_lower_2016\nKorea\n2016\nLower house\n1\n\n\n\nkr_lower_2016_en\nKorea\n2016\nLower house\n1\nin English"
  },
  {
    "objectID": "supplement/dataset.html#electoral-result",
    "href": "supplement/dataset.html#electoral-result",
    "title": "Sample Dataset",
    "section": "",
    "text": "1st column is the name of the political party, 2nd and subsequent columns are the number of votes received in each block.\n\n\n\nName\nCountry\nYear\nType\nBlocks\nEtc.\n\n\n\n\njp_lower_2009\nJapan\n2009\nLower house\n11\n\n\n\njp_lower_2012\nJapan\n2012\nLower house\n11\n\n\n\njp_lower_2014\nJapan\n2014\nLower house\n11\n\n\n\njp_lower_2017\nJapan\n2017\nLower house\n11\n\n\n\njp_lower_2021\nJapan\n2021\nLower house\n11\n\n\n\njp_lower_2021_en\nJapan\n2021\nLower house\n11\nin English\n\n\njp_upper_2019\nJapan\n2019\nUpper house\n1\n\n\n\nkr_lower_2004\nKorea\n2004\nLower house\n1\n\n\n\nkr_lower_2008\nKorea\n2008\nLower house\n1\n\n\n\nkr_lower_2012\nKorea\n2012\nLower house\n1\n\n\n\nkr_lower_2016\nKorea\n2016\nLower house\n1\n\n\n\nkr_lower_2016_en\nKorea\n2016\nLower house\n1\nin English"
  },
  {
    "objectID": "supplement/dataset.html#census",
    "href": "supplement/dataset.html#census",
    "title": "Sample Dataset",
    "section": "Census",
    "text": "Census\n1st column is the name of the state / prefecture, 2nd column is the population.\n\n\n\nName\nCountry\nYear\n\n\n\n\njp_census_1920\nJapan\n1920\n\n\njp_census_1945\nJapan\n1945\n\n\njp_census_1970\nJapan\n1970\n\n\njp_census_2015\nJapan\n2015\n\n\nus_census_2020\nUS\n2020"
  },
  {
    "objectID": "supplement/dataset.html#electoral-districts",
    "href": "supplement/dataset.html#electoral-districts",
    "title": "Sample Dataset",
    "section": "Electoral districts",
    "text": "Electoral districts\n\nyear: election year\nregion: the name of the state / prefecture\ndistrict: the name of the district\nelectorates: the electorates of the district\nmagnitude: the magnitudes of the district\n\n\n\n\n\n\n\n\n\n\nName\nCountry\nYear\nSpecial district\n\n\n\n\nau_district_2010\nAustralia\n2010\nnone\n\n\nbr_district_2010\nBrazil\n2010\nnone\n\n\nnz_district\nNew Zealand\n1949-2011\n\"Maori\"\n\n\nit_district_2006\nItaly\n2006\n\"EUROPA\", \"AMERICA MERIDIONALE\", \"AMERICA SETTENTRIONALE E CENTRALE\", and \"AFRICA ASIA OCEANIA ANTARTIDE\""
  },
  {
    "objectID": "supplement/dataset.html#electoral-results",
    "href": "supplement/dataset.html#electoral-results",
    "title": "Sample Dataset",
    "section": "Electoral results",
    "text": "Electoral results\n\n1st column: the name of party\n2nd column: the name of the block (district)\n3rd column: the number of votes\n4th column: the number of seats\n\n\n\n\nName\nCountry\nYear\nType\n\n\n\n\njp_lower_2021_result\nJapan\n2010\nLower house"
  },
  {
    "objectID": "supplement/list_of_methods.html",
    "href": "supplement/list_of_methods.html",
    "title": "List of methods",
    "section": "",
    "text": "\\(r(k)\\): \\(k+1\\)th divisor\n\n\n\n\n\n\n\n\n\n\nMethod\nArgument\nRule\nApprox. first values\n\n\n\n\nD’hondt / Jefferson\n\"d'hondt\", \"dt\", or \"jefferson\"\n\\(r(k) = k + 1\\)\n1, 2, 3, 4, …\n\n\nAdams / Cambridge\n\"adams\" or \"cambridge\"\n\\(r(k) = k\\)\n0, 1, 2, 3, …\n\n\nSainte-Laguë / Webster\n\"sl\", \"sainte-lague\", or \"webster\"\n\\(r(k) = k + 0.5\\)\n0.5, 1.5, 2.5, 3.5, …\n\n\nModified Sainte-Laguë\n\"msl\"\n\\(r(k) = k + 0.5, r_1 = 0.7\\)\n0.7, 1.5, 2.5, 3.5, …\n\n\nDanish\n\"danish\"\n\\(r(k) = k + \\frac{1}{3}\\)\n0.33, 1.33, 2.33, 3.33, …\n\n\nImperiali\n\"imperiali\"\n\\(r(k) = k + 2\\)\n2, 3, 4, 5, …\n\n\nHuntington-Hill\n\"hh\" or \"huntington-hill\"\n\\(r(k) = \\sqrt{k (k + 1)}\\)\n0, 1.41, 2.45, 3.46, …\n\n\nDean\n\"dean\"\n\\(r(k) = \\frac{2}{\\frac{1}{k} + \\frac{1}{k + 1}}\\)\n0, 1.33, 2.40, 3.43, …\n\n\n\\(\\alpha\\)-divergence\n\"ad\"\nSee Note 1\nSee Note 1\n\n\nCustom divisor\n\"custom divisor\" or \"cd\"\nSee Note 2\nSee Note 2"
  },
  {
    "objectID": "supplement/list_of_methods.html#highest-averages-methods",
    "href": "supplement/list_of_methods.html#highest-averages-methods",
    "title": "List of methods",
    "section": "",
    "text": "\\(r(k)\\): \\(k+1\\)th divisor\n\n\n\n\n\n\n\n\n\n\nMethod\nArgument\nRule\nApprox. first values\n\n\n\n\nD’hondt / Jefferson\n\"d'hondt\", \"dt\", or \"jefferson\"\n\\(r(k) = k + 1\\)\n1, 2, 3, 4, …\n\n\nAdams / Cambridge\n\"adams\" or \"cambridge\"\n\\(r(k) = k\\)\n0, 1, 2, 3, …\n\n\nSainte-Laguë / Webster\n\"sl\", \"sainte-lague\", or \"webster\"\n\\(r(k) = k + 0.5\\)\n0.5, 1.5, 2.5, 3.5, …\n\n\nModified Sainte-Laguë\n\"msl\"\n\\(r(k) = k + 0.5, r_1 = 0.7\\)\n0.7, 1.5, 2.5, 3.5, …\n\n\nDanish\n\"danish\"\n\\(r(k) = k + \\frac{1}{3}\\)\n0.33, 1.33, 2.33, 3.33, …\n\n\nImperiali\n\"imperiali\"\n\\(r(k) = k + 2\\)\n2, 3, 4, 5, …\n\n\nHuntington-Hill\n\"hh\" or \"huntington-hill\"\n\\(r(k) = \\sqrt{k (k + 1)}\\)\n0, 1.41, 2.45, 3.46, …\n\n\nDean\n\"dean\"\n\\(r(k) = \\frac{2}{\\frac{1}{k} + \\frac{1}{k + 1}}\\)\n0, 1.33, 2.40, 3.43, …\n\n\n\\(\\alpha\\)-divergence\n\"ad\"\nSee Note 1\nSee Note 1\n\n\nCustom divisor\n\"custom divisor\" or \"cd\"\nSee Note 2\nSee Note 2"
  },
  {
    "objectID": "supplement/list_of_methods.html#largest-reminder-method",
    "href": "supplement/list_of_methods.html#largest-reminder-method",
    "title": "List of methods",
    "section": "Largest reminder method",
    "text": "Largest reminder method\n\n\\(Q\\): Quota\n\\(v\\): Total votes\n\\(m\\): Magnitude (total seats)\n\n\n\n\n\n\n\n\n\n\nMethod\nArgument\nQuota\n\n\n\n\n\nHare-Niemeyer quota\n\"hn\", \"hare\", or \"hare-niemeyer\"\n\\(Q = \\frac{v}{m}\\)\n\n\n\nDroop quota\n\"droop\"\n\\(Q = 1 + \\frac{v}{1 + m}\\)\n\n\n\nHagenbach-Bischoff quota\n\"hb\" or \"hagenbach-bischoff\"\n\\(Q = \\frac{v}{1 + m}\\)\n\n\n\nImperiali quota\n\"iq\" or \"imperiali quota\"\n\\(Q = \\frac{v}{2 + m}\\)\n\n\n\nCustom quota\n\"custom quota\" or \"cq\"\nSee Note 3\n\n\n\n\n\n\n\n\n\n\nNote 1: About \\(\\alpha\\)-divergence\n\n\n\n\n\nDivisor (\\(r(k)\\)) is calculated as follow:\n\\[\nr(k) = \\begin{cases}\n\\frac{1}{e} \\frac{(k + 1)^{k + 1}}{k^k}& \\mbox{if}\\quad\\alpha = 1,\\\\\n\\frac{1}{\\log{\\frac{k + 1}{k}}} & \\mbox{if}\\quad\\alpha = 0,\\\\\n\\Bigl(\\frac{(k + 1)^\\alpha - k^\\alpha}{\\alpha}\\Bigr)^{\\frac{1}{\\alpha - 1}} & \\mbox{otherwise.}\\\\\n\\end{cases}\n\\]\n\n\n\n\\(\\alpha\\)\nMethod\n\n\n\n\n+\\(\\infty\\)\nD’hondt / Jefferson\n\n\n3\n\\(\\frac{1}{3}\\)\n\n\n2\nSainte-Laguë / Webster\n\n\n1\nTheil\n\n\n0\nTheil and Schrage\n\n\n-1\nHill\n\n\n-4\n\\(\\simeq\\)Dean\n\n\n-\\(\\infty\\)\nAdams / Cambridge\n\n\n\nPlease note that extra parameter \\(\\alpha\\) is required (extra).\n\nExample 1Example 2\n\n\n\nlibrary(PRcalc)\ndata(jp_upper_2019)\n# Jefferson vs alpha = 10\nlist(prcalc(jp_upper_2019, m = 50, method = \"dt\"),\n     prcalc(jp_upper_2019, m = 50, method = \"ad\", extra = 10)) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nModel1\nModel2\n\n\n\n\n自民\n18\n18\n\n\n公明\n7\n7\n\n\n立憲\n8\n8\n\n\n維新\n5\n5\n\n\n共産\n5\n5\n\n\n国民\n3\n3\n\n\nれいわ\n2\n2\n\n\n社民\n1\n1\n\n\nN国\n1\n1\n\n\n安楽死\n0\n0\n\n\n幸福\n0\n0\n\n\nオリーブ\n0\n0\n\n\n労働者\n0\n0\n\n\n\n\n\n\n\n\n\n\n\n# Dean vs alpha = -4\nlist(prcalc(jp_upper_2019, m = 50, method = \"dean\"),\n     prcalc(jp_upper_2019, m = 50, method = \"ad\", extra = -4)) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nModel1\nModel2\n\n\n\n\n自民\n17\n17\n\n\n公明\n6\n6\n\n\n立憲\n7\n7\n\n\n維新\n5\n5\n\n\n共産\n4\n4\n\n\n国民\n3\n3\n\n\nれいわ\n2\n2\n\n\n社民\n1\n1\n\n\nN国\n1\n1\n\n\n安楽死\n1\n1\n\n\n幸福\n1\n1\n\n\nオリーブ\n1\n1\n\n\n労働者\n1\n1\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote 2: About \"custom divisor\" (\"cd\") method\n\n\n\n\n\nPlease note that extra parameter (extra) is required. extra must be length of maximum value of m or longer.\n\nlist(prcalc(jp_upper_2019, m = 50, method = \"msl\"),\n     prcalc(jp_upper_2019, m = 50, method = \"cd\", \n            extra = c(1.4, seq(3, 100, by = 2)))) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nModel1\nModel2\n\n\n\n\n自民\n18\n18\n\n\n公明\n7\n7\n\n\n立憲\n8\n8\n\n\n維新\n5\n5\n\n\n共産\n5\n5\n\n\n国民\n3\n3\n\n\nれいわ\n2\n2\n\n\n社民\n1\n1\n\n\nN国\n1\n1\n\n\n安楽死\n0\n0\n\n\n幸福\n0\n0\n\n\nオリーブ\n0\n0\n\n\n労働者\n0\n0\n\n\n\n\n\n\n\n\nFor detail, see “Customized allocation methods” section in calculation tutorial.\n\n\n\n\n\n\n\n\n\nNote 3: About \"custom quota\" (\"cq\") method\n\n\n\n\n\nPlease note that extra parameter (extra) is required. extra must be length of maximum value of m or longer. For detail, see “Customized allocation methods” section in calculation tutorial."
  },
  {
    "objectID": "CITATION.html",
    "href": "CITATION.html",
    "title": "Citation",
    "section": "",
    "text": "Citation\nTo cite package ‘PRcalc’ in publications use:\n\n  Song J, Kamahara Y (2024). _PRcalc: A Proportional Representation\n  Calculator_. R package version 0.8.6,\n  &lt;https://github.com/JaehyunSong/PRcalc/&gt;.\n\nA BibTeX entry for LaTeX users is\n\n  @Manual{,\n    title = {{PRcalc}: A Proportional Representation Calculator},\n    author = {Jaehyun Song and Yuta Kamahara},\n    year = {2024},\n    note = {R package version 0.8.6},\n    url = {https://github.com/JaehyunSong/PRcalc/},\n  }",
    "crumbs": [
      "Citation"
    ]
  },
  {
    "objectID": "tutorials/import.html",
    "href": "tutorials/import.html",
    "title": "Import Dataset",
    "section": "",
    "text": "library(tidyverse)\nlibrary(PRcalc)"
  },
  {
    "objectID": "tutorials/import.html#example-1-electoral-result",
    "href": "tutorials/import.html#example-1-electoral-result",
    "title": "Import Dataset",
    "section": "Example 1: Electoral result",
    "text": "Example 1: Electoral result\n\ndata(\"jp_lower_2021_result\")\n\njp_lower_2021_result\n\n# A tibble: 103 × 4\n   Party Pref          Votes Seats\n   &lt;chr&gt; &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;\n 1 Jimin Hokkaido     863300     3\n 2 Jimin Tohoku      1628233     6\n 3 Jimin Kitakanto   2172065     7\n 4 Jimin Minamikanto 2590787     7\n 5 Jimin Tokyo       2000084     5\n 6 Jimin Hokuriku    1468380     5\n 7 Jimin Tokai       2515841     8\n 8 Jimin Kinki       2407699     8\n 9 Jimin Chugoku     1352723     5\n10 Jimin Shikoku      664805     2\n# ℹ 93 more rows\n\nobj1 &lt;- as_prcalc(jp_lower_2021_result,\n                  l1   = \"Pref\",\n                  l2   = \"Party\",\n                  p    = \"Votes\",\n                  q    = \"Seats\",\n                  type = \"party\")\n\nplot(obj1, \n     subset_p  = c(\"Jimin\", \"Komei\", \"Rikken\", \n                   \"Kyosan\", \"Ishin\", \"Kokumin\"),\n     facet_col = 3,\n     angle     = 25)"
  },
  {
    "objectID": "tutorials/import.html#example-2-electoral-district-allocation-from-data.frame",
    "href": "tutorials/import.html#example-2-electoral-district-allocation-from-data.frame",
    "title": "Import Dataset",
    "section": "Example 2: Electoral district allocation (from data.frame)",
    "text": "Example 2: Electoral district allocation (from data.frame)\n\ndata(\"au_district_2010\")\n\nau_district_2010\n\n                          region        district electorates magnitude\n1   Australian Capital Territory        CANBERRA      124294         1\n2   Australian Capital Territory          FRASER      123647         1\n3                New South Wales           BANKS       98742         1\n4                New South Wales          BARTON       95231         1\n5                New South Wales       BENNELONG       98915         1\n6                New South Wales         BEROWRA       95124         1\n7                New South Wales        BLAXLAND       95362         1\n8                New South Wales       BRADFIELD       97255         1\n9                New South Wales          CALARE       98463         1\n10               New South Wales        CHARLTON       94474         1\n11               New South Wales         CHIFLEY       97605         1\n12               New South Wales            COOK      100733         1\n13               New South Wales          COWPER       94654         1\n14               New South Wales      CUNNINGHAM      100643         1\n15               New South Wales          DOBELL       93646         1\n16               New South Wales     EDEN-MONARO       96465         1\n17               New South Wales          FARRER       94026         1\n18               New South Wales          FOWLER       95564         1\n19               New South Wales         GILMORE       96340         1\n20               New South Wales       GRAYNDLER       98112         1\n21               New South Wales        GREENWAY       93837         1\n22               New South Wales          HUGHES       97998         1\n23               New South Wales            HUME       97719         1\n24               New South Wales          HUNTER       91523         1\n25               New South Wales KINGSFORD SMITH       97730         1\n26               New South Wales         LINDSAY       95975         1\n27               New South Wales            LYNE       92535         1\n28               New South Wales       MACARTHUR       90040         1\n29               New South Wales       MACKELLAR       98520         1\n30               New South Wales       MACQUARIE       97536         1\n31               New South Wales         MCMAHON       96061         1\n32               New South Wales        MITCHELL       93573         1\n33               New South Wales     NEW ENGLAND       99616         1\n34               New South Wales       NEWCASTLE       92855         1\n35               New South Wales    NORTH SYDNEY       97578         1\n36               New South Wales            PAGE       94336         1\n37               New South Wales          PARKES      100170         1\n38               New South Wales      PARRAMATTA       93999         1\n39               New South Wales        PATERSON       92140         1\n40               New South Wales            REID       95878         1\n41               New South Wales        RICHMOND       92391         1\n42               New South Wales        RIVERINA       98584         1\n43               New South Wales       ROBERTSON       96588         1\n44               New South Wales       SHORTLAND       94224         1\n45               New South Wales          SYDNEY       95286         1\n46               New South Wales         THROSBY       95871         1\n47               New South Wales       WARRINGAH       96708         1\n48               New South Wales          WATSON       97761         1\n49               New South Wales       WENTWORTH      101446         1\n50               New South Wales         WERRIWA       90963         1\n51            Northern Territory        LINGIARI       61168         1\n52            Northern Territory         SOLOMON       59891         1\n53                    Queensland           BLAIR       83045         1\n54                    Queensland          BONNER       92661         1\n55                    Queensland          BOWMAN       91856         1\n56                    Queensland        BRISBANE       92197         1\n57                    Queensland     CAPRICORNIA       91961         1\n58                    Queensland          DAWSON       94533         1\n59                    Queensland         DICKSON       90130         1\n60                    Queensland          FADDEN       85225         1\n61                    Queensland         FAIRFAX       89726         1\n62                    Queensland          FISHER       83724         1\n63                    Queensland           FLYNN       91349         1\n64                    Queensland           FORDE       82535         1\n65                    Queensland        GRIFFITH       92573         1\n66                    Queensland           GROOM       93364         1\n67                    Queensland         HERBERT       91044         1\n68                    Queensland         HINKLER       91371         1\n69                    Queensland         KENNEDY       94434         1\n70                    Queensland      LEICHHARDT       93113         1\n71                    Queensland          LILLEY       97407         1\n72                    Queensland         LONGMAN       87046         1\n73                    Queensland         MARANOA       97892         1\n74                    Queensland       MCPHERSON       90139         1\n75                    Queensland       MONCRIEFF       89150         1\n76                    Queensland         MORETON       92730         1\n77                    Queensland           OXLEY       82768         1\n78                    Queensland          PETRIE       86651         1\n79                    Queensland          RANKIN       94594         1\n80                    Queensland            RYAN       98239         1\n81                    Queensland        WIDE BAY       92607         1\n82                    Queensland          WRIGHT       85296         1\n83               South Australia        ADELAIDE       98519         1\n84               South Australia          BARKER      104845         1\n85               South Australia         BOOTHBY       97860         1\n86               South Australia            GREY       99775         1\n87               South Australia       HINDMARSH      100216         1\n88               South Australia        KINGSTON      102281         1\n89               South Australia           MAKIN       96233         1\n90               South Australia            MAYO      101510         1\n91               South Australia   PORT ADELAIDE      104280         1\n92               South Australia           STURT       99023         1\n93               South Australia       WAKEFIELD      100156         1\n94                      Tasmania            BASS       71686         1\n95                      Tasmania         BRADDON       71576         1\n96                      Tasmania         DENISON       71350         1\n97                      Tasmania        FRANKLIN       71122         1\n98                      Tasmania           LYONS       72875         1\n99                      Victoria           ASTON       93447         1\n100                     Victoria        BALLARAT       97756         1\n101                     Victoria          BATMAN       89131         1\n102                     Victoria         BENDIGO      100610         1\n103                     Victoria           BRUCE       88124         1\n104                     Victoria         CALWELL      101342         1\n105                     Victoria           CASEY       92317         1\n106                     Victoria        CHISHOLM       86220         1\n107                     Victoria     CORANGAMITE      101512         1\n108                     Victoria           CORIO       91924         1\n109                     Victoria          DEAKIN       87710         1\n110                     Victoria         DUNKLEY       95299         1\n111                     Victoria        FLINDERS      100852         1\n112                     Victoria      GELLIBRAND       95571         1\n113                     Victoria       GIPPSLAND       97521         1\n114                     Victoria       GOLDSTEIN       93918         1\n115                     Victoria          GORTON      113675         1\n116                     Victoria         HIGGINS       90409         1\n117                     Victoria            HOLT      108891         1\n118                     Victoria          HOTHAM       89529         1\n119                     Victoria            INDI       92914         1\n120                     Victoria          ISAACS      102769         1\n121                     Victoria        JAGAJAGA       95146         1\n122                     Victoria         KOOYONG       89626         1\n123                     Victoria        LA TROBE       97956         1\n124                     Victoria           LALOR      116976         1\n125                     Victoria          MALLEE       89824         1\n126                     Victoria     MARIBYRNONG       88413         1\n127                     Victoria          MCEWEN      115811         1\n128                     Victoria        MCMILLAN       93285         1\n129                     Victoria       MELBOURNE      102881         1\n130                     Victoria MELBOURNE PORTS       97766         1\n131                     Victoria         MENZIES       90931         1\n132                     Victoria          MURRAY       90182         1\n133                     Victoria         SCULLIN       90811         1\n134                     Victoria          WANNON       92236         1\n135                     Victoria           WILLS       98588         1\n136            Western Australia           BRAND       88186         1\n137            Western Australia         CANNING       90079         1\n138            Western Australia           COWAN       89536         1\n139            Western Australia          CURTIN       90430         1\n140            Western Australia          DURACK       85811         1\n141            Western Australia         FORREST       89649         1\n142            Western Australia       FREMANTLE       93378         1\n143            Western Australia         HASLUCK       93930         1\n144            Western Australia           MOORE       92340         1\n145            Western Australia        O'CONNOR       92902         1\n146            Western Australia          PEARCE       89562         1\n147            Western Australia           PERTH       91907         1\n148            Western Australia        STIRLING       91775         1\n149            Western Australia            SWAN       90817         1\n150            Western Australia         TANGNEY       92232         1\n\nobj2 &lt;- as_prcalc(au_district_2010,\n                  l1   = \"region\",\n                  l2   = \"district\",\n                  p    = \"electorates\",\n                  q    = \"magnitude\",\n                  type = \"district\")\n\nobj2\n\nRaw:\n   Level2 Australian Capital Territory New South Wales Northern Territory\n1       1                       124294           98742              61168\n2       2                       123647           95231              59891\n3       3                            0           98915                  0\n4       4                            0           95124                  0\n5       5                            0           95362                  0\n6       6                            0           97255                  0\n7       7                            0           98463                  0\n8       8                            0           94474                  0\n9       9                            0           97605                  0\n10     10                            0          100733                  0\n11     11                            0           94654                  0\n12     12                            0          100643                  0\n13     13                            0           93646                  0\n14     14                            0           96465                  0\n15     15                            0           94026                  0\n16     16                            0           95564                  0\n17     17                            0           96340                  0\n18     18                            0           98112                  0\n19     19                            0           93837                  0\n20     20                            0           97998                  0\n21     21                            0           97719                  0\n22     22                            0           91523                  0\n23     23                            0           97730                  0\n24     24                            0           95975                  0\n25     25                            0           92535                  0\n26     26                            0           90040                  0\n27     27                            0           98520                  0\n28     28                            0           97536                  0\n29     29                            0           96061                  0\n30     30                            0           93573                  0\n31     31                            0           99616                  0\n32     32                            0           92855                  0\n33     33                            0           97578                  0\n34     34                            0           94336                  0\n35     35                            0          100170                  0\n36     36                            0           93999                  0\n37     37                            0           92140                  0\n38     38                            0           95878                  0\n39     39                            0           92391                  0\n40     40                            0           98584                  0\n41     41                            0           96588                  0\n42     42                            0           94224                  0\n43     43                            0           95286                  0\n44     44                            0           95871                  0\n45     45                            0           96708                  0\n46     46                            0           97761                  0\n47     47                            0          101446                  0\n48     48                            0           90963                  0\n   Queensland South Australia Tasmania Victoria Western Australia  Total\n1       83045           98519    71686    93447             88186 719087\n2       92661          104845    71576    97756             90079 735686\n3       91856           97860    71350    89131             89536 538648\n4       92197           99775    71122   100610             90430 549258\n5       91961          100216    72875    88124             85811 534349\n6       94533          102281        0   101342             89649 485060\n7       90130           96233        0    92317             93378 470521\n8       85225          101510        0    86220             93930 461359\n9       89726          104280        0   101512             92340 485463\n10      83724           99023        0    91924             92902 468306\n11      91349          100156        0    87710             89562 463431\n12      82535               0        0    95299             91907 370384\n13      92573               0        0   100852             91775 378846\n14      93364               0        0    95571             90817 376217\n15      91044               0        0    97521             92232 374823\n16      91371               0        0    93918                 0 280853\n17      94434               0        0   113675                 0 304449\n18      93113               0        0    90409                 0 281634\n19      97407               0        0   108891                 0 300135\n20      87046               0        0    89529                 0 274573\n21      97892               0        0    92914                 0 288525\n22      90139               0        0   102769                 0 284431\n23      89150               0        0    95146                 0 282026\n24      92730               0        0    89626                 0 278331\n25      82768               0        0    97956                 0 273259\n26      86651               0        0   116976                 0 293667\n27      94594               0        0    89824                 0 282938\n28      98239               0        0    88413                 0 284188\n29      92607               0        0   115811                 0 304479\n30      85296               0        0    93285                 0 272154\n31          0               0        0   102881                 0 202497\n32          0               0        0    97766                 0 190621\n33          0               0        0    90931                 0 188509\n34          0               0        0    90182                 0 184518\n35          0               0        0    90811                 0 190981\n36          0               0        0    92236                 0 186235\n37          0               0        0    98588                 0 190728\n38          0               0        0        0                 0  95878\n39          0               0        0        0                 0  92391\n40          0               0        0        0                 0  98584\n41          0               0        0        0                 0  96588\n42          0               0        0        0                 0  94224\n43          0               0        0        0                 0  95286\n44          0               0        0        0                 0  95871\n45          0               0        0        0                 0  96708\n46          0               0        0        0                 0  97761\n47          0               0        0        0                 0 101446\n48          0               0        0        0                 0  90963\n\nResult:\n   Level2 Australian Capital Territory New South Wales Northern Territory\n1       1                            1               1                  1\n2       2                            1               1                  1\n3       3                            0               1                  0\n4       4                            0               1                  0\n5       5                            0               1                  0\n6       6                            0               1                  0\n7       7                            0               1                  0\n8       8                            0               1                  0\n9       9                            0               1                  0\n10     10                            0               1                  0\n11     11                            0               1                  0\n12     12                            0               1                  0\n13     13                            0               1                  0\n14     14                            0               1                  0\n15     15                            0               1                  0\n16     16                            0               1                  0\n17     17                            0               1                  0\n18     18                            0               1                  0\n19     19                            0               1                  0\n20     20                            0               1                  0\n21     21                            0               1                  0\n22     22                            0               1                  0\n23     23                            0               1                  0\n24     24                            0               1                  0\n25     25                            0               1                  0\n26     26                            0               1                  0\n27     27                            0               1                  0\n28     28                            0               1                  0\n29     29                            0               1                  0\n30     30                            0               1                  0\n31     31                            0               1                  0\n32     32                            0               1                  0\n33     33                            0               1                  0\n34     34                            0               1                  0\n35     35                            0               1                  0\n36     36                            0               1                  0\n37     37                            0               1                  0\n38     38                            0               1                  0\n39     39                            0               1                  0\n40     40                            0               1                  0\n41     41                            0               1                  0\n42     42                            0               1                  0\n43     43                            0               1                  0\n44     44                            0               1                  0\n45     45                            0               1                  0\n46     46                            0               1                  0\n47     47                            0               1                  0\n48     48                            0               1                  0\n   Queensland South Australia Tasmania Victoria Western Australia Total\n1           1               1        1        1                 1     8\n2           1               1        1        1                 1     8\n3           1               1        1        1                 1     6\n4           1               1        1        1                 1     6\n5           1               1        1        1                 1     6\n6           1               1        0        1                 1     5\n7           1               1        0        1                 1     5\n8           1               1        0        1                 1     5\n9           1               1        0        1                 1     5\n10          1               1        0        1                 1     5\n11          1               1        0        1                 1     5\n12          1               0        0        1                 1     4\n13          1               0        0        1                 1     4\n14          1               0        0        1                 1     4\n15          1               0        0        1                 1     4\n16          1               0        0        1                 0     3\n17          1               0        0        1                 0     3\n18          1               0        0        1                 0     3\n19          1               0        0        1                 0     3\n20          1               0        0        1                 0     3\n21          1               0        0        1                 0     3\n22          1               0        0        1                 0     3\n23          1               0        0        1                 0     3\n24          1               0        0        1                 0     3\n25          1               0        0        1                 0     3\n26          1               0        0        1                 0     3\n27          1               0        0        1                 0     3\n28          1               0        0        1                 0     3\n29          1               0        0        1                 0     3\n30          1               0        0        1                 0     3\n31          0               0        0        1                 0     2\n32          0               0        0        1                 0     2\n33          0               0        0        1                 0     2\n34          0               0        0        1                 0     2\n35          0               0        0        1                 0     2\n36          0               0        0        1                 0     2\n37          0               0        0        1                 0     2\n38          0               0        0        0                 0     1\n39          0               0        0        0                 0     1\n40          0               0        0        0                 0     1\n41          0               0        0        0                 0     1\n42          0               0        0        0                 0     1\n43          0               0        0        0                 0     1\n44          0               0        0        0                 0     1\n45          0               0        0        0                 0     1\n46          0               0        0        0                 0     1\n47          0               0        0        0                 0     1\n48          0               0        0        0                 0     1\n\nParameters:\n  Allocation method: \n  Extra parameter: \n  Threshold: \n\nMagnitude: \nAustralian Capital Territory              New South Wales \n                           2                           48 \n          Northern Territory                   Queensland \n                           2                           30 \n             South Australia                     Tasmania \n                          11                            5 \n                    Victoria            Western Australia \n                          37                           15 \n\ndecompose(obj2, alpha = 0, as_disprop = FALSE)\n\nalpha = 0 \nalpha-divergence  Reapportionment    Redistricting \n     0.004280586      0.003107794      0.001172792 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms."
  },
  {
    "objectID": "tutorials/import.html#example-3-electoral-district-allocation-from-.csv-file",
    "href": "tutorials/import.html#example-3-electoral-district-allocation-from-.csv-file",
    "title": "Import Dataset",
    "section": "Example 3: Electoral district allocation (from .csv file)",
    "text": "Example 3: Electoral district allocation (from .csv file)\nSample dataset can be downloaded from here.\n\n# Because default value of `type` is `\"district\"`, you can omit it.\nobj3 &lt;- read_prcalc(\"../data/sample_dataset.csv\",\n                    l1 = \"region\",\n                    l2 = \"district\",\n                    p  = \"electorates\",\n                    q  = \"magnitude\")\n\nindex(obj3)\n\nError in UseMethod(\"index\"): no applicable method for 'index' applied to an object of class \"NULL\""
  },
  {
    "objectID": "tutorials/import.html#example-4",
    "href": "tutorials/import.html#example-4",
    "title": "Import Dataset",
    "section": "Example 4:",
    "text": "Example 4:\n\ndata(\"br_district_2010\")\n\nhead(br_district_2010)\n\n           district magnitude population\n1         Sao Paulo        70   39924091\n2      Minas Gerais        53   19159260\n3    Rio de Janeiro        46   15180636\n4             Bahia        39   13633969\n5 Rio Grande do Sul        31   10576758\n6            Parana        30   10226737\n\n# In Brazil, proportionality is followed as a principle, with the exception that there should be a minimum of eight (8) members and a maximum of seventy (70) members per state. (source: Wikipedia) \nobj4 &lt;- br_district_2010 |&gt; \n  as_prcalc(l1   = \"district\",\n            p    = \"population\",\n            q    = \"magnitude\",\n            type = \"party\")\n\nobj4\n\nRaw:\n                Level2 National\n1            Sao Paulo 39924091\n2         Minas Gerais 19159260\n3       Rio de Janeiro 15180636\n4                Bahia 13633969\n5    Rio Grande do Sul 10576758\n6               Parana 10226737\n7           Pernambuco  8541250\n8                Ceara  8450527\n9             Maranhao  6424340\n10               Goias  5849105\n11                Para  7443904\n12      Santa Catarina  6178603\n13             Paraiba  3753633\n14      Espirito Santo  3392775\n15               Piaui  3086448\n16             Alagoas  3093994\n17               Acre    707125\n18            Amazonas  3350773\n19               Amapa   648553\n20    Distrito Federal  2469489\n21  Mato Grosso do Sul  2404256\n22         Mato Grosso  2954625\n23 Rio Grande do Norte  3121451\n24            Rondonia  1535625\n25             Roraima   425398\n26             Sergipe  2036227\n27           Tocantins  1373551\n\nResult:\n                Level2 National\n1            Sao Paulo       70\n2         Minas Gerais       53\n3       Rio de Janeiro       46\n4                Bahia       39\n5    Rio Grande do Sul       31\n6               Parana       30\n7           Pernambuco       25\n8                Ceara       22\n9             Maranhao       18\n10               Goias       17\n11                Para       17\n12      Santa Catarina       16\n13             Paraiba       12\n14      Espirito Santo       10\n15               Piaui       10\n16             Alagoas        9\n17               Acre         8\n18            Amazonas        8\n19               Amapa        8\n20    Distrito Federal        8\n21  Mato Grosso do Sul        8\n22         Mato Grosso        8\n23 Rio Grande do Norte        8\n24            Rondonia        8\n25             Roraima        8\n26             Sergipe        8\n27           Tocantins        8\n\nParameters:\n  Allocation method: \n  Extra parameter: \n  Threshold: \n\nMagnitude: 513\n\nobj5 &lt;- br_district_2010 |&gt; \n  select(-magnitude) |&gt; \n  prcalc(m = 513, method = \"hn\")\n\nlist(obj4, obj5) |&gt; \n  compare() |&gt; \n  plot(angle = 45)\n\n\n\n\n\n\n\nlist(index(obj4), index(obj5)) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE, hide_id = TRUE)\n\n\n\n\n\n\n\n\nIndex\nModel1\nModel2\n\n\n\n\nD’Hondt\n6.816\n1.118\n\n\nMonroe\n0.080\n0.003\n\n\nMaximum Absolute Deviation\n0.078\n0.001\n\n\nMax-Min ratio\n10.726\n1.312\n\n\nRae\n0.007\n0.001\n\n\nLoosemore & Hanby\n0.094\n0.007\n\n\nGrofman\n0.016\n0.001\n\n\nLijphart\n0.039\n0.000\n\n\nGallagher\n0.059\n0.002\n\n\nGeneralized Gallagher\n0.059\n0.002\n\n\nGatev\n0.215\n0.007\n\n\nRyabtsev\n0.154\n0.005\n\n\nSzalai\n0.249\n0.025\n\n\nWeighted Szalai\n0.160\n0.012\n\n\nAleskerov & Platonov\n1.802\n1.036\n\n\nGini\n0.139\n0.008\n\n\nAtkinson\n0.082\n0.001\n\n\nSainte-Laguë\n0.208\n0.001\n\n\nCox & Shugart\n0.692\n1.000\n\n\nFarina\n0.291\n0.011\n\n\nOrtona\n0.119\n0.009\n\n\nCosine Dissimilarity\n0.034\n0.000\n\n\nLebeda’s RR (Mixture D’Hondt)\n0.853\n0.105\n\n\nLebeda’s ARR\n0.032\n0.004\n\n\nLebeda’s SRR\n0.259\n0.031\n\n\nLebeda’s WDRR\n0.347\n0.040\n\n\nKullback-Leibler Surprise\n0.064\n0.000\n\n\nLikelihood Ratio Statistic\n0.099\n0.001\n\n\nChi Squared\n0.089\n0.001\n\n\nHellinger Distance\n0.117\n0.008\n\n\nalpha-Divergence\n0.104\n0.000"
  },
  {
    "objectID": "tutorials/disproportionality.html",
    "href": "tutorials/disproportionality.html",
    "title": "Measuring disproportionality",
    "section": "",
    "text": "library(PRcalc)\nlibrary(tidyverse)\n\n\ndata(\"jp_lower_2021_en\")\n\n# D'Hondt / Jefferson method\nobj1 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"dt\")\n\n# Hare-Niemeyer method\nobj2 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"hare\")\n\n# Sainte-Laguë / Webster method\nobj3 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"sl\")\n\nlist(\"Jefferson\" = obj1,\n     \"Hare\"      = obj2,\n     \"Webster\"   = obj3) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nJefferson\nHare\nWebster\n\n\n\n\nLDP\n67\n62\n63\n\n\nNKP\n24\n23\n24\n\n\nCDP\n40\n36\n36\n\n\nJCP\n10\n13\n13\n\n\nJIP\n26\n26\n26\n\n\nDPP\n5\n8\n7\n\n\nSDP\n0\n1\n1\n\n\nReiwa\n4\n7\n6\n\n\nNHK\n0\n0\n0\n\n\nSSN\n0\n0\n0\n\n\nJFP\n0\n0\n0\n\n\nYamato\n0\n0\n0\n\n\nCorona\n0\n0\n0"
  },
  {
    "objectID": "tutorials/disproportionality.html#preparation",
    "href": "tutorials/disproportionality.html#preparation",
    "title": "Measuring disproportionality",
    "section": "",
    "text": "library(PRcalc)\nlibrary(tidyverse)\n\n\ndata(\"jp_lower_2021_en\")\n\n# D'Hondt / Jefferson method\nobj1 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"dt\")\n\n# Hare-Niemeyer method\nobj2 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"hare\")\n\n# Sainte-Laguë / Webster method\nobj3 &lt;- prcalc(jp_lower_2021_en, \n               m = c(8, 13, 19, 22, 17, 11, 21, 28, 11, 6, 20), \n               method = \"sl\")\n\nlist(\"Jefferson\" = obj1,\n     \"Hare\"      = obj2,\n     \"Webster\"   = obj3) |&gt; \n  compare() |&gt; \n  print(use_gt = TRUE)\n\n\n\n\n\n\n\n\nParty\nJefferson\nHare\nWebster\n\n\n\n\nLDP\n67\n62\n63\n\n\nNKP\n24\n23\n24\n\n\nCDP\n40\n36\n36\n\n\nJCP\n10\n13\n13\n\n\nJIP\n26\n26\n26\n\n\nDPP\n5\n8\n7\n\n\nSDP\n0\n1\n1\n\n\nReiwa\n4\n7\n6\n\n\nNHK\n0\n0\n0\n\n\nSSN\n0\n0\n0\n\n\nJFP\n0\n0\n0\n\n\nYamato\n0\n0\n0\n\n\nCorona\n0\n0\n0"
  },
  {
    "objectID": "tutorials/disproportionality.html#calculation-of-disproportionality-indices.",
    "href": "tutorials/disproportionality.html#calculation-of-disproportionality-indices.",
    "title": "Measuring disproportionality",
    "section": "Calculation of disproportionality indices.",
    "text": "Calculation of disproportionality indices.\n\nSome parameters are required for calculation of indices. Default is 2.\n\nk：For Generalized Gallagher\neta：For Atkinson\nalpha：For \\(\\alpha\\)-divergence\n\n\n\nindex1 &lt;- index(obj1) # k = 2; eta = 2; alpha = 2\nindex1\n\n            ID                         Index   Value\n1       dhondt                       D’Hondt 1.13647\n2       monroe                        Monroe 0.05321\n3       maxdev    Maximum Absolute Deviation 0.03413\n4     mm_ratio                 Max-Min ratio     Inf\n5          rae                           Rae 0.01256\n6           lh             Loosemore & Hanby 0.08162\n7      grofman                       Grofman 0.03335\n8     lijphart                      Lijphart 0.03071\n9    gallagher                     Gallagher 0.04129\n10 g_gallagher         Generalized Gallagher 0.04129\n11       gatev                         Gatev 0.08744\n12    ryabtsev                      Ryabtsev 0.06195\n13      szalai                        Szalai 0.68738\n14    w_szalai               Weighted Szalai 0.15384\n15          ap          Aleskerov & Platonov 1.09773\n16        gini                          Gini 0.07989\n17    atkinson                      Atkinson 1.00000\n18          sl                  Sainte-Laguë 0.05825\n19          cs                 Cox & Shugart 1.13266\n20      farina                        Farina 0.10153\n21      ortona                        Ortona 0.12490\n22          cd          Cosine Dissimilarity 0.00417\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.12008\n24         arr                  Lebeda’s ARR 0.00924\n25         srr                  Lebeda’s SRR 0.04488\n26        wdrr                 Lebeda’s WDRR 0.09444\n27          kl     Kullback-Leibler Surprise 0.04684\n28          lr    Likelihood Ratio Statistic     Inf\n29       chisq                   Chi Squared 0.03308\n30   hellinger            Hellinger Distance 0.14218\n31          ad              alpha-Divergence 0.02912\n\n\n\nindex2 &lt;- index(obj1, alpha = 1) # k = 2; eta = 2; alpha = 1\nindex2\n\n            ID                         Index   Value\n1       dhondt                       D’Hondt 1.13647\n2       monroe                        Monroe 0.05321\n3       maxdev    Maximum Absolute Deviation 0.03413\n4     mm_ratio                 Max-Min ratio     Inf\n5          rae                           Rae 0.01256\n6           lh             Loosemore & Hanby 0.08162\n7      grofman                       Grofman 0.03335\n8     lijphart                      Lijphart 0.03071\n9    gallagher                     Gallagher 0.04129\n10 g_gallagher         Generalized Gallagher 0.04129\n11       gatev                         Gatev 0.08744\n12    ryabtsev                      Ryabtsev 0.06195\n13      szalai                        Szalai 0.68738\n14    w_szalai               Weighted Szalai 0.15384\n15          ap          Aleskerov & Platonov 1.09773\n16        gini                          Gini 0.07989\n17    atkinson                      Atkinson 1.00000\n18          sl                  Sainte-Laguë 0.05825\n19          cs                 Cox & Shugart 1.13266\n20      farina                        Farina 0.10153\n21      ortona                        Ortona 0.12490\n22          cd          Cosine Dissimilarity 0.00417\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.12008\n24         arr                  Lebeda’s ARR 0.00924\n25         srr                  Lebeda’s SRR 0.04488\n26        wdrr                 Lebeda’s WDRR 0.09444\n27          kl     Kullback-Leibler Surprise 0.04684\n28          lr    Likelihood Ratio Statistic     Inf\n29       chisq                   Chi Squared 0.03308\n30   hellinger            Hellinger Distance 0.14218\n31          ad              alpha-Divergence 0.04684\n\n\n\nPrinting\nYou can extract specific indices using [ operator.\n\n# Extract Gallagher index.\nindex1[\"gallagher\"]\n\n gallagher \n0.04128719 \n\n\n\n# Extract Gallagher index and alpha-divergence.\nindex1[c(\"gallagher\", \"ad\")]\n\n gallagher         ad \n0.04128719 0.02912491 \n\n\nThe identifiers for each indicator are as follows:\n\n\nError in gt(tibble(ID = attr(index1, \"names\"), Name = attr(index1, \"labels\"))): could not find function \"gt\"\n\n\nThe subset argument of print() function can be used to output the result in a tabular format.\n\n# Extract a subset of indices.\nprint(index1, subset = c(\"dhondt\", \"gallagher\", \"lh\", \"ad\"))\n\n         ID             Index  Value\n1    dhondt           D’Hondt 1.1365\n2        lh Loosemore & Hanby 0.0816\n3 gallagher         Gallagher 0.0413\n4        ad  alpha-Divergence 0.0291\n\n\nThe hide_id argument can also be used to hide the ID column.\n\n# Hide ID column.\nprint(index1, \n      subset  = c(\"dhondt\", \"gallagher\", \"lh\", \"ad\"),\n      hide_id = TRUE)\n\n              Index  Value\n1           D’Hondt 1.1365\n2 Loosemore & Hanby 0.0816\n3         Gallagher 0.0413\n4  alpha-Divergence 0.0291\n\n\nThe use_gt argument can be used to print results using {gt} package.\n\n# Use {gt} package\nprint(index2, \n      subset  = c(\"dhondt\", \"gallagher\", \"lh\", \"ad\"),\n      hide_id = TRUE,\n      use_gt  = TRUE)\n\n\n\n\n\n\n\n\nIndex\nValue\n\n\n\n\nD’Hondt\n1.136\n\n\nLoosemore & Hanby\n0.082\n\n\nGallagher\n0.041\n\n\nalpha-Divergence\n0.047\n\n\n\n\n\n\n\n\n\n\nVisulaization\n\nplot(index2)\n\nDon't know how to automatically pick scale for object of type &lt;prcalc_index&gt;.\nDefaulting to continuous.\n\n\n\n\n\n\n\n\nplot(index2, style = \"lollipop\") # lollipop chart\n\nDon't know how to automatically pick scale for object of type &lt;prcalc_index&gt;.\nDefaulting to continuous.\n\n\n\n\n\n\n\n\n\n\nplot(index2, index = c(\"dhondt\", \"gallagher\", \"lh\", \"ad\"))\n\nDon't know how to automatically pick scale for object of type &lt;prcalc_index&gt;.\nDefaulting to continuous."
  },
  {
    "objectID": "tutorials/disproportionality.html#comparison",
    "href": "tutorials/disproportionality.html#comparison",
    "title": "Measuring disproportionality",
    "section": "Comparison",
    "text": "Comparison\n\ncompare(list(index(obj1), index(obj2), index(obj3)))\n\n            ID                         Index  Model1   Model2  Model3\n1       dhondt                       D’Hondt 1.13647 1.055589 1.10148\n2       monroe                        Monroe 0.05321 0.020396 0.02505\n3       maxdev    Maximum Absolute Deviation 0.03413 0.013865 0.01387\n4     mm_ratio                 Max-Min ratio     Inf      Inf     Inf\n5          rae                           Rae 0.01256 0.004263 0.00577\n6           lh             Loosemore & Hanby 0.08162 0.027708 0.03753\n7      grofman                       Grofman 0.03335 0.011323 0.01534\n8     lijphart                      Lijphart 0.03071 0.005143 0.00798\n9    gallagher                     Gallagher 0.04129 0.015827 0.01944\n10 g_gallagher         Generalized Gallagher 0.04129 0.015827 0.01944\n11       gatev                         Gatev 0.08744 0.034607 0.04227\n12    ryabtsev                      Ryabtsev 0.06195 0.024478 0.02990\n13      szalai                        Szalai 0.68738 0.636499 0.63706\n14    w_szalai               Weighted Szalai 0.15384 0.105784 0.10847\n15          ap          Aleskerov & Platonov 1.09773 1.029574 1.04611\n16        gini                          Gini 0.07989 0.032180 0.04213\n17    atkinson                      Atkinson 1.00000 1.000000 1.00000\n18          sl                  Sainte-Laguë 0.05825 0.024911 0.02720\n19          cs                 Cox & Shugart 1.13266 1.035874 1.05312\n20      farina                        Farina 0.10153 0.047980 0.05482\n21      ortona                        Ortona 0.12490 0.042402 0.05743\n22          cd          Cosine Dissimilarity 0.00417 0.000932 0.00122\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.12008 0.052662 0.09213\n24         arr                  Lebeda’s ARR 0.00924 0.004051 0.00709\n25         srr                  Lebeda’s SRR 0.04488 0.023669 0.03500\n26        wdrr                 Lebeda’s WDRR 0.09444 0.036026 0.05573\n27          kl     Kullback-Leibler Surprise 0.04684 0.021767 0.02292\n28          lr    Likelihood Ratio Statistic     Inf      Inf     Inf\n29       chisq                   Chi Squared 0.03308 0.026543 0.02888\n30   hellinger            Hellinger Distance 0.14218 0.098133 0.09959\n31          ad              alpha-Divergence 0.02912 0.012455 0.01360\n\ncompare(list(\"D'Hondt\"      = index(obj1), \n             \"Hare\"         = index(obj2), \n             \"Sainte-Laguë\" = index(obj3)))\n\n            ID                         Index D'Hondt     Hare Sainte-Laguë\n1       dhondt                       D’Hondt 1.13647 1.055589      1.10148\n2       monroe                        Monroe 0.05321 0.020396      0.02505\n3       maxdev    Maximum Absolute Deviation 0.03413 0.013865      0.01387\n4     mm_ratio                 Max-Min ratio     Inf      Inf          Inf\n5          rae                           Rae 0.01256 0.004263      0.00577\n6           lh             Loosemore & Hanby 0.08162 0.027708      0.03753\n7      grofman                       Grofman 0.03335 0.011323      0.01534\n8     lijphart                      Lijphart 0.03071 0.005143      0.00798\n9    gallagher                     Gallagher 0.04129 0.015827      0.01944\n10 g_gallagher         Generalized Gallagher 0.04129 0.015827      0.01944\n11       gatev                         Gatev 0.08744 0.034607      0.04227\n12    ryabtsev                      Ryabtsev 0.06195 0.024478      0.02990\n13      szalai                        Szalai 0.68738 0.636499      0.63706\n14    w_szalai               Weighted Szalai 0.15384 0.105784      0.10847\n15          ap          Aleskerov & Platonov 1.09773 1.029574      1.04611\n16        gini                          Gini 0.07989 0.032180      0.04213\n17    atkinson                      Atkinson 1.00000 1.000000      1.00000\n18          sl                  Sainte-Laguë 0.05825 0.024911      0.02720\n19          cs                 Cox & Shugart 1.13266 1.035874      1.05312\n20      farina                        Farina 0.10153 0.047980      0.05482\n21      ortona                        Ortona 0.12490 0.042402      0.05743\n22          cd          Cosine Dissimilarity 0.00417 0.000932      0.00122\n23          rr Lebeda’s RR (Mixture D’Hondt) 0.12008 0.052662      0.09213\n24         arr                  Lebeda’s ARR 0.00924 0.004051      0.00709\n25         srr                  Lebeda’s SRR 0.04488 0.023669      0.03500\n26        wdrr                 Lebeda’s WDRR 0.09444 0.036026      0.05573\n27          kl     Kullback-Leibler Surprise 0.04684 0.021767      0.02292\n28          lr    Likelihood Ratio Statistic     Inf      Inf          Inf\n29       chisq                   Chi Squared 0.03308 0.026543      0.02888\n30   hellinger            Hellinger Distance 0.14218 0.098133      0.09959\n31          ad              alpha-Divergence 0.02912 0.012455      0.01360\n\ncompare(list(\"D'Hondt\"      = index(obj1), \n             \"Hare\"         = index(obj2), \n             \"Sainte-Laguë\" = index(obj3)))|&gt; \n  print(hide_id = TRUE)\n\n                           Index D'Hondt     Hare Sainte-Laguë\n1                        D’Hondt 1.13647 1.055589      1.10148\n2                         Monroe 0.05321 0.020396      0.02505\n3     Maximum Absolute Deviation 0.03413 0.013865      0.01387\n4                  Max-Min ratio     Inf      Inf          Inf\n5                            Rae 0.01256 0.004263      0.00577\n6              Loosemore & Hanby 0.08162 0.027708      0.03753\n7                        Grofman 0.03335 0.011323      0.01534\n8                       Lijphart 0.03071 0.005143      0.00798\n9                      Gallagher 0.04129 0.015827      0.01944\n10         Generalized Gallagher 0.04129 0.015827      0.01944\n11                         Gatev 0.08744 0.034607      0.04227\n12                      Ryabtsev 0.06195 0.024478      0.02990\n13                        Szalai 0.68738 0.636499      0.63706\n14               Weighted Szalai 0.15384 0.105784      0.10847\n15          Aleskerov & Platonov 1.09773 1.029574      1.04611\n16                          Gini 0.07989 0.032180      0.04213\n17                      Atkinson 1.00000 1.000000      1.00000\n18                  Sainte-Laguë 0.05825 0.024911      0.02720\n19                 Cox & Shugart 1.13266 1.035874      1.05312\n20                        Farina 0.10153 0.047980      0.05482\n21                        Ortona 0.12490 0.042402      0.05743\n22          Cosine Dissimilarity 0.00417 0.000932      0.00122\n23 Lebeda’s RR (Mixture D’Hondt) 0.12008 0.052662      0.09213\n24                  Lebeda’s ARR 0.00924 0.004051      0.00709\n25                  Lebeda’s SRR 0.04488 0.023669      0.03500\n26                 Lebeda’s WDRR 0.09444 0.036026      0.05573\n27     Kullback-Leibler Surprise 0.04684 0.021767      0.02292\n28    Likelihood Ratio Statistic     Inf      Inf          Inf\n29                   Chi Squared 0.03308 0.026543      0.02888\n30            Hellinger Distance 0.14218 0.098133      0.09959\n31              alpha-Divergence 0.02912 0.012455      0.01360\n\ncompare(list(\"D'Hondt\"      = index(obj1), \n             \"Hare\"         = index(obj2), \n             \"Sainte-Laguë\" = index(obj3))) |&gt; \n  print(subset  = c(\"dhondt\", \"gallagher\", \"lh\", \"ad\"),\n        hide_id = TRUE,\n        use_gt  = TRUE)\n\n\n\n\n\n\n\n\nIndex\nD'Hondt\nHare\nSainte-Laguë\n\n\n\n\nD’Hondt\n1.136\n1.056\n1.101\n\n\nLoosemore & Hanby\n0.082\n0.028\n0.038\n\n\nGallagher\n0.041\n0.016\n0.019\n\n\nalpha-Divergence\n0.029\n0.012\n0.014\n\n\n\n\n\n\n\n\n\ncompare(list(\"D'Hondt\"      = index(obj1), \n             \"Hare\"         = index(obj2), \n             \"Sainte-Laguë\" = index(obj3))) |&gt; \n  plot() +\n  ggplot2::labs(x = \"Values\", y = \"Indices\", fill = \"Method\")\n\nDon't know how to automatically pick scale for object of type &lt;prcalc_index&gt;.\nDefaulting to continuous."
  },
  {
    "objectID": "tutorials/disproportionality.html#marginal-and-joint-distribution",
    "href": "tutorials/disproportionality.html#marginal-and-joint-distribution",
    "title": "Measuring disproportionality",
    "section": "Marginal and joint distribution",
    "text": "Marginal and joint distribution\nFor illustration purposes, we extract some parties and districts from jp_lower_2021_en and allocate seats.\n\ntiny_data &lt;- jp_lower_2021_en |&gt; \n  filter(Party %in% c(\"LDP\", \"NKP\", \"CDP\", \"JCP\", \"JIP\")) |&gt; \n  select(Party, Tokyo, Tokai, Kinki, Kyushu)\n\ntiny_obj &lt;- prcalc(tiny_data, m = c(30, 20, 40, 20), method = \"dt\")\ntiny_obj\n\nRaw:\n  Party   Tokyo   Tokai   Kinki  Kyushu   Total\n1   LDP 2000084 2515841 2407699 2250966 9174590\n2   NKP  715450  784976 1155683 1040756 3696865\n3   CDP 1293281 1485947 1090666 1266801 5136695\n4   JCP  670340  408606  736156  365658 2180760\n5   JIP  858577  694630 3180219  540338 5273764\n\nResult:\n  Party Tokyo Tokai Kinki Kyushu Total\n1   LDP    11     9    12      8    40\n2   NKP     4     3     5      4    16\n3   CDP     7     5     5      5    22\n4   JCP     3     1     3      1     8\n5   JIP     5     2    15      2    24\n\nParameters:\n  Allocation method: D'Hondt (Jefferson) method \n  Extra parameter: \n  Threshold: 0 \n\nMagnitude: \n Tokyo  Tokai  Kinki Kyushu \n    30     20     40     20 \n\nindex(tiny_obj)[\"ad\"]\n\n         ad \n0.001292773 \n\n\nCalculating \\(\\alpha\\)-diveregen from tiny_obj yields a result of 0.00129 (\\(\\alpha\\) = 2). Disproportionality is calculated based on the number of votes and seats. However, if the same party spans multiple districts, the results will vary depending on how votes and seats are defined. {PRcalc} defines the number of votes and seats obtained using the marginal or simultaneous distribution of the vote and seat matrices.\n\nUsing marginal distribution of rows\nWhen parties (level 2) span districts (level 1), as in tiny_obj, the marginal distribution of rows (level 2) can be used as the number of votes and seats. That is, the sum of the votes and seats won by each party in each district is used.\n\n\n\n\n\n\n\n\n\nParty\nTokyo\nTokai\nKinki\nKyushu\nTotal\n\n\n\n\nLDP\n2000084\n2515841\n2407699\n2250966\n9174590\n\n\nNKP\n715450\n784976\n1155683\n1040756\n3696865\n\n\nCDP\n1293281\n1485947\n1090666\n1266801\n5136695\n\n\nJCP\n670340\n408606\n736156\n365658\n2180760\n\n\nJIP\n858577\n694630\n3180219\n540338\n5273764\n\n\nTotal\n5537732\n5890000\n8570423\n5464519\n25462674\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty\nTokyo\nTokai\nKinki\nKyushu\nTotal\n\n\n\n\nLDP\n11\n9\n12\n8\n40\n\n\nNKP\n4\n3\n5\n4\n16\n\n\nCDP\n7\n5\n5\n5\n22\n\n\nJCP\n3\n1\n3\n1\n8\n\n\nJIP\n5\n2\n15\n2\n24\n\n\nTotal\n30\n20\n40\n20\n110\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty\nVote\nSeat\n\n\n\n\nLDP\n9174590\n40\n\n\nNKP\n3696865\n16\n\n\nCDP\n5136695\n22\n\n\nJCP\n2180760\n8\n\n\nJIP\n5273764\n24\n\n\n\n\n\n\n\n\nUse the peripheral distribution of rows by setting unit = \"l2\", which is the default.\n\nindex(tiny_obj, unit = \"l2\")[\"ad\"]\n\n         ad \n0.001292773 \n\n\nHowever, if level 2 is completely nested instead of spanning level 1, then the marginalization of level 2 is meaningless. In this case, we recommend peripheral distribution of level 1 (\"l1\") or joint distribution (\"joint\").\n\n\nUsing marginal distribution of columns\nIf unit = \"l1\", the marginal distribution of column (level 1; in this example, district) is used as the number of votes and seats.\n\n\n\n\n\n\n\n\n\nParty\nTokyo\nTokai\nKinki\nKyushu\nTotal\n\n\n\n\nLDP\n2000084\n2515841\n2407699\n2250966\n9174590\n\n\nNKP\n715450\n784976\n1155683\n1040756\n3696865\n\n\nCDP\n1293281\n1485947\n1090666\n1266801\n5136695\n\n\nJCP\n670340\n408606\n736156\n365658\n2180760\n\n\nJIP\n858577\n694630\n3180219\n540338\n5273764\n\n\nTotal\n5537732\n5890000\n8570423\n5464519\n25462674\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty\nTokyo\nTokai\nKinki\nKyushu\nTotal\n\n\n\n\nLDP\n11\n9\n12\n8\n40\n\n\nNKP\n4\n3\n5\n4\n16\n\n\nCDP\n7\n5\n5\n5\n22\n\n\nJCP\n3\n1\n3\n1\n8\n\n\nJIP\n5\n2\n15\n2\n24\n\n\nTotal\n30\n20\n40\n20\n110\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty\nVote\nSeat\n\n\n\n\nTokyo\n5537732\n30\n\n\nTokai\n5890000\n20\n\n\nKinki\n8570423\n40\n\n\nKyushu\n5464519\n20\n\n\n\n\n\n\n\n\n\nindex(tiny_obj, unit = \"l1\")[\"ad\"]\n\n        ad \n0.01590448 \n\n\nThe \\(\\alpha\\)-divergence in the case of marginalization in district matches the value of reapportionment-stage in decomposition.\n\n\nUsing joint distritubion\nIf unit = \"joint\", the votes and seats won by each party in their respective districts are used as is.\n\n\n\n\n\n\n\n\n\nParty\nTokyo\nTokai\nKinki\nKyushu\nTotal\n\n\n\n\nLDP\n2000084\n2515841\n2407699\n2250966\n9174590\n\n\nNKP\n715450\n784976\n1155683\n1040756\n3696865\n\n\nCDP\n1293281\n1485947\n1090666\n1266801\n5136695\n\n\nJCP\n670340\n408606\n736156\n365658\n2180760\n\n\nJIP\n858577\n694630\n3180219\n540338\n5273764\n\n\nTotal\n5537732\n5890000\n8570423\n5464519\n25462674\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty\nTokyo\nTokai\nKinki\nKyushu\nTotal\n\n\n\n\nLDP\n11\n9\n12\n8\n40\n\n\nNKP\n4\n3\n5\n4\n16\n\n\nCDP\n7\n5\n5\n5\n22\n\n\nJCP\n3\n1\n3\n1\n8\n\n\nJIP\n5\n2\n15\n2\n24\n\n\nTotal\n30\n20\n40\n20\n110\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nParty_Pref\nVote\nSeat\n\n\n\n\nLDP_Tokyo\n2000084\n11\n\n\nLDP_Tokai\n2515841\n9\n\n\nLDP_Kinki\n2407699\n12\n\n\nLDP_Kyushu\n2250966\n8\n\n\nNKP_Tokyo\n715450\n4\n\n\nNKP_Tokai\n784976\n3\n\n\nNKP_Kinki\n1155683\n5\n\n\nNKP_Kyushu\n1040756\n4\n\n\nCDP_Tokyo\n1293281\n7\n\n\nCDP_Tokai\n1485947\n5\n\n\nCDP_Kinki\n1090666\n5\n\n\nCDP_Kyushu\n1266801\n5\n\n\nJCP_Tokyo\n670340\n3\n\n\nJCP_Tokai\n408606\n1\n\n\nJCP_Kinki\n736156\n3\n\n\nJCP_Kyushu\n365658\n1\n\n\nJIP_Tokyo\n858577\n5\n\n\nJIP_Tokai\n694630\n2\n\n\nJIP_Kinki\n3180219\n15\n\n\nJIP_Kyushu\n540338\n2\n\n\n\n\n\n\n\n\n\nindex(tiny_obj, unit = \"joint\")[\"ad\"]\n\n        ad \n0.01872325 \n\n\n\n\nindex() and decompose()\n\ndecompose(tiny_obj)\n\nalpha = 2 \nalpha-divergence  Reapportionment    Redistricting \n      0.01872325       0.01590448       0.00281877 \n\nNote: \"alha-divergence\" is sum of \"Reapportionment\" and \"Redisticting\" terms.\n\n\nThe \\(\\alpha\\)-divergence in the case of marginalization in district (unit = \"l1\") matches the value of reapportionment-stage in decomposition.\n\nindex(tiny_obj, unit = \"l1\")[\"ad\"]\n\n        ad \n0.01590448 \n\n\nThe \\(\\alpha\\)-divergence based on joint distribution (unit = \"joint\") is consistent with \\(\\alpha\\)-divergence in decomposition.\n\nindex(tiny_obj, unit = \"joint\")[\"ad\"]\n\n        ad \n0.01872325"
  }
]